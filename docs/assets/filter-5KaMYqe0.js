import{c as Pe,V as de}from"./VTextField-CLSPMm7c.js";import{p as z,I as pe,h as se,ba as Ve,e as H,l as ie,a as g,G as X,n as E,aF as Te,s as L,q as oe,r as _,b as D,W as we,d as ne,bu as Ie,bR as Fe,X as be,at as ue,af as xe,b0 as Ce,ag as Re,t as Ae,i as Me,f as De,aC as ee,K as Oe,P as Be,ar as Le,u as me,bS as _e,C as Ke,as as re,bT as ve,bB as he,br as W,aH as Ee}from"./index-BYWsBYtF.js";import{d as He}from"./VInput-CwTs2RKk.js";import{f as Ue}from"./forwardRefs-D3j0TLhE.js";import{m as Ne,u as je,V as ze,a as ge}from"./VList-wnBQ6eUC.js";import{y as qe,V as ye,g as $e}from"./index-CqdMy8lr.js";import{V as We}from"./dialog-transition-CdzLxCw9.js";import{V as Xe}from"./VMenu-BAWQ3Wct.js";import{g as Ge}from"./VOverlay-uyg0Ioz0.js";import{a as Qe}from"./VCheckboxBtn-B1hdxoeT.js";import{V as Ye}from"./VAvatar-Bm8XvpvO.js";import{V as Je}from"./VChip-BnTEbD1P.js";const Ze=z({renderless:Boolean,...pe()},"VVirtualScrollItem"),et=se()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Ze(),emits:{"update:height":e=>!0},setup(e,s){let{attrs:t,emit:i,slots:o}=s;const{resizeRef:d,contentRect:h}=Ve(void 0,"border");H(()=>{var u;return(u=h.value)==null?void 0:u.height},u=>{u!=null&&i("update:height",u)}),ie(()=>{var u,n;return e.renderless?g(X,null,[(u=o.default)==null?void 0:u.call(o,{itemRef:d})]):g("div",E({ref:d,class:["v-virtual-scroll__item",e.class],style:e.style},t),[(n=o.default)==null?void 0:n.call(o)])})}}),tt=-1,lt=1,ae=100,nt=z({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function at(e,s){const t=Te(),i=L(0);oe(()=>{i.value=parseFloat(e.itemHeight||0)});const o=L(0),d=L(Math.ceil((parseInt(e.height)||t.height.value)/(i.value||16))||1),h=L(0),u=L(0),n=_(),m=_();let P=0;const{resizeRef:I,contentRect:r}=Ve();oe(()=>{I.value=n.value});const f=D(()=>{var l;return n.value===document.documentElement?t.height.value:((l=r.value)==null?void 0:l.height)||parseInt(e.height)||0}),x=D(()=>!!(n.value&&m.value&&f.value&&i.value));let k=Array.from({length:s.value.length}),y=Array.from({length:s.value.length});const p=L(0);let S=-1;function A(l){return k[l]||i.value}const M=Fe(()=>{const l=performance.now();y[0]=0;const c=s.value.length;for(let w=1;w<=c-1;w++)y[w]=(y[w-1]||0)+A(w-1);p.value=Math.max(p.value,performance.now()-l)},p),G=H(x,l=>{l&&(G(),P=m.value.offsetTop,M.immediate(),O(),~S&&be(()=>{ue&&window.requestAnimationFrame(()=>{Z(S),S=-1})}))});we(()=>{M.clear()});function te(l,c){const w=k[l],b=i.value;i.value=b?Math.min(i.value,c):c,(w!==c||b!==i.value)&&(k[l]=c,M())}function F(l){return l=ne(l,0,s.value.length-1),y[l]||0}function Q(l){return ot(y,l)}let U=0,K=0,q=0;H(f,(l,c)=>{c&&(O(),l<c&&requestAnimationFrame(()=>{K=0,O()}))});let N=-1;function j(){if(!n.value||!m.value)return;const l=n.value.scrollTop,c=performance.now();c-q>500?(K=Math.sign(l-U),P=m.value.offsetTop):K=l-U,U=l,q=c,window.clearTimeout(N),N=window.setTimeout(Y,500),O()}function Y(){!n.value||!m.value||(K=0,q=0,window.clearTimeout(N),O())}let J=-1;function O(){cancelAnimationFrame(J),J=requestAnimationFrame(le)}function le(){if(!n.value||!f.value)return;const l=U-P,c=Math.sign(K),w=Math.max(0,l-ae),b=ne(Q(w),0,s.value.length),v=l+f.value+ae,V=ne(Q(v)+1,b+1,s.value.length);if((c!==tt||b<o.value)&&(c!==lt||V>d.value)){const T=F(o.value)-F(b),B=F(V)-F(d.value);Math.max(T,B)>ae?(o.value=b,d.value=V):(b<=0&&(o.value=b),V>=s.value.length&&(d.value=V))}h.value=F(o.value),u.value=F(s.value.length)-F(d.value)}function Z(l){const c=F(l);!n.value||l&&!c?S=l:n.value.scrollTop=c}const a=D(()=>s.value.slice(o.value,d.value).map((l,c)=>({raw:l,index:c+o.value,key:Ie(l)&&"value"in l?l.value:c+o.value})));return H(s,()=>{k=Array.from({length:s.value.length}),y=Array.from({length:s.value.length}),M.immediate(),O()},{deep:!0}),{calculateVisibleItems:O,containerRef:n,markerRef:m,computedItems:a,paddingTop:h,paddingBottom:u,scrollToIndex:Z,handleScroll:j,handleScrollend:Y,handleItemResize:te}}function ot(e,s){let t=e.length-1,i=0,o=0,d=null,h=-1;if(e[t]<s)return t;for(;i<=t;)if(o=i+t>>1,d=e[o],d>s)t=o-1;else if(d<s)h=o,i=o+1;else return d===s?o:i;return h}const ut=z({items:{type:Array,default:()=>[]},renderless:Boolean,...nt(),...pe(),...xe()},"VVirtualScroll"),rt=se()({name:"VVirtualScroll",props:ut(),setup(e,s){let{slots:t}=s;const i=Ce("VVirtualScroll"),{dimensionStyles:o}=Re(e),{calculateVisibleItems:d,containerRef:h,markerRef:u,handleScroll:n,handleScrollend:m,handleItemResize:P,scrollToIndex:I,paddingTop:r,paddingBottom:f,computedItems:x}=at(e,Ae(e,"items"));return Me(()=>e.renderless,()=>{function k(){var S,A;const p=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[p]("scroll",n,{passive:!0}),document[p]("scrollend",m)):((S=h.value)==null||S[p]("scroll",n,{passive:!0}),(A=h.value)==null||A[p]("scrollend",m))}De(()=>{h.value=Ge(i.vnode.el,!0),k(!0)}),we(k)}),ie(()=>{const k=x.value.map(y=>g(et,{key:y.key,renderless:e.renderless,"onUpdate:height":p=>P(y.index,p)},{default:p=>{var S;return(S=t.default)==null?void 0:S.call(t,{item:y.raw,index:y.index,...p})}}));return e.renderless?g(X,null,[g("div",{ref:u,class:"v-virtual-scroll__spacer",style:{paddingTop:ee(r.value)}},null),k,g("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:ee(f.value)}},null)]):g("div",{ref:h,class:["v-virtual-scroll",e.class],onScrollPassive:n,onScrollend:m,style:[o.value,e.style]},[g("div",{ref:u,class:"v-virtual-scroll__container",style:{paddingTop:ee(r.value),paddingBottom:ee(f.value)}},[k])])}),{calculateVisibleItems:d,scrollToIndex:I}}});function st(e,s){const t=L(!1);let i;function o(u){cancelAnimationFrame(i),t.value=!0,i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{t.value=!1})})}async function d(){await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>requestAnimationFrame(u)),await new Promise(u=>{if(t.value){const n=H(t,()=>{n(),u()})}else u()})}async function h(u){var P,I;if(u.key==="Tab"&&((P=s.value)==null||P.focus()),!["PageDown","PageUp","Home","End"].includes(u.key))return;const n=(I=e.value)==null?void 0:I.$el;if(!n)return;(u.key==="Home"||u.key==="End")&&n.scrollTo({top:u.key==="Home"?0:n.scrollHeight,behavior:"smooth"}),await d();const m=n.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(u.key==="PageDown"||u.key==="Home"){const r=n.getBoundingClientRect().top;for(const f of m)if(f.getBoundingClientRect().top>=r){f.focus();break}}else{const r=n.getBoundingClientRect().bottom;for(const f of[...m].reverse())if(f.getBoundingClientRect().bottom<=r){f.focus();break}}}return{onScrollPassive:o,onKeydown:h}}const it=z({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:Oe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ne({itemChildren:!1})},"Select"),ct=z({...it(),...Be(Pe({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...qe({transition:{component:We}})},"VSelect"),Tt=se()({name:"VSelect",props:ct(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,s){let{slots:t}=s;const{t:i}=Le(),o=_(),d=_(),h=_(),u=me(e,"menu"),n=D({get:()=>u.value,set:a=>{var l;u.value&&!a&&((l=d.value)!=null&&l.Î¨openChildren.size)||(u.value=a)}}),{items:m,transformIn:P,transformOut:I}=je(e),r=me(e,"modelValue",[],a=>P(a===null?[null]:re(a)),a=>{const l=I(a);return e.multiple?l:l[0]??null}),f=D(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),x=He(e),k=D(()=>r.value.map(a=>a.value)),y=L(!1),p=D(()=>n.value?e.closeText:e.openText);let S="",A;const M=D(()=>e.hideSelected?m.value.filter(a=>!r.value.some(l=>e.valueComparator(l,a))):m.value),G=D(()=>e.hideNoData&&!M.value.length||x.isReadonly.value||x.isDisabled.value),te=D(()=>{var a;return{...e.menuProps,activatorProps:{...((a=e.menuProps)==null?void 0:a.activatorProps)||{},"aria-haspopup":"listbox"}}}),F=_(),Q=st(F,o);function U(a){e.openOnClear&&(n.value=!0)}function K(){G.value||(n.value=!n.value)}function q(a){ve(a)&&N(a)}function N(a){var b,v;if(!a.key||x.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"," "].includes(a.key)&&(n.value=!0),["Escape","Tab"].includes(a.key)&&(n.value=!1),a.key==="Home"?(b=F.value)==null||b.focus("first"):a.key==="End"&&((v=F.value)==null||v.focus("last"));const l=1e3;if(e.multiple||!ve(a))return;const c=performance.now();c-A>l&&(S=""),S+=a.key.toLowerCase(),A=c;const w=m.value.find(V=>V.title.toLowerCase().startsWith(S));if(w!==void 0){r.value=[w];const V=M.value.indexOf(w);ue&&window.requestAnimationFrame(()=>{var T;V>=0&&((T=h.value)==null||T.scrollToIndex(V))})}}function j(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!a.props.disabled)if(e.multiple){const c=r.value.findIndex(b=>e.valueComparator(b.value,a.value)),w=l??!~c;if(~c){const b=w?[...r.value,a]:[...r.value];b.splice(c,1),r.value=b}else w&&(r.value=[...r.value,a])}else{const c=l!==!1;r.value=c?[a]:[],be(()=>{n.value=!1})}}function Y(a){var l;(l=F.value)!=null&&l.$el.contains(a.relatedTarget)||(n.value=!1)}function J(){var a;e.eager&&((a=h.value)==null||a.calculateVisibleItems())}function O(){var a;y.value&&((a=o.value)==null||a.focus())}function le(a){y.value=!0}function Z(a){if(a==null)r.value=[];else if(he(o.value,":autofill")||he(o.value,":-webkit-autofill")){const l=m.value.find(c=>c.title===a);l&&j(l)}else o.value&&(o.value.value="")}return H(n,()=>{if(!e.hideSelected&&n.value&&r.value.length){const a=M.value.findIndex(l=>r.value.some(c=>e.valueComparator(c.value,l.value)));ue&&window.requestAnimationFrame(()=>{var l;a>=0&&((l=h.value)==null||l.scrollToIndex(a))})}}),H(()=>e.items,(a,l)=>{n.value||y.value&&!l.length&&a.length&&(n.value=!0)}),ie(()=>{const a=!!(e.chips||t.chip),l=!!(!e.hideNoData||M.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),c=r.value.length>0,w=de.filterProps(e),b=c||!y.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return g(de,E({ref:o},w,{modelValue:r.value.map(v=>v.props.value).join(", "),"onUpdate:modelValue":Z,focused:y.value,"onUpdate:focused":v=>y.value=v,validationValue:r.externalValue,counterValue:f.value,dirty:c,class:["v-select",{"v-select--active-menu":n.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!t.selection},e.class],style:e.style,inputmode:"none",placeholder:b,"onClick:clear":U,"onMousedown:control":K,onBlur:Y,onKeydown:N,"aria-label":i(p.value),title:i(p.value)}),{...t,default:()=>g(X,null,[g(Xe,E({ref:d,modelValue:n.value,"onUpdate:modelValue":v=>n.value=v,activator:"parent",contentClass:"v-select__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:J,onAfterLeave:O},te.value),{default:()=>[l&&g(ze,E({ref:F,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:v=>v.preventDefault(),onKeydown:q,onFocusin:le,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Q,e.listProps),{default:()=>{var v,V,T;return[(v=t["prepend-item"])==null?void 0:v.call(t),!M.value.length&&!e.hideNoData&&(((V=t["no-data"])==null?void 0:V.call(t))??g(ge,{key:"no-data",title:i(e.noDataText)},null)),g(rt,{ref:h,renderless:!0,items:M.value},{default:B=>{var fe;let{item:C,index:$,itemRef:R}=B;const ce=E(C.props,{ref:R,key:C.value,onClick:()=>j(C,null)});return((fe=t.item)==null?void 0:fe.call(t,{item:C,index:$,props:ce}))??g(ge,E(ce,{role:"option"}),{prepend:ke=>{let{isSelected:Se}=ke;return g(X,null,[e.multiple&&!e.hideSelected?g(Qe,{key:C.value,modelValue:Se,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&g(Ye,{image:C.props.prependAvatar},null),C.props.prependIcon&&g(ye,{icon:C.props.prependIcon},null)])}})}}),(T=t["append-item"])==null?void 0:T.call(t)]}})]}),r.value.map((v,V)=>{function T(R){R.stopPropagation(),R.preventDefault(),j(v,!1)}const B={"onClick:close":T,onKeydown(R){R.key!=="Enter"&&R.key!==" "||(R.preventDefault(),R.stopPropagation(),T(R))},onMousedown(R){R.preventDefault(),R.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},C=a?!!t.chip:!!t.selection,$=C?_e(a?t.chip({item:v,index:V,props:B}):t.selection({item:v,index:V})):void 0;if(!(C&&!$))return g("div",{key:v.value,class:"v-select__selection"},[a?t.chip?g($e,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:v.title}}},{default:()=>[$]}):g(Je,E({key:"chip",closable:e.closableChips,size:"small",text:v.title,disabled:v.props.disabled},B),null):$??g("span",{class:"v-select__selection-text"},[v.title,e.multiple&&V<r.value.length-1&&g("span",{class:"v-select__selection-comma"},[Ke(",")])])])})]),"append-inner":function(){var B;for(var v=arguments.length,V=new Array(v),T=0;T<v;T++)V[T]=arguments[T];return g(X,null,[(B=t["append-inner"])==null?void 0:B.call(t,...V),e.menuIcon?g(ye,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ue({isFocused:y,menu:n,select:j},o)}}),ft=(e,s,t)=>e==null||s==null?-1:e.toString().toLocaleLowerCase().indexOf(s.toString().toLocaleLowerCase()),It=z({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function dt(e,s,t){var u;const i=[],o=(t==null?void 0:t.default)??ft,d=t!=null&&t.filterKeys?re(t.filterKeys):!1,h=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return i;e:for(let n=0;n<e.length;n++){const[m,P=m]=re(e[n]),I={},r={};let f=-1;if((s||h>0)&&!(t!=null&&t.noFilter)){if(typeof m=="object"){const y=d||Object.keys(P);for(const p of y){const S=Ee(P,p),A=(u=t==null?void 0:t.customKeyFilter)==null?void 0:u[p];if(f=A?A(S,s,m):o(S,s,m),f!==-1&&f!==!1)A?I[p]=f:r[p]=f;else if((t==null?void 0:t.filterMode)==="every")continue e}}else f=o(m,s,m),f!==-1&&f!==!1&&(r.title=f);const x=Object.keys(r).length,k=Object.keys(I).length;if(!x&&!k||(t==null?void 0:t.filterMode)==="union"&&k!==h&&!x||(t==null?void 0:t.filterMode)==="intersection"&&(k!==h||!x))continue}i.push({index:n,matches:{...r,...I}})}return i}function Ft(e,s,t,i){const o=_([]),d=_(new Map),h=D(()=>i!=null&&i.transform?W(s).map(n=>[n,i.transform(n)]):W(s));oe(()=>{const n=typeof t=="function"?t():W(t),m=typeof n!="string"&&typeof n!="number"?"":String(n),P=dt(h.value,m,{customKeyFilter:{...e.customKeyFilter,...W(i==null?void 0:i.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),I=W(s),r=[],f=new Map;P.forEach(x=>{let{index:k,matches:y}=x;const p=I[k];r.push(p),f.set(p.value,y)}),o.value=r,d.value=f});function u(n){return d.value.get(n.value)}return{filteredItems:o,filteredMatches:d,getMatches:u}}export{Tt as V,It as a,at as b,et as c,it as d,st as e,rt as f,nt as m,Ft as u};
