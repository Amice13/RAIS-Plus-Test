import{p as Be}from"./index-D0cxP7tL.js";import{_ as tt,o as k,c as Y,w as f,a as p,z as A,A as D,C as V,B as st,a4 as j,F as _t,n as Le,ae as ze,x as Pt,y as It,bY as Ye}from"./index-BYWsBYtF.js";import{a as mt,V as pt}from"./VCard-C8It3tDs.js";import{a as U,V as b}from"./VRow-D5QUgmxK.js";import{V as xt}from"./VBtn-DEU8AXzn.js";import{_ as we,a as He}from"./CustomTextFieldTranslit-DAGdx7D0.js";import{V as wt}from"./VTextField-CLSPMm7c.js";import{V as Xe}from"./index-CqdMy8lr.js";import{V as We}from"./VCheckbox-CLjkCuK4.js";import{V as je}from"./VTooltip-CKohhaj7.js";import{_ as Ge}from"./CustomEntitySelector-DpN7aXCm.js";import{_ as Fe}from"./BlockContacts-BQ818p_f.js";import{_ as qe}from"./index-XLfmmccI.js";import{_ as Ke}from"./CustomDate-BvE_k-Ie.js";import{_ as Je}from"./CustomGender-2pTOXWap.js";import{b as ie}from"./route-block-B_A1xBdJ.js";import"./VAvatar-Bm8XvpvO.js";import"./VImg-wiXIkP7s.js";/* empty css              */import"./group-BcbT0sDe.js";import"./filter-5KaMYqe0.js";import"./VInput-CwTs2RKk.js";import"./index-bmXFo_Al.js";import"./forwardRefs-D3j0TLhE.js";import"./VList-wnBQ6eUC.js";import"./dialog-transition-CdzLxCw9.js";import"./VMenu-BAWQ3Wct.js";import"./VOverlay-uyg0Ioz0.js";import"./VCheckboxBtn-B1hdxoeT.js";import"./VChip-BnTEbD1P.js";import"./debouncer-Whu4ZLob.js";import"./CustomTag-DNZukCra.js";import"./CustomEmail-CHRbzFUN.js";import"./CustomPhone-JFRV9tiP.js";import"./VDataTable-DS7yi-Dm.js";import"./VPagination-BBLVO-bG.js";import"./VSpacer-D4hnwTqC.js";const{users:Qe}=Be,Ze={name:"BlockSumbission",inject:["$confirm","$error","$loading","$showResult"],props:{modelValue:{type:Object,default:()=>({})},table:{type:String,default:"entity"}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},isAdmin(){var e,t,a;return(a=(t=(e=this.appStore)==null?void 0:e.user)==null?void 0:t.role)==null?void 0:a.includes("Admin")}},methods:{async save(){if(!await this.$confirm({title:"Save entity",description:"Would you like to save the entity?"}))return!1;this.$loading(!0),this.model=Qe.preprocess(this.model),await this.$nextTick(),this.model.role=["Partner Manager"],this.model.privacyConsent=!0,this.model.termsConsent=!0;let t;try{const a=this.$storage.users;this.model.id||(t=await a.push(this.model)),this.model.id&&(t=await a.update(this.model.id,this.model))}catch(a){t=!1,await this.$error(a)}if(this.$loading(!1),!t)return!1;this.model.id=t.id,this.$route.fullPath==="/users/me"&&(this.appStore.user=this.model),await this.$showResult(),this.goBack()},async remove(){if(!await this.$confirm({title:"Delete entity",description:"Would you like to save the entity?"}))return!1;this.$loading(!0);try{const t=this.$storage.users;await delete t[this.model.id]}catch(t){return await this.$error(t),this.$loading(!1)}await this.$showResult(),this.goBack()},goBack(){var t,a,i;if(((i=(a=(t=this.$router.options)==null?void 0:t.history)==null?void 0:a.state)==null?void 0:i.back)===this.$route.path||this.$route.path.match(/\/login/))return this.$router.push("/");this.$goToPreviousPage()}}},ti={class:"text-h5 mb-2 offset-md1 black--text"};function ei(e,t,a,i,s,r){return k(),Y(pt,{class:"data-block user-sumbission pt-sm-4 pb-sm-4 pb-md-16",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-sm-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",ti,D(e.$t("Submission")),1),A("div",null,D(e.$t("Please verify and submit your data")),1)]),_:1}),p(b,{cols:"12",md:"9",class:"pr-md-16"},{default:f(()=>[p(xt,{onClick:r.save,block:e.$vuetify.display.xs,color:"primary","prepend-icon":"mdi-pencil",class:"mb-2 mr-4"},{default:f(()=>[V(D(e.$t("Save")),1)]),_:1},8,["onClick","block"]),r.isAdmin&&e.appStore.user.id!==r.model.id?(k(),Y(xt,{key:0,onClick:r.remove,block:e.$vuetify.display.xs,color:"error","prepend-icon":"mdi-pencil",class:"mb-2 mr-4"},{default:f(()=>[V(D(e.$t("Delete")),1)]),_:1},8,["onClick","block"])):st("",!0),p(xt,{onClick:t[0]||(t[0]=o=>e.$router.go(-1)),block:e.$vuetify.display.xs,variant:"text",color:"warning","prepend-icon":"mdi-close",class:"mb-sm-2 mr-4"},{default:f(()=>[V(D(e.$t("Cancel")),1)]),_:1},8,["block"])]),_:1})]),_:1})]),_:1})]),_:1})}const ii=tt(Ze,[["render",ei]]),ai=["Not initiated","Secret is issued","TOTP is set"],ri=["Admin","Partner Manager","Distributor","Donor","Tax Checker"],oi={name:"UserSecurityBlock",props:{modelValue:{type:Object,default:()=>({})}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},mfaStatuses(){return ai},roles(){return ri}}},si={class:"text-h5 mb-2 offset-md1 black--text"};function ni(e,t,a,i,s,r){const o=we;return k(),Y(pt,{class:"data-block",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",si,[j(e.$slots,"header",{},()=>[V(D(e.$t("Security data")),1)])]),A("div",null,[j(e.$slots,"description",{},()=>[V(D(e.$t("Information about the account security")),1)])])]),_:3}),p(b,{cols:"12",md:"9",class:"pr-md-16 pt-4"},{default:f(()=>[p(U,{class:"pt-0 pb-0"},{default:f(()=>[p(b,{class:"pb-0",cols:"12",lg:"6"},{default:f(()=>[p(o,{modelValue:r.model.role[0],"onUpdate:modelValue":t[0]||(t[0]=n=>r.model.role[0]=n),items:r.roles,label:e.$t("User role")},null,8,["modelValue","items","label"])]),_:1}),e.$network.online?(k(),Y(b,{key:0,class:"pb-4",cols:"12",lg:"6"},{default:f(()=>[p(o,{modelValue:r.model.mfa,"onUpdate:modelValue":t[1]||(t[1]=n=>r.model.mfa=n),items:r.mfaStatuses,label:e.$t("Multi-factor authentication")},null,8,["modelValue","items","label"])]),_:1})):st("",!0)]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})}const li=tt(oi,[["render",ni]]),hi=["Active","Blocked"],di={name:"UserStatusBlock",props:{modelValue:{type:Object,default:()=>({})}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},statuses(){return hi},isAdmin(){var e,t,a;return(a=(t=(e=this.appStore)==null?void 0:e.user)==null?void 0:t.role)==null?void 0:a.includes("Admin")}}},ui={class:"text-h5 mb-2 offset-md1 black--text"},ci={class:"d-flex align-center text-body-1 mt-2",style:{height:"100%"}},mi={key:0,class:"ml-4 font-weight-bold"},pi={key:1,class:"ml-4 font-weight-bold"};function fi(e,t,a,i,s,r){const o=we;return k(),Y(pt,{class:"data-block user-status",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",ui,[j(e.$slots,"itemset-header",{},()=>[V(D(e.$t("User information")),1)])]),A("div",null,[j(e.$slots,"itemset-description",{},()=>[V(D(e.$t("Additional information about the user")),1)])])]),_:3}),p(b,{cols:"12",md:"9",class:"pr-md-16 pt-4"},{default:f(()=>[p(U,{class:"pt-0 pb-0"},{default:f(()=>[p(b,{cols:"12"},{default:f(()=>[r.isAdmin?(k(),Y(wt,{key:0,modelValue:r.model.email,"onUpdate:modelValue":t[0]||(t[0]=n=>r.model.email=n),label:e.$t("User authentication email"),id:"email",name:"email",variant:"underlined"},null,8,["modelValue","label"])):st("",!0)]),_:1}),p(b,{cols:"12",lg:"6"},{default:f(()=>[p(o,{modelValue:r.model.status,"onUpdate:modelValue":t[1]||(t[1]=n=>r.model.status=n),items:r.statuses,label:e.$t("User status")},null,8,["modelValue","items","label"])]),_:1}),p(b,{cols:"12",lg:"6"},{default:f(()=>[A("div",ci,[p(Xe,{icon:"mdi-check",color:"green"}),r.model.verified?(k(),_t("div",mi,D(e.$t("Email is verified")),1)):(k(),_t("div",pi,D(e.$t("Email is not verified")),1))])]),_:1}),p(b,{cols:"12",class:"mt-2"},{default:f(()=>[p(We,{modelValue:r.model.privacyConsent,"onUpdate:modelValue":t[3]||(t[3]=n=>r.model.privacyConsent=n)},{label:f(()=>[A("div",null,[V(D(e.$t("I confirm that I am 18 years or older and I consent to UNHCR processing my personal data in accordance with"))+" ",1),p(je,{location:"bottom"},{activator:f(({props:n})=>[A("a",Le({href:"https://vuetifyjs.com",target:"_blank"},n,{onClick:t[2]||(t[2]=ze(()=>{},["stop"]))}),D(e.$t("Privacy notice")),17)]),default:f(()=>[V(" "+D(e.$t("Opens in new window")),1)]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})}const gi=tt(di,[["render",fi]]),vi={name:"UserOrganizationBlock",props:{modelValue:{type:Object,default:()=>({})}},$_localize:["model"],computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},disabled(){return!1}},watch:{"model.organization"(e,t){this.model.responsibleOrganization||(this.model.responsibleOrganization=[]);let a=this.model.responsibleOrganization.map(i=>i.name).indexOf(e==null?void 0:e.name);return a>-1&&this.model.responsibleOrganization.splice(a,1),!t||!Object.keys(t).length||(this.model.responsibleOrganization=[...this.model.responsibleOrganization,t]),!1}}},bi={class:"text-h5 mb-2 offset-md1 black--text"};function wi(e,t,a,i,s,r){const o=Ge;return k(),Y(pt,{class:"data-block user-organization",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",bi,[j(e.$slots,"personal-header",{},()=>[V(D(e.$t("Organization")),1)])]),A("div",null,[j(e.$slots,"personal-description",{},()=>[V(D(e.$t("Information about your organization")),1)])])]),_:3}),p(b,{cols:"12",md:"9",class:"pr-md-16 pt-0"},{default:f(()=>[p(U,null,{default:f(()=>[p(b,{cols:"12",class:"mt-1 mb-2"},{default:f(()=>[A("div",null,D(e.$t("The organization you represent and your job title")),1)]),_:1}),p(b,{cols:"12"},{default:f(()=>[p(o,{modelValue:r.model.organization,"onUpdate:modelValue":t[0]||(t[0]=n=>r.model.organization=n),disabled:r.disabled,label:e.$t("Organization name"),field:e.$i18n.locale==="en"?"name":"translation.uk.name",fields:["id","name","code","translation.uk.name"],entity:"organizations",id:"organization",name:"organization",variant:"underlined"},null,8,["modelValue","disabled","label","field"])]),_:1}),p(b,{cols:"12"},{default:f(()=>[p(wt,{modelValue:e.$l_model.jobTitle,"onUpdate:modelValue":t[1]||(t[1]=n=>e.$l_model.jobTitle=n),label:e.$t("Job title"),placeholder:e.$i18n.locale==="en"?"":r.model.name,hint:e.$i18n.locale==="en"?e.$t("Translate this field by switching languages"):e.$t("This is a translated field, please don't forget to switch to English and proide the data"),id:"jobTitle",name:"jobTitle",variant:"underlined"},null,8,["modelValue","label","placeholder","hint"])]),_:1}),p(b,{cols:"12",class:"mt-1 mb-2"},{default:f(()=>[A("div",null,D(e.$t("Your profile is visible to the following organizations")),1)]),_:1}),p(b,{cols:"12",lg:"12"},{default:f(()=>[p(o,{modelValue:r.model.responsibleOrganization,"onUpdate:modelValue":t[2]||(t[2]=n=>r.model.responsibleOrganization=n),label:e.$t("List of organizations"),fields:["name","code","translation.uk.name"],field:e.$i18n.locale==="en"?"name":"translation.uk.name",entity:"organizations",multiple:"",id:"responsibleOrganization",name:"responsibleOrganization",variant:"underlined"},null,8,["modelValue","label","field"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})}const yi=tt(vi,[["render",wi]]);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),a.push.apply(a,i)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ae(Object(a),!0).forEach(function(i){Ti(e,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(a,i))})}return e}function _i(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var i=a.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _e(e){var t=_i(e,"string");return typeof t=="symbol"?t:t+""}function Rt(e){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(e)}function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_e(i.key),i)}}function Ei(e,t,a){return re(e.prototype,t),re(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ti(e,t,a){return t=_e(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function De(e){return Mi(e)||Ai(e)||Ni(e)||xi()}function Mi(e){if(Array.isArray(e))return Ut(e)}function Ai(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ni(e,t){if(e){if(typeof e=="string")return Ut(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ut(e,t)}}function Ut(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function xi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ot=typeof window<"u"&&typeof window.document<"u",G=Ot?window:{},Gt=Ot&&G.document.documentElement?"ontouchstart"in G.document.documentElement:!1,Ft=Ot?"PointerEvent"in G:!1,T="cropper",qt="all",Ee="crop",Te="move",Me="zoom",rt="e",ot="w",lt="s",J="n",ft="ne",gt="nw",vt="se",bt="sw",Bt="".concat(T,"-crop"),oe="".concat(T,"-disabled"),R="".concat(T,"-hidden"),se="".concat(T,"-hide"),Ci="".concat(T,"-invisible"),Ct="".concat(T,"-modal"),Lt="".concat(T,"-move"),Dt="".concat(T,"Action"),Mt="".concat(T,"Preview"),Kt="crop",Ae="move",Ne="none",zt="crop",Yt="cropend",Ht="cropmove",Xt="cropstart",ne="dblclick",Oi=Gt?"touchstart":"mousedown",Si=Gt?"touchmove":"mousemove",$i=Gt?"touchend touchcancel":"mouseup",le=Ft?"pointerdown":Oi,he=Ft?"pointermove":Si,de=Ft?"pointerup pointercancel":$i,ue="ready",ce="resize",me="wheel",Wt="zoom",pe="image/jpeg",ki=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Vi=/^data:/,Pi=/^data:image\/jpeg;base64,/,Ii=/^img|canvas$/i,xe=200,Ce=100,fe={viewMode:0,dragMode:Kt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:xe,minContainerHeight:Ce,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},Ri='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ui=Number.isNaN||G.isNaN;function v(e){return typeof e=="number"&&!Ui(e)}var ge=function(t){return t>0&&t<1/0};function kt(e){return typeof e>"u"}function nt(e){return Rt(e)==="object"&&e!==null}var Bi=Object.prototype.hasOwnProperty;function ht(e){if(!nt(e))return!1;try{var t=e.constructor,a=t.prototype;return t&&a&&Bi.call(a,"isPrototypeOf")}catch{return!1}}function I(e){return typeof e=="function"}var Li=Array.prototype.slice;function Oe(e){return Array.from?Array.from(e):Li.call(e)}function x(e,t){return e&&I(t)&&(Array.isArray(e)||v(e.length)?Oe(e).forEach(function(a,i){t.call(e,a,i,e)}):nt(e)&&Object.keys(e).forEach(function(a){t.call(e,e[a],a,e)})),e}var M=Object.assign||function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];return nt(t)&&i.length>0&&i.forEach(function(r){nt(r)&&Object.keys(r).forEach(function(o){t[o]=r[o]})}),t},zi=/\.\d*(?:0|9){12}\d*$/;function ut(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return zi.test(e)?Math.round(e*t)/t:e}var Yi=/^width|height|left|top|marginLeft|marginTop$/;function Q(e,t){var a=e.style;x(t,function(i,s){Yi.test(s)&&v(i)&&(i="".concat(i,"px")),a[s]=i})}function Hi(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function $(e,t){if(t){if(v(e.length)){x(e,function(i){$(i,t)});return}if(e.classList){e.classList.add(t);return}var a=e.className.trim();a?a.indexOf(t)<0&&(e.className="".concat(a," ").concat(t)):e.className=t}}function W(e,t){if(t){if(v(e.length)){x(e,function(a){W(a,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function dt(e,t,a){if(t){if(v(e.length)){x(e,function(i){dt(i,t,a)});return}a?$(e,t):W(e,t)}}var Xi=/([a-z\d])([A-Z])/g;function Jt(e){return e.replace(Xi,"$1-$2").toLowerCase()}function jt(e,t){return nt(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Jt(t)))}function Et(e,t,a){nt(a)?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-".concat(Jt(t)),a)}function Wi(e,t){if(nt(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Jt(t)))}var Se=/\s\s*/,$e=function(){var e=!1;if(Ot){var t=!1,a=function(){},i=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(r){t=r}});G.addEventListener("test",a,i),G.removeEventListener("test",a,i)}return e}();function H(e,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a;t.trim().split(Se).forEach(function(r){if(!$e){var o=e.listeners;o&&o[r]&&o[r][a]&&(s=o[r][a],delete o[r][a],Object.keys(o[r]).length===0&&delete o[r],Object.keys(o).length===0&&delete e.listeners)}e.removeEventListener(r,s,i)})}function z(e,t,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=a;t.trim().split(Se).forEach(function(r){if(i.once&&!$e){var o=e.listeners,n=o===void 0?{}:o;s=function(){delete n[r][a],e.removeEventListener(r,s,i);for(var l=arguments.length,h=new Array(l),d=0;d<l;d++)h[d]=arguments[d];a.apply(e,h)},n[r]||(n[r]={}),n[r][a]&&e.removeEventListener(r,n[r][a],i),n[r][a]=s,e.listeners=n}e.addEventListener(r,s,i)})}function ct(e,t,a){var i;return I(Event)&&I(CustomEvent)?i=new CustomEvent(t,{detail:a,bubbles:!0,cancelable:!0}):(i=document.createEvent("CustomEvent"),i.initCustomEvent(t,!0,!0,a)),e.dispatchEvent(i)}function ke(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Vt=G.location,ji=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function ve(e){var t=e.match(ji);return t!==null&&(t[1]!==Vt.protocol||t[2]!==Vt.hostname||t[3]!==Vt.port)}function be(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function yt(e){var t=e.rotate,a=e.scaleX,i=e.scaleY,s=e.translateX,r=e.translateY,o=[];v(s)&&s!==0&&o.push("translateX(".concat(s,"px)")),v(r)&&r!==0&&o.push("translateY(".concat(r,"px)")),v(t)&&t!==0&&o.push("rotate(".concat(t,"deg)")),v(a)&&a!==1&&o.push("scaleX(".concat(a,")")),v(i)&&i!==1&&o.push("scaleY(".concat(i,")"));var n=o.length?o.join(" "):"none";return{WebkitTransform:n,msTransform:n,transform:n}}function Gi(e){var t=ye({},e),a=0;return x(e,function(i,s){delete t[s],x(t,function(r){var o=Math.abs(i.startX-r.startX),n=Math.abs(i.startY-r.startY),u=Math.abs(i.endX-r.endX),l=Math.abs(i.endY-r.endY),h=Math.sqrt(o*o+n*n),d=Math.sqrt(u*u+l*l),c=(d-h)/h;Math.abs(c)>Math.abs(a)&&(a=c)})}),a}function At(e,t){var a=e.pageX,i=e.pageY,s={endX:a,endY:i};return t?s:ye({startX:a,startY:i},s)}function Fi(e){var t=0,a=0,i=0;return x(e,function(s){var r=s.startX,o=s.startY;t+=r,a+=o,i+=1}),t/=i,a/=i,{pageX:t,pageY:a}}function Z(e){var t=e.aspectRatio,a=e.height,i=e.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=ge(i),o=ge(a);if(r&&o){var n=a*t;s==="contain"&&n>i||s==="cover"&&n<i?a=i/t:i=a*t}else r?a=i/t:o&&(i=a*t);return{width:i,height:a}}function qi(e){var t=e.width,a=e.height,i=e.degree;if(i=Math.abs(i)%180,i===90)return{width:a,height:t};var s=i%90*Math.PI/180,r=Math.sin(s),o=Math.cos(s),n=t*o+a*r,u=t*r+a*o;return i>90?{width:u,height:n}:{width:n,height:u}}function Ki(e,t,a,i){var s=t.aspectRatio,r=t.naturalWidth,o=t.naturalHeight,n=t.rotate,u=n===void 0?0:n,l=t.scaleX,h=l===void 0?1:l,d=t.scaleY,c=d===void 0?1:d,g=a.aspectRatio,w=a.naturalWidth,E=a.naturalHeight,y=i.fillColor,C=y===void 0?"transparent":y,S=i.imageSmoothingEnabled,N=S===void 0?!0:S,F=i.imageSmoothingQuality,B=F===void 0?"low":F,m=i.maxWidth,_=m===void 0?1/0:m,O=i.maxHeight,L=O===void 0?1/0:O,q=i.minWidth,et=q===void 0?0:q,it=i.minHeight,K=it===void 0?0:it,X=document.createElement("canvas"),P=X.getContext("2d"),at=Z({aspectRatio:g,width:_,height:L}),Tt=Z({aspectRatio:g,width:et,height:K},"cover"),St=Math.min(at.width,Math.max(Tt.width,w)),$t=Math.min(at.height,Math.max(Tt.height,E)),Qt=Z({aspectRatio:s,width:_,height:L}),Zt=Z({aspectRatio:s,width:et,height:K},"cover"),te=Math.min(Qt.width,Math.max(Zt.width,r)),ee=Math.min(Qt.height,Math.max(Zt.height,o)),Re=[-te/2,-ee/2,te,ee];return X.width=ut(St),X.height=ut($t),P.fillStyle=C,P.fillRect(0,0,St,$t),P.save(),P.translate(St/2,$t/2),P.rotate(u*Math.PI/180),P.scale(h,c),P.imageSmoothingEnabled=N,P.imageSmoothingQuality=B,P.drawImage.apply(P,[e].concat(De(Re.map(function(Ue){return Math.floor(ut(Ue))})))),P.restore(),X}var Ve=String.fromCharCode;function Ji(e,t,a){var i="";a+=t;for(var s=t;s<a;s+=1)i+=Ve(e.getUint8(s));return i}var Qi=/^data:.*,/;function Zi(e){var t=e.replace(Qi,""),a=atob(t),i=new ArrayBuffer(a.length),s=new Uint8Array(i);return x(s,function(r,o){s[o]=a.charCodeAt(o)}),i}function ta(e,t){for(var a=[],i=8192,s=new Uint8Array(e);s.length>0;)a.push(Ve.apply(null,Oe(s.subarray(0,i)))),s=s.subarray(i);return"data:".concat(t,";base64,").concat(btoa(a.join("")))}function ea(e){var t=new DataView(e),a;try{var i,s,r;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var o=t.byteLength,n=2;n+1<o;){if(t.getUint8(n)===255&&t.getUint8(n+1)===225){s=n;break}n+=1}if(s){var u=s+4,l=s+10;if(Ji(t,u,4)==="Exif"){var h=t.getUint16(l);if(i=h===18761,(i||h===19789)&&t.getUint16(l+2,i)===42){var d=t.getUint32(l+4,i);d>=8&&(r=l+d)}}}if(r){var c=t.getUint16(r,i),g,w;for(w=0;w<c;w+=1)if(g=r+w*12+2,t.getUint16(g,i)===274){g+=8,a=t.getUint16(g,i),t.setUint16(g,1,i);break}}}catch{a=1}return a}function ia(e){var t=0,a=1,i=1;switch(e){case 2:a=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:a,scaleY:i}}var aa={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,a=this.options,i=this.container,s=this.cropper,r=Number(a.minContainerWidth),o=Number(a.minContainerHeight);$(s,R),W(t,R);var n={width:Math.max(i.offsetWidth,r>=0?r:xe),height:Math.max(i.offsetHeight,o>=0?o:Ce)};this.containerData=n,Q(s,{width:n.width,height:n.height}),$(t,R),W(s,R)},initCanvas:function(){var t=this.containerData,a=this.imageData,i=this.options.viewMode,s=Math.abs(a.rotate)%180===90,r=s?a.naturalHeight:a.naturalWidth,o=s?a.naturalWidth:a.naturalHeight,n=r/o,u=t.width,l=t.height;t.height*n>t.width?i===3?u=t.height*n:l=t.width/n:i===3?l=t.width/n:u=t.height*n;var h={aspectRatio:n,naturalWidth:r,naturalHeight:o,width:u,height:l};this.canvasData=h,this.limited=i===1||i===2,this.limitCanvas(!0,!0),h.width=Math.min(Math.max(h.width,h.minWidth),h.maxWidth),h.height=Math.min(Math.max(h.height,h.minHeight),h.maxHeight),h.left=(t.width-h.width)/2,h.top=(t.height-h.height)/2,h.oldLeft=h.left,h.oldTop=h.top,this.initialCanvasData=M({},h)},limitCanvas:function(t,a){var i=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,n=i.viewMode,u=r.aspectRatio,l=this.cropped&&o;if(t){var h=Number(i.minCanvasWidth)||0,d=Number(i.minCanvasHeight)||0;n>1?(h=Math.max(h,s.width),d=Math.max(d,s.height),n===3&&(d*u>h?h=d*u:d=h/u)):n>0&&(h?h=Math.max(h,l?o.width:0):d?d=Math.max(d,l?o.height:0):l&&(h=o.width,d=o.height,d*u>h?h=d*u:d=h/u));var c=Z({aspectRatio:u,width:h,height:d});h=c.width,d=c.height,r.minWidth=h,r.minHeight=d,r.maxWidth=1/0,r.maxHeight=1/0}if(a)if(n>(l?0:1)){var g=s.width-r.width,w=s.height-r.height;r.minLeft=Math.min(0,g),r.minTop=Math.min(0,w),r.maxLeft=Math.max(0,g),r.maxTop=Math.max(0,w),l&&this.limited&&(r.minLeft=Math.min(o.left,o.left+(o.width-r.width)),r.minTop=Math.min(o.top,o.top+(o.height-r.height)),r.maxLeft=o.left,r.maxTop=o.top,n===2&&(r.width>=s.width&&(r.minLeft=Math.min(0,g),r.maxLeft=Math.max(0,g)),r.height>=s.height&&(r.minTop=Math.min(0,w),r.maxTop=Math.max(0,w))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=s.width,r.maxTop=s.height},renderCanvas:function(t,a){var i=this.canvasData,s=this.imageData;if(a){var r=qi({width:s.naturalWidth*Math.abs(s.scaleX||1),height:s.naturalHeight*Math.abs(s.scaleY||1),degree:s.rotate||0}),o=r.width,n=r.height,u=i.width*(o/i.naturalWidth),l=i.height*(n/i.naturalHeight);i.left-=(u-i.width)/2,i.top-=(l-i.height)/2,i.width=u,i.height=l,i.aspectRatio=o/n,i.naturalWidth=o,i.naturalHeight=n,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,Q(this.canvas,M({width:i.width,height:i.height},yt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var a=this.canvasData,i=this.imageData,s=i.naturalWidth*(a.width/a.naturalWidth),r=i.naturalHeight*(a.height/a.naturalHeight);M(i,{width:s,height:r,left:(a.width-s)/2,top:(a.height-r)/2}),Q(this.image,M({width:i.width,height:i.height},yt(M({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,a=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,s=Number(t.autoCropArea)||.8,r={width:a.width,height:a.height};i&&(a.height*i>a.width?r.height=r.width/i:r.width=r.height*i),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*s),r.height=Math.max(r.minHeight,r.height*s),r.left=a.left+(a.width-r.width)/2,r.top=a.top+(a.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=M({},r)},limitCropBox:function(t,a){var i=this.options,s=this.containerData,r=this.canvasData,o=this.cropBoxData,n=this.limited,u=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,h=Number(i.minCropBoxHeight)||0,d=n?Math.min(s.width,r.width,r.width+r.left,s.width-r.left):s.width,c=n?Math.min(s.height,r.height,r.height+r.top,s.height-r.top):s.height;l=Math.min(l,s.width),h=Math.min(h,s.height),u&&(l&&h?h*u>l?h=l/u:l=h*u:l?h=l/u:h&&(l=h*u),c*u>d?c=d/u:d=c*u),o.minWidth=Math.min(l,d),o.minHeight=Math.min(h,c),o.maxWidth=d,o.maxHeight=c}a&&(n?(o.minLeft=Math.max(0,r.left),o.minTop=Math.max(0,r.top),o.maxLeft=Math.min(s.width,r.left+r.width)-o.width,o.maxTop=Math.min(s.height,r.top+r.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=s.width-o.width,o.maxTop=s.height-o.height))},renderCropBox:function(){var t=this.options,a=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Et(this.face,Dt,i.width>=a.width&&i.height>=a.height?Te:qt),Q(this.cropBox,M({width:i.width,height:i.height},yt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),ct(this.element,zt,this.getData())}},ra={initPreview:function(){var t=this.element,a=this.crossOrigin,i=this.options.preview,s=a?this.crossOriginUrl:this.url,r=t.alt||"The image to preview",o=document.createElement("img");if(a&&(o.crossOrigin=a),o.src=s,o.alt=r,this.viewBox.appendChild(o),this.viewBoxImage=o,!!i){var n=i;typeof i=="string"?n=t.ownerDocument.querySelectorAll(i):i.querySelector&&(n=[i]),this.previews=n,x(n,function(u){var l=document.createElement("img");Et(u,Mt,{width:u.offsetWidth,height:u.offsetHeight,html:u.innerHTML}),a&&(l.crossOrigin=a),l.src=s,l.alt=r,l.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',u.innerHTML="",u.appendChild(l)})}},resetPreview:function(){x(this.previews,function(t){var a=jt(t,Mt);Q(t,{width:a.width,height:a.height}),t.innerHTML=a.html,Wi(t,Mt)})},preview:function(){var t=this.imageData,a=this.canvasData,i=this.cropBoxData,s=i.width,r=i.height,o=t.width,n=t.height,u=i.left-a.left-t.left,l=i.top-a.top-t.top;!this.cropped||this.disabled||(Q(this.viewBoxImage,M({width:o,height:n},yt(M({translateX:-u,translateY:-l},t)))),x(this.previews,function(h){var d=jt(h,Mt),c=d.width,g=d.height,w=c,E=g,y=1;s&&(y=c/s,E=r*y),r&&E>g&&(y=g/r,w=s*y,E=g),Q(h,{width:w,height:E}),Q(h.getElementsByTagName("img")[0],M({width:o*y,height:n*y},yt(M({translateX:-u*y,translateY:-l*y},t))))}))}},oa={bind:function(){var t=this.element,a=this.options,i=this.cropper;I(a.cropstart)&&z(t,Xt,a.cropstart),I(a.cropmove)&&z(t,Ht,a.cropmove),I(a.cropend)&&z(t,Yt,a.cropend),I(a.crop)&&z(t,zt,a.crop),I(a.zoom)&&z(t,Wt,a.zoom),z(i,le,this.onCropStart=this.cropStart.bind(this)),a.zoomable&&a.zoomOnWheel&&z(i,me,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&z(i,ne,this.onDblclick=this.dblclick.bind(this)),z(t.ownerDocument,he,this.onCropMove=this.cropMove.bind(this)),z(t.ownerDocument,de,this.onCropEnd=this.cropEnd.bind(this)),a.responsive&&z(window,ce,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,a=this.options,i=this.cropper;I(a.cropstart)&&H(t,Xt,a.cropstart),I(a.cropmove)&&H(t,Ht,a.cropmove),I(a.cropend)&&H(t,Yt,a.cropend),I(a.crop)&&H(t,zt,a.crop),I(a.zoom)&&H(t,Wt,a.zoom),H(i,le,this.onCropStart),a.zoomable&&a.zoomOnWheel&&H(i,me,this.onWheel,{passive:!1,capture:!0}),a.toggleDragModeOnDblclick&&H(i,ne,this.onDblclick),H(t.ownerDocument,he,this.onCropMove),H(t.ownerDocument,de,this.onCropEnd),a.responsive&&H(window,ce,this.onResize)}},sa={resize:function(){if(!this.disabled){var t=this.options,a=this.container,i=this.containerData,s=a.offsetWidth/i.width,r=a.offsetHeight/i.height,o=Math.abs(s-1)>Math.abs(r-1)?s:r;if(o!==1){var n,u;t.restore&&(n=this.getCanvasData(),u=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(x(n,function(l,h){n[h]=l*o})),this.setCropBoxData(x(u,function(l,h){u[h]=l*o})))}}},dblclick:function(){this.disabled||this.options.dragMode===Ne||this.setDragMode(Hi(this.dragBox,Bt)?Ae:Kt)},wheel:function(t){var a=this,i=Number(this.options.wheelZoomRatio)||.1,s=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){a.wheeling=!1},50),t.deltaY?s=t.deltaY>0?1:-1:t.wheelDelta?s=-t.wheelDelta/120:t.detail&&(s=t.detail>0?1:-1),this.zoom(-s*i,t)))},cropStart:function(t){var a=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(v(a)&&a!==1||v(i)&&i!==0||t.ctrlKey))){var s=this.options,r=this.pointers,o;t.changedTouches?x(t.changedTouches,function(n){r[n.identifier]=At(n)}):r[t.pointerId||0]=At(t),Object.keys(r).length>1&&s.zoomable&&s.zoomOnTouch?o=Me:o=jt(t.target,Dt),ki.test(o)&&ct(this.element,Xt,{originalEvent:t,action:o})!==!1&&(t.preventDefault(),this.action=o,this.cropping=!1,o===Ee&&(this.cropping=!0,$(this.dragBox,Ct)))}},cropMove:function(t){var a=this.action;if(!(this.disabled||!a)){var i=this.pointers;t.preventDefault(),ct(this.element,Ht,{originalEvent:t,action:a})!==!1&&(t.changedTouches?x(t.changedTouches,function(s){M(i[s.identifier]||{},At(s,!0))}):M(i[t.pointerId||0]||{},At(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var a=this.action,i=this.pointers;t.changedTouches?x(t.changedTouches,function(s){delete i[s.identifier]}):delete i[t.pointerId||0],a&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,dt(this.dragBox,Ct,this.cropped&&this.options.modal)),ct(this.element,Yt,{originalEvent:t,action:a}))}}},na={change:function(t){var a=this.options,i=this.canvasData,s=this.containerData,r=this.cropBoxData,o=this.pointers,n=this.action,u=a.aspectRatio,l=r.left,h=r.top,d=r.width,c=r.height,g=l+d,w=h+c,E=0,y=0,C=s.width,S=s.height,N=!0,F;!u&&t.shiftKey&&(u=d&&c?d/c:1),this.limited&&(E=r.minLeft,y=r.minTop,C=E+Math.min(s.width,i.width,i.left+i.width),S=y+Math.min(s.height,i.height,i.top+i.height));var B=o[Object.keys(o)[0]],m={x:B.endX-B.startX,y:B.endY-B.startY},_=function(L){switch(L){case rt:g+m.x>C&&(m.x=C-g);break;case ot:l+m.x<E&&(m.x=E-l);break;case J:h+m.y<y&&(m.y=y-h);break;case lt:w+m.y>S&&(m.y=S-w);break}};switch(n){case qt:l+=m.x,h+=m.y;break;case rt:if(m.x>=0&&(g>=C||u&&(h<=y||w>=S))){N=!1;break}_(rt),d+=m.x,d<0&&(n=ot,d=-d,l-=d),u&&(c=d/u,h+=(r.height-c)/2);break;case J:if(m.y<=0&&(h<=y||u&&(l<=E||g>=C))){N=!1;break}_(J),c-=m.y,h+=m.y,c<0&&(n=lt,c=-c,h-=c),u&&(d=c*u,l+=(r.width-d)/2);break;case ot:if(m.x<=0&&(l<=E||u&&(h<=y||w>=S))){N=!1;break}_(ot),d-=m.x,l+=m.x,d<0&&(n=rt,d=-d,l-=d),u&&(c=d/u,h+=(r.height-c)/2);break;case lt:if(m.y>=0&&(w>=S||u&&(l<=E||g>=C))){N=!1;break}_(lt),c+=m.y,c<0&&(n=J,c=-c,h-=c),u&&(d=c*u,l+=(r.width-d)/2);break;case ft:if(u){if(m.y<=0&&(h<=y||g>=C)){N=!1;break}_(J),c-=m.y,h+=m.y,d=c*u}else _(J),_(rt),m.x>=0?g<C?d+=m.x:m.y<=0&&h<=y&&(N=!1):d+=m.x,m.y<=0?h>y&&(c-=m.y,h+=m.y):(c-=m.y,h+=m.y);d<0&&c<0?(n=bt,c=-c,d=-d,h-=c,l-=d):d<0?(n=gt,d=-d,l-=d):c<0&&(n=vt,c=-c,h-=c);break;case gt:if(u){if(m.y<=0&&(h<=y||l<=E)){N=!1;break}_(J),c-=m.y,h+=m.y,d=c*u,l+=r.width-d}else _(J),_(ot),m.x<=0?l>E?(d-=m.x,l+=m.x):m.y<=0&&h<=y&&(N=!1):(d-=m.x,l+=m.x),m.y<=0?h>y&&(c-=m.y,h+=m.y):(c-=m.y,h+=m.y);d<0&&c<0?(n=vt,c=-c,d=-d,h-=c,l-=d):d<0?(n=ft,d=-d,l-=d):c<0&&(n=bt,c=-c,h-=c);break;case bt:if(u){if(m.x<=0&&(l<=E||w>=S)){N=!1;break}_(ot),d-=m.x,l+=m.x,c=d/u}else _(lt),_(ot),m.x<=0?l>E?(d-=m.x,l+=m.x):m.y>=0&&w>=S&&(N=!1):(d-=m.x,l+=m.x),m.y>=0?w<S&&(c+=m.y):c+=m.y;d<0&&c<0?(n=ft,c=-c,d=-d,h-=c,l-=d):d<0?(n=vt,d=-d,l-=d):c<0&&(n=gt,c=-c,h-=c);break;case vt:if(u){if(m.x>=0&&(g>=C||w>=S)){N=!1;break}_(rt),d+=m.x,c=d/u}else _(lt),_(rt),m.x>=0?g<C?d+=m.x:m.y>=0&&w>=S&&(N=!1):d+=m.x,m.y>=0?w<S&&(c+=m.y):c+=m.y;d<0&&c<0?(n=gt,c=-c,d=-d,h-=c,l-=d):d<0?(n=bt,d=-d,l-=d):c<0&&(n=ft,c=-c,h-=c);break;case Te:this.move(m.x,m.y),N=!1;break;case Me:this.zoom(Gi(o),t),N=!1;break;case Ee:if(!m.x||!m.y){N=!1;break}F=ke(this.cropper),l=B.startX-F.left,h=B.startY-F.top,d=r.minWidth,c=r.minHeight,m.x>0?n=m.y>0?vt:ft:m.x<0&&(l-=d,n=m.y>0?bt:gt),m.y<0&&(h-=c),this.cropped||(W(this.cropBox,R),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}N&&(r.width=d,r.height=c,r.left=l,r.top=h,this.action=n,this.renderCropBox()),x(o,function(O){O.startX=O.endX,O.startY=O.endY})}},la={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&$(this.dragBox,Ct),W(this.cropBox,R),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=M({},this.initialImageData),this.canvasData=M({},this.initialCanvasData),this.cropBoxData=M({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(M(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),W(this.dragBox,Ct),$(this.cropBox,R)),this},replace:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),a?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,x(this.previews,function(i){i.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,W(this.cropper,oe)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,$(this.cropper,oe)),this},destroy:function(){var t=this.element;return t[T]?(t[T]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,s=i.left,r=i.top;return this.moveTo(kt(t)?t:s+Number(t),kt(a)?a:r+Number(a))},moveTo:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,s=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.movable&&(v(t)&&(i.left=t,s=!0),v(a)&&(i.top=a,s=!0),s&&this.renderCanvas(!0)),this},zoom:function(t,a){var i=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(i.width*t/i.naturalWidth,null,a)},zoomTo:function(t,a,i){var s=this.options,r=this.canvasData,o=r.width,n=r.height,u=r.naturalWidth,l=r.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&s.zoomable){var h=u*t,d=l*t;if(ct(this.element,Wt,{ratio:t,oldRatio:o/u,originalEvent:i})===!1)return this;if(i){var c=this.pointers,g=ke(this.cropper),w=c&&Object.keys(c).length?Fi(c):{pageX:i.pageX,pageY:i.pageY};r.left-=(h-o)*((w.pageX-g.left-r.left)/o),r.top-=(d-n)*((w.pageY-g.top-r.top)/n)}else ht(a)&&v(a.x)&&v(a.y)?(r.left-=(h-o)*((a.x-r.left)/o),r.top-=(d-n)*((a.y-r.top)/n)):(r.left-=(h-o)/2,r.top-=(d-n)/2);r.width=h,r.height=d,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),v(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var a=this.imageData.scaleY;return this.scale(t,v(a)?a:1)},scaleY:function(t){var a=this.imageData.scaleX;return this.scale(v(a)?a:1,t)},scale:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,s=!1;return t=Number(t),a=Number(a),this.ready&&!this.disabled&&this.options.scalable&&(v(t)&&(i.scaleX=t,s=!0),v(a)&&(i.scaleY=a,s=!0),s&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=this.options,i=this.imageData,s=this.canvasData,r=this.cropBoxData,o;if(this.ready&&this.cropped){o={x:r.left-s.left,y:r.top-s.top,width:r.width,height:r.height};var n=i.width/i.naturalWidth;if(x(o,function(h,d){o[d]=h/n}),t){var u=Math.round(o.y+o.height),l=Math.round(o.x+o.width);o.x=Math.round(o.x),o.y=Math.round(o.y),o.width=l-o.x,o.height=u-o.y}}else o={x:0,y:0,width:0,height:0};return a.rotatable&&(o.rotate=i.rotate||0),a.scalable&&(o.scaleX=i.scaleX||1,o.scaleY=i.scaleY||1),o},setData:function(t){var a=this.options,i=this.imageData,s=this.canvasData,r={};if(this.ready&&!this.disabled&&ht(t)){var o=!1;a.rotatable&&v(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),a.scalable&&(v(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),v(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var n=i.width/i.naturalWidth;v(t.x)&&(r.left=t.x*n+s.left),v(t.y)&&(r.top=t.y*n+s.top),v(t.width)&&(r.width=t.width*n),v(t.height)&&(r.height=t.height*n),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?M({},this.containerData):{}},getImageData:function(){return this.sized?M({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,a={};return this.ready&&x(["left","top","width","height","naturalWidth","naturalHeight"],function(i){a[i]=t[i]}),a},setCanvasData:function(t){var a=this.canvasData,i=a.aspectRatio;return this.ready&&!this.disabled&&ht(t)&&(v(t.left)&&(a.left=t.left),v(t.top)&&(a.top=t.top),v(t.width)?(a.width=t.width,a.height=t.width/i):v(t.height)&&(a.height=t.height,a.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,a;return this.ready&&this.cropped&&(a={left:t.left,top:t.top,width:t.width,height:t.height}),a||{}},setCropBoxData:function(t){var a=this.cropBoxData,i=this.options.aspectRatio,s,r;return this.ready&&this.cropped&&!this.disabled&&ht(t)&&(v(t.left)&&(a.left=t.left),v(t.top)&&(a.top=t.top),v(t.width)&&t.width!==a.width&&(s=!0,a.width=t.width),v(t.height)&&t.height!==a.height&&(r=!0,a.height=t.height),i&&(s?a.height=a.width/i:r&&(a.width=a.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var a=this.canvasData,i=Ki(this.image,this.imageData,a,t);if(!this.cropped)return i;var s=this.getData(t.rounded),r=s.x,o=s.y,n=s.width,u=s.height,l=i.width/Math.floor(a.naturalWidth);l!==1&&(r*=l,o*=l,n*=l,u*=l);var h=n/u,d=Z({aspectRatio:h,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),c=Z({aspectRatio:h,width:t.minWidth||0,height:t.minHeight||0},"cover"),g=Z({aspectRatio:h,width:t.width||(l!==1?i.width:n),height:t.height||(l!==1?i.height:u)}),w=g.width,E=g.height;w=Math.min(d.width,Math.max(c.width,w)),E=Math.min(d.height,Math.max(c.height,E));var y=document.createElement("canvas"),C=y.getContext("2d");y.width=ut(w),y.height=ut(E),C.fillStyle=t.fillColor||"transparent",C.fillRect(0,0,w,E);var S=t.imageSmoothingEnabled,N=S===void 0?!0:S,F=t.imageSmoothingQuality;C.imageSmoothingEnabled=N,F&&(C.imageSmoothingQuality=F);var B=i.width,m=i.height,_=r,O=o,L,q,et,it,K,X;_<=-n||_>B?(_=0,L=0,et=0,K=0):_<=0?(et=-_,_=0,L=Math.min(B,n+_),K=L):_<=B&&(et=0,L=Math.min(n,B-_),K=L),L<=0||O<=-u||O>m?(O=0,q=0,it=0,X=0):O<=0?(it=-O,O=0,q=Math.min(m,u+O),X=q):O<=m&&(it=0,q=Math.min(u,m-O),X=q);var P=[_,O,L,q];if(K>0&&X>0){var at=w/n;P.push(et*at,it*at,K*at,X*at)}return C.drawImage.apply(C,[i].concat(De(P.map(function(Tt){return Math.floor(ut(Tt))})))),y},setAspectRatio:function(t){var a=this.options;return!this.disabled&&!kt(t)&&(a.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var a=this.options,i=this.dragBox,s=this.face;if(this.ready&&!this.disabled){var r=t===Kt,o=a.movable&&t===Ae;t=r||o?t:Ne,a.dragMode=t,Et(i,Dt,t),dt(i,Bt,r),dt(i,Lt,o),a.cropBoxMovable||(Et(s,Dt,t),dt(s,Bt,r),dt(s,Lt,o))}return this}},ha=G.Cropper,Pe=function(){function e(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Di(this,e),!t||!Ii.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=M({},fe,ht(a)&&a),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ei(e,[{key:"init",value:function(){var a=this.element,i=a.tagName.toLowerCase(),s;if(!a[T]){if(a[T]=this,i==="img"){if(this.isImg=!0,s=a.getAttribute("src")||"",this.originalUrl=s,!s)return;s=a.src}else i==="canvas"&&window.HTMLCanvasElement&&(s=a.toDataURL());this.load(s)}}},{key:"load",value:function(a){var i=this;if(a){this.url=a,this.imageData={};var s=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Vi.test(a)){Pi.test(a)?this.read(Zi(a)):this.clone();return}var o=new XMLHttpRequest,n=this.clone.bind(this);this.reloading=!0,this.xhr=o,o.onabort=n,o.onerror=n,o.ontimeout=n,o.onprogress=function(){o.getResponseHeader("content-type")!==pe&&o.abort()},o.onload=function(){i.read(o.response)},o.onloadend=function(){i.reloading=!1,i.xhr=null},r.checkCrossOrigin&&ve(a)&&s.crossOrigin&&(a=be(a)),o.open("GET",a,!0),o.responseType="arraybuffer",o.withCredentials=s.crossOrigin==="use-credentials",o.send()}}},{key:"read",value:function(a){var i=this.options,s=this.imageData,r=ea(a),o=0,n=1,u=1;if(r>1){this.url=ta(a,pe);var l=ia(r);o=l.rotate,n=l.scaleX,u=l.scaleY}i.rotatable&&(s.rotate=o),i.scalable&&(s.scaleX=n,s.scaleY=u),this.clone()}},{key:"clone",value:function(){var a=this.element,i=this.url,s=a.crossOrigin,r=i;this.options.checkCrossOrigin&&ve(i)&&(s||(s="anonymous"),r=be(i)),this.crossOrigin=s,this.crossOriginUrl=r;var o=document.createElement("img");s&&(o.crossOrigin=s),o.src=r||i,o.alt=a.alt||"The image to crop",this.image=o,o.onload=this.start.bind(this),o.onerror=this.stop.bind(this),$(o,se),a.parentNode.insertBefore(o,a.nextSibling)}},{key:"start",value:function(){var a=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var s=G.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(G.navigator.userAgent),r=function(l,h){M(a.imageData,{naturalWidth:l,naturalHeight:h,aspectRatio:l/h}),a.initialImageData=M({},a.imageData),a.sizing=!1,a.sized=!0,a.build()};if(i.naturalWidth&&!s){r(i.naturalWidth,i.naturalHeight);return}var o=document.createElement("img"),n=document.body||document.documentElement;this.sizingImage=o,o.onload=function(){r(o.width,o.height),s||n.removeChild(o)},o.src=i.src,s||(o.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",n.appendChild(o))}},{key:"stop",value:function(){var a=this.image;a.onload=null,a.onerror=null,a.parentNode.removeChild(a),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var a=this.element,i=this.options,s=this.image,r=a.parentNode,o=document.createElement("div");o.innerHTML=Ri;var n=o.querySelector(".".concat(T,"-container")),u=n.querySelector(".".concat(T,"-canvas")),l=n.querySelector(".".concat(T,"-drag-box")),h=n.querySelector(".".concat(T,"-crop-box")),d=h.querySelector(".".concat(T,"-face"));this.container=r,this.cropper=n,this.canvas=u,this.dragBox=l,this.cropBox=h,this.viewBox=n.querySelector(".".concat(T,"-view-box")),this.face=d,u.appendChild(s),$(a,R),r.insertBefore(n,a.nextSibling),W(s,se),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,$(h,R),i.guides||$(h.getElementsByClassName("".concat(T,"-dashed")),R),i.center||$(h.getElementsByClassName("".concat(T,"-center")),R),i.background&&$(n,"".concat(T,"-bg")),i.highlight||$(d,Ci),i.cropBoxMovable&&($(d,Lt),Et(d,Dt,qt)),i.cropBoxResizable||($(h.getElementsByClassName("".concat(T,"-line")),R),$(h.getElementsByClassName("".concat(T,"-point")),R)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),I(i.ready)&&z(a,ue,i.ready,{once:!0}),ct(a,ue)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var a=this.cropper.parentNode;a&&a.removeChild(this.cropper),W(this.element,R)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ha,e}},{key:"setDefaults",value:function(a){M(fe,ht(a)&&a)}}])}();M(Pe.prototype,aa,ra,oa,sa,na,la);var da={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};const ua={name:"CustomImage",props:{modelValue:{type:Array,default:()=>[]}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},imagePath(){return da.STATIC_ASSETS_PATH}},data(){return{cropper:void 0}},emits:["cropped","update:modelValue"],methods:{crop(){const e=this.cropper.getCroppedCanvas({width:1024,height:1024});this.model[0].base64=e.toDataURL("image/jpeg"),this.cropper=void 0,document.querySelector(".cropper-container").remove(),this.$emit("cropped")},setToCrop(){const e=this;setTimeout(()=>{const t=e.$refs.image,a=new Pe(t,{ready(){const i=this.cropper.getContainerData(),s=this.cropper.getCropBoxData(),r=Math.min(s.height,s.width);this.cropper.setCropBoxData({left:(i.width-r)/2,width:r})},cropmove(){const i=this.cropper.getCropBoxData();this.cropper.setCropBoxData({width:i.height})}});e.cropper=a},100)}}},ca={class:"crop-image"},ma={id:"image-crop-container",style:{width:"100%","max-width":"440px","min-width":"60px"}},pa=["src"];function fa(e,t,a,i,s,r){const o=qe;return k(),_t("div",ca,[s.cropper?st("",!0):(k(),Y(o,{key:0,modelValue:r.model,"onUpdate:modelValue":[t[0]||(t[0]=n=>r.model=n),r.setToCrop],mode:"edit",path:"images",accept:"image/png, image/gif, image/jpeg"},null,8,["modelValue","onUpdate:modelValue"])),Pt(A("div",ma,[r.model&&r.model.length?(k(),_t("img",{key:0,ref:"image",class:"image-crop",src:r.model[0].base64||r.imagePath+r.model[0].path},null,8,pa)):st("",!0)],512),[[It,s.cropper]]),Pt(p(xt,{onClick:r.crop,color:"grey-lighten-2",class:"mt-2"},{default:f(()=>[V(D(e.$t("Save")),1)]),_:1},8,["onClick"]),[[It,s.cropper]])])}const ga=tt(ua,[["render",fa]]),va={name:"UserImageBlock",props:{modelValue:{type:Object,default:()=>({})}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{async saveImage(){const e=this.model.image[0],t=e.path.replace(/^.*?\/([^\/]+)$/,"$1"),a=e.path.replace(/^\/(.*?)\/[^\/]+$/,"$1"),i=e.base64,s=Ye(t,i);await this.$api.files.replace({files:[s],path:a})}}},ba={class:"text-h5 mb-2 offset-md1 black--text"};function wa(e,t,a,i,s,r){const o=ga;return k(),Y(pt,{class:"data-block user-image bg-grey-lighten-3",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",ba,[j(e.$slots,"itemset-header",{},()=>[V(D(e.$t("Picture")),1)])]),A("div",null,[j(e.$slots,"itemset-description",{},()=>[V(D(e.$t("Add the person image")),1)])])]),_:3}),p(b,{cols:"12",md:"9",class:"pr-md-16 pt-4"},{default:f(()=>[p(U,{class:"pt-0 pb-0"},{default:f(()=>[p(b,{class:"pb-4",cols:"12"},{default:f(()=>[A("div",null,D(e.$t("Please upload the JPG or PNG files if possible")),1)]),_:1}),p(b,{class:"pb-0",cols:"12"},{default:f(()=>[p(o,{modelValue:r.model.image,"onUpdate:modelValue":t[0]||(t[0]=n=>r.model.image=n),onCropped:r.saveImage},null,8,["modelValue","onCropped"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})}const ya=tt(va,[["render",wa]]),_a={name:"UserBasic",props:{modelValue:{type:Object,default:()=>({})}},$_localize:["model"],computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},statuses(){return statuses}},methods:{updateName(e,t){typeof t=="string"&&(this.model[e]=this.$_translit(t))}}},Da={class:"text-h5 mb-2 offset-md1 black--text"};function Ea(e,t,a,i,s,r){const o=He,n=Je,u=Ke;return k(),Y(pt,{class:"data-block user-basic pt-sm-4 pb-sm-4 pt-md-16",rounded:"0"},{default:f(()=>[p(mt,null,{default:f(()=>[p(U,{class:"mb-4 mt-4"},{default:f(()=>[p(b,{cols:"12",md:"3",class:"pl-md-16"},{default:f(()=>[A("div",Da,[j(e.$slots,"personal-header",{},()=>[V(D(e.$t("Personal data")),1)])]),A("div",null,[j(e.$slots,"personal-description",{},()=>[V(D(e.$t("Fill your personal data")),1)])])]),_:3}),p(b,{cols:"12",md:"9",class:"pr-md-16 pt-0"},{default:f(()=>[Pt(p(U,null,{default:f(()=>[p(b,{cols:"12",class:"mt-1 mb-2"},{default:f(()=>[A("div",null,D(e.$t("Please input your name in Ukrainian and check the proper transliteration below")),1)]),_:1}),p(b,{cols:"12",lg:"4"},{default:f(()=>[p(wt,{modelValue:e.$l_model.familyName,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.$l_model.familyName=l),t[1]||(t[1]=l=>r.updateName("familyName",l))],label:e.$t("Family name (ua)"),placeholder:e.$i18n.locale==="en"?"":r.model.name,hint:e.$i18n.locale==="en"?e.$t("Translate this field by switching languages"):"",id:"familyNameUk",name:"familyNameUk",variant:"underlined"},null,8,["modelValue","label","placeholder","hint"])]),_:1}),p(b,{cols:"12",lg:"4"},{default:f(()=>[p(wt,{modelValue:e.$l_model.givenName,"onUpdate:modelValue":[t[2]||(t[2]=l=>e.$l_model.givenName=l),t[3]||(t[3]=l=>r.updateName("givenName",l))],label:e.$t("Given name (ua)"),id:"givenNameUk",name:"givenNameUk",variant:"underlined"},null,8,["modelValue","label"])]),_:1}),p(b,{cols:"12",lg:"4"},{default:f(()=>[p(wt,{modelValue:e.$l_model.additionalName,"onUpdate:modelValue":[t[4]||(t[4]=l=>e.$l_model.additionalName=l),t[5]||(t[5]=l=>r.updateName("additionalName",l))],label:e.$t("Adittional name (ua)"),id:"additionalNameUk",name:"additionalNameUk",variant:"underlined"},null,8,["modelValue","label"])]),_:1})]),_:1},512),[[It,e.$i18n.locale==="uk"]]),p(U,null,{default:f(()=>[p(b,{cols:"12"},{default:f(()=>[A("div",null,D(e.$t("Please change this if the data in the international passport is different from the official transliteration")),1)]),_:1}),p(b,{cols:"12",lg:"4"},{default:f(()=>[p(o,{modelValue:r.model.familyName,"onUpdate:modelValue":t[6]||(t[6]=l=>r.model.familyName=l),label:e.$t("Family name"),variant:"underlined",id:"familyName",name:"familyName"},null,8,["modelValue","label"])]),_:1}),p(b,{cols:"12",lg:"4"},{default:f(()=>[p(o,{modelValue:r.model.givenName,"onUpdate:modelValue":t[7]||(t[7]=l=>r.model.givenName=l),label:e.$t("Given name"),name:"givenName",variant:"underlined",id:"givenName"},null,8,["modelValue","label"])]),_:1}),p(b,{cols:"6"},{default:f(()=>[p(n,{modelValue:r.model.gender,"onUpdate:modelValue":t[8]||(t[8]=l=>r.model.gender=l)},null,8,["modelValue"])]),_:1}),p(b,{cols:"6"},{default:f(()=>[p(u,{modelValue:r.model.birthday,"onUpdate:modelValue":t[9]||(t[9]=l=>r.model.birthday=l),max:new Date,label:e.$t("Birthday")},null,8,["modelValue","max","label"])]),_:1})]),_:1})]),_:1})]),_:3})]),_:3})]),_:3})}const Ta=tt(_a,[["render",Ea]]);var Ma={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};const Nt={person:{phone:[],email:[],website:[],translation:{[Ma.LANGUAGE]:{}}},organization:{},responsibleOrganization:[],image:[],role:[]},Ie={name:"User",data:()=>({user:JSON.parse(JSON.stringify(Nt))}),inject:["$error"],created(){this.appStore.breadcrumb=this.title||"New user",this.init()},computed:{title(){var e,t,a,i,s,r,o;if((e=this.$route.params)!=null&&e._id&&this.$route.params._id!=="new")return this.appStore.breadcrumb=((t=this.$_translate(this.user).person)==null?void 0:t.fullName)||((i=(a=this.user)==null?void 0:a.email)==null?void 0:i.replace(/@/,"＠")),((s=this.$_translate(this.user).person)==null?void 0:s.fullName)||((o=(r=this.user)==null?void 0:r.email)==null?void 0:o.replace(/@/,"＠"))},isAdmin(){var e,t,a;return(a=(t=(e=this.appStore)==null?void 0:e.user)==null?void 0:t.role)==null?void 0:a.includes("Admin")}},methods:{async init(){let{_id:e}=this.$route.params;if(e==="me")return this.loadCurrentUser();if(!e||e==="new")return this.appStore.loading=!1,!1;this.loadData(e)},async loadCurrentUser(){var a,i,s,r,o,n,u,l;if((i=(a=this.appStore)==null?void 0:a.user)!=null&&i.id)return this.loadData(this.appStore.user.id);const{users:e}=this.$storage,t=(r=(s=this.appStore)==null?void 0:s.user)==null?void 0:r.email;if(!t)return this.user=Nt,this.appStore.loading=!1,!0;try{const h=await e.filter({email:t}).find();if(!h)throw"Not found";this.user=Object.assign({},Nt,h.items[0]),Object.defineProperty(this.user,"save",{value:h.items[0].save,enumerable:!1})}catch{return await this.$error({title:"User is not found"}),this.$router.go(-1)}(u=(n=(o=this.user)==null?void 0:o.person)==null?void 0:n.email)!=null&&u.length||(this.user.person||(this.user.person={}),(l=this.user.person.email)!=null&&l.length||(this.user.person.email=[this.user.email])),this.appStore.loading=!1},async loadData(e){const{users:t}=this.$storage;try{const a=await t[e];if(a.person||(a.person=JSON.parse(JSON.stringify(Nt.person)),a.person.email.push(a.email)),!a)throw"Not found";this.user=a}catch{return await this.$error({title:"User is not found"}),this.$router.go(-1)}this.appStore.loading=!1}}},Aa={class:"report pa-2"},Na={class:"text-h4 font-weight-bold"};function xa(e,t,a,i,s,r){const o=Ta,n=ya,u=Fe,l=yi,h=gi,d=li,c=ii;return k(),_t("div",Aa,[p(U,{class:"mb-0 mt-0"},{default:f(()=>[p(b,{cols:"12",md:"12",class:"mb-0 mt-0 pb-4 pt-0 pl-md-8 pr-md-8"},{default:f(()=>[A("div",Na,D(r.title||e.$t("New user")),1)]),_:1})]),_:1}),p(U,{class:"mb-0 mt-0"},{default:f(()=>[p(b,{cols:"12",md:"12",class:"mb-0 mt-0 pb-0 pt-0 pl-md-8 pr-md-8"},{default:f(()=>[p(o,{modelValue:e.user.person,"onUpdate:modelValue":t[0]||(t[0]=g=>e.user.person=g)},null,8,["modelValue"]),p(n,{modelValue:e.user,"onUpdate:modelValue":t[1]||(t[1]=g=>e.user=g)},null,8,["modelValue"]),p(u,{modelValue:e.user.person,"onUpdate:modelValue":t[2]||(t[2]=g=>e.user.person=g),tagEntity:"users"},null,8,["modelValue"]),p(l,{modelValue:e.user,"onUpdate:modelValue":t[3]||(t[3]=g=>e.user=g)},null,8,["modelValue"]),r.isAdmin?(k(),Y(h,{key:0,modelValue:e.user,"onUpdate:modelValue":t[4]||(t[4]=g=>e.user=g)},null,8,["modelValue"])):st("",!0),r.isAdmin?(k(),Y(d,{key:1,modelValue:e.user,"onUpdate:modelValue":t[5]||(t[5]=g=>e.user=g)},null,8,["modelValue"])):st("",!0),p(c,{modelValue:e.user,"onUpdate:modelValue":t[6]||(t[6]=g=>e.user=g),"back-button":"/users",table:"users"},null,8,["modelValue"])]),_:1})]),_:1})])}typeof ie=="function"&&ie(Ie);const cr=tt(Ie,[["render",xa]]);export{cr as default};
