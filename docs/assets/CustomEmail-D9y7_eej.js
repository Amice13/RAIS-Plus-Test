import{_ as w,ak as g,F as o,o as i,z as m,B as n,x as t,a as c,w as h,C as f,y as u,G as p,H as y,c as E,E as z,ac as B}from"./index-BtIo2-Z_.js";import{V as _}from"./index-SDX8Otz2.js";import{V as C}from"./VTextField-Bn35T3UG.js";import{V as b}from"./VBtn--bGuKZaN.js";const A=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,N=function(){return[e=>A.test(e)||this.$t("This is an invalid email")]},T=()=>({mask:"A",tokens:{A:{pattern:/[A-z\d_.~/@?&=#%+[\]!\$\(\)\*,;-]/,multiple:!0}}}),S={name:"CustomEmail",props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},mode:{type:String,default:"view"},showEmpty:{type:Boolean,default:!1},narrow:{type:Boolean,default:!1}},computed:{options:T,validationRules:N,model:{get(){return this.modelValue},async set(e){console.log(e),this.$emit("update:modelValue",e),await this.nextTick()}}},mounted(){!this.multiple&&!this.modelValue.length&&this.model.push("")},data(){return{key:0}},methods:{addEmail(e){if(document.activeElement.tagName==="I")return this.removeEmail(e);this.model.push(""),this.key++,this.$nextTick(()=>{let l=this.$refs.emails.querySelectorAll("input");l[l.length-1].focus()})},removeEmail(e){this.model.splice(e,1),this.key++}}},D={class:"email mt-2"},F={class:"d-flex"},I={class:"mr-2"},K=["href"];function x(e,l,s,R,k,a){const V=g("maska");return i(),o("div",D,[m(t("div",null,[t("div",F,[t("div",I,[c(_,{left:""},{default:h(()=>l[0]||(l[0]=[f("mdi-email")])),_:1})]),t("div",null,[m(t("div",{class:"mb-4"},u(e.$t("No emails are added.")),513),[[n,a.model.length===0]]),(i(!0),o(p,null,y(a.model,r=>(i(),o("div",{key:r,class:"mb-2"},[t("a",{href:"mailto:"+r},u(r),9,K)]))),128))])])],512),[[n,s.mode==="view"&&(a.model.length>0||s.showEmpty)]]),m((i(),o("div",{ref:"emails",key:k.key},[m(t("div",{class:"mb-4"},u(e.$t("You have not added any email yet.")),513),[[n,a.model.length===0]]),(i(!0),o(p,null,y(a.model,(r,d)=>m((i(),E(C,{modelValue:a.model[d],"onUpdate:modelValue":v=>a.model[d]=v,key:`email-${d}`,name:`email-${d}`,label:e.$t("Email"),rules:a.validationRules,"append-icon":a.model.length>1?"mdi-delete":"","onClick:append":a.removeEmail,onKeydown:z(v=>a.addEmail(d),["enter"]),placeholder:"my-email@unhcr.org","validate-on":"blur",variant:"underlined"},null,8,["modelValue","onUpdate:modelValue","name","label","rules","append-icon","onClick:append","onKeydown"])),[[V,void 0,a.options]])),128)),m(c(b,{onClick:a.addEmail,class:B([{"mb-4":s.narrow},"mt-4"]),small:s.narrow},{default:h(()=>[c(_,{left:""},{default:h(()=>l[1]||(l[1]=[f("mdi-plus")])),_:1}),f(" "+u(e.$t("Add email")),1)]),_:1},8,["onClick","class","small"]),[[n,s.multiple]])])),[[n,s.mode==="edit"]])])}const L=w(S,[["render",x]]);export{L as _};
