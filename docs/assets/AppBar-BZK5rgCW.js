import{p as F,r as D,s as A,b as i,d as Y,e as I,f as q,g as x,m as K,h as G,u as W,i as j,j as J,k as Q,t as w,l as X,a as s,n as Z,q as ee,_ as te,v as ae,c as k,w as o,o as L,x as B,y as M,z as E,A as S,B as le,C as V}from"./index-BYWsBYtF.js";import{m as oe,V as $}from"./VToolbar-Jw3O4Zrq.js";import{V as se}from"./VAvatar-Bm8XvpvO.js";import{V as R}from"./VImg-wiXIkP7s.js";import{V as re}from"./VMenu-BAWQ3Wct.js";import{V as ne,a as C,b as U}from"./VList-wnBQ6eUC.js";import{V as O}from"./VBtn-DEU8AXzn.js";import"./index-bmXFo_Al.js";import"./index-CqdMy8lr.js";import"./VOverlay-uyg0Ioz0.js";import"./forwardRefs-D3j0TLhE.js";import"./dialog-transition-CdzLxCw9.js";import"./group-BcbT0sDe.js";const ie=F({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ue(e){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:c}=u;let d=0,m=0;const t=D(null),r=A(0),n=A(0),f=A(0),T=A(!1),v=A(!1),p=i(()=>Number(e.scrollThreshold)),b=i(()=>Y((p.value-r.value)/p.value||0)),g=()=>{const l=t.value;if(!l||c&&!c.value)return;d=r.value,r.value="window"in l?l.pageYOffset:l.scrollTop;const h=l instanceof Window?document.documentElement.scrollHeight:l.scrollHeight;if(m!==h){m=h;return}v.value=r.value<d,f.value=Math.abs(r.value-p.value)};return I(v,()=>{n.value=n.value||r.value}),I(T,()=>{n.value=0}),q(()=>{I(()=>e.scrollTarget,l=>{var P;const h=l?document.querySelector(l):window;h&&h!==t.value&&((P=t.value)==null||P.removeEventListener("scroll",g),t.value=h,t.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),x(()=>{var l;(l=t.value)==null||l.removeEventListener("scroll",g)}),c&&I(c,g,{immediate:!0}),{scrollThreshold:p,currentScroll:r,currentThreshold:f,isScrollActive:T,scrollRatio:b,isScrollingUp:v,savedScroll:n}}const ce=F({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...oe(),...K(),...ie(),height:{type:[Number,String],default:64}},"VAppBar"),de=G()({name:"VAppBar",props:ce(),emits:{"update:modelValue":e=>!0},setup(e,u){let{slots:c}=u;const d=D(),m=W(e,"modelValue"),t=i(()=>{var _;const a=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),r=i(()=>{const a=t.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!m.value}),{currentScroll:n,scrollThreshold:f,isScrollingUp:T,scrollRatio:v}=ue(e,{canScroll:r}),p=i(()=>t.value.hide||t.value.fullyHide),b=i(()=>e.collapse||t.value.collapse&&(t.value.inverted?v.value>0:v.value===0)),g=i(()=>e.flat||t.value.fullyHide&&!m.value||t.value.elevate&&(t.value.inverted?n.value>0:n.value===0)),l=i(()=>t.value.fadeImage?t.value.inverted?1-v.value:v.value:void 0),h=i(()=>{var H,N;if(t.value.hide&&t.value.inverted)return 0;const a=((H=d.value)==null?void 0:H.contentHeight)??0,_=((N=d.value)==null?void 0:N.extensionHeight)??0;return p.value?n.value<f.value||t.value.fullyHide?a+_:a:a+_});j(i(()=>!!e.scrollBehavior),()=>{ee(()=>{p.value?t.value.inverted?m.value=n.value>f.value:m.value=T.value||n.value<f.value:m.value=!0})});const{ssrBootStyles:P}=J(),{layoutItemStyles:z}=Q({id:e.name,order:i(()=>parseInt(e.order,10)),position:w(e,"location"),layoutSize:h,elementSize:A(void 0),active:m,absolute:w(e,"absolute")});return X(()=>{const a=$.filterProps(e);return s($,Z({ref:d,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...z.value,"--v-toolbar-image-opacity":l.value,height:void 0,...P.value},e.style]},a,{collapse:b.value,flat:g.value}),c)}),{}}});var y={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};const me={computed:{logo(){return`/themes/${this.$vuetify.theme.global.name}/logo-white.svg`},shortName(){return y.APP_SHORTNAME}},beforeMount(){const{theme:e}=this.$route.query;if(e)localStorage.setItem(`${y.APP_NAME}_theme`,e),this.$vuetify.theme.global.name=e;else{let u=localStorage.getItem(`${y.APP_NAME}_theme`);this.$vuetify.theme.global.name=u||y.APP_DEFAULT_THEME}},methods:{setLocale(e){this.appStore.locale=e,this.$i18n.locale=e},async logout(){var c,d;await this.$api.auth.logout(),await this.$msal.initialize();const e=(d=(c=this.appStore)==null?void 0:c.account)==null?void 0:d.homeAccountId;this.appStore.setAccount(void 0);const u={account:this.$msal.getAccountByHomeId(e),mainWindowRedirectUri:y.FRONT_HOST};await this.$msal.logoutPopup(u)}}},ve={class:"d-flex align-center"},he={class:"hidden-sm-and-down pl-2 ml-2 cursor-pointer",style:{"border-left":"1px solid #FFF","font-size":"120%"}},pe={class:"mr-4 hidden-sm-and-down"};function fe(e,u,c,d,m,t){const r=ae("router-link");return L(),k(de,{app:"",dark:"",color:"primary",density:"compact",class:"position-fixed"},{append:o(()=>[B(s(O,{class:"mr-2"},{default:o(()=>[E("span",pe,S(e.appStore.username),1),s(se,{size:"30px",color:"grey lighten-3"},{default:o(()=>[e.appStore.userImage?(L(),k(R,{key:0,alt:"User Image",src:e.appStore.userImage},null,8,["src"])):le("",!0),B(E("span",{class:"text-h6 primary--text"},S(e.appStore.initials),513),[[M,!e.appStore.userImage]])]),_:1}),s(re,{activator:"parent"},{default:o(()=>[s(ne,null,{default:o(()=>[s(C,{"router-link":"",to:"/users/me"},{default:o(()=>[s(U,null,{default:o(()=>[V(S(e.$t("Edit user")),1)]),_:1})]),_:1}),s(C,{onClick:t.logout},{default:o(()=>[s(U,null,{default:o(()=>[V(S(e.$t("Logout")),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[M,e.appStore.username]]),s(O,{color:"white",variant:"tonal",onClick:u[0]||(u[0]=n=>t.setLocale(e.$i18n.locale==="en"?"uk":"en"))},{default:o(()=>[V(S(e.$i18n.locale),1)]),_:1})]),default:o(()=>[E("div",ve,[s(r,{to:"/",tag:"a"},{default:o(()=>[s(R,{"router-link":"",alt:"UNHCR Logo",class:"shrink ml-2 mr-2 cursor-pointer",contain:"",src:t.logo,height:"34",width:"150"},null,8,["src"])]),_:1}),s(r,{to:"/",tag:"a"},{default:o(()=>[E("div",he,S(e.$t(t.shortName)),1)]),_:1})])]),_:1})}const we=te(me,[["render",fe]]);export{we as default};
