import{p,aZ as y,av as V,am as w,P as B,t as I,b as g,g as C,e as E,bu as P,u as k,f as A,bH as M,bb as U,aB as $,bI as q,bJ as F}from"./index-BtIo2-Z_.js";const N=p({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),O=p({value:null,disabled:Boolean,selectedClass:String},"group-item");function R(l,r){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=y("useGroupItem");if(!n)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const t=V();w(Symbol.for(`${r.description}:id`),t);const s=B(r,null);if(!s){if(!a)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${r.description}`)}const m=I(()=>l.value),v=g(()=>!!(s.disabled.value||l.disabled));s.register({id:t,value:m,disabled:v},n),C(()=>{s.unregister(t)});const f=g(()=>s.isSelected(t)),x=g(()=>s.items.value[0].id===t),h=g(()=>s.items.value[s.items.value.length-1].id===t),b=g(()=>f.value&&[s.selectedClass.value,l.selectedClass]);return E(f,e=>{n.emit("group:selected",{value:e})},{flush:"sync"}),{id:t,isSelected:f,isFirst:x,isLast:h,toggle:()=>s.select(t,!f.value),select:e=>s.select(t,e),selectedClass:b,value:m,disabled:v,group:s}}function W(l,r){let a=!1;const n=P([]),t=k(l,"modelValue",[],e=>e==null?[]:S(n,$(e)),e=>{const u=J(n,e);return l.multiple?u:u[0]}),s=y("useGroup");function m(e,u){const d=e,i=Symbol.for(`${r.description}:id`),c=q(i,s==null?void 0:s.vnode).indexOf(u);F(d.value)==null&&(d.value=c,d.useIndexAsValue=!0),c>-1?n.splice(c,0,d):n.push(d)}function v(e){if(a)return;f();const u=n.findIndex(d=>d.id===e);n.splice(u,1)}function f(){const e=n.find(u=>!u.disabled);e&&l.mandatory==="force"&&!t.value.length&&(t.value=[e.id])}A(()=>{f()}),C(()=>{a=!0}),M(()=>{for(let e=0;e<n.length;e++)n[e].useIndexAsValue&&(n[e].value=e)});function x(e,u){const d=n.find(i=>i.id===e);if(!(u&&(d!=null&&d.disabled)))if(l.multiple){const i=t.value.slice(),o=i.findIndex(G=>G===e),c=~o;if(u=u??!c,c&&l.mandatory&&i.length<=1||!c&&l.max!=null&&i.length+1>l.max)return;o<0&&u?i.push(e):o>=0&&!u&&i.splice(o,1),t.value=i}else{const i=t.value.includes(e);if(l.mandatory&&i)return;t.value=u??!i?[e]:[]}}function h(e){if(l.multiple,t.value.length){const u=t.value[0],d=n.findIndex(c=>c.id===u);let i=(d+e)%n.length,o=n[i];for(;o.disabled&&i!==d;)i=(i+e)%n.length,o=n[i];if(o.disabled)return;t.value=[n[i].id]}else{const u=n.find(d=>!d.disabled);u&&(t.value=[u.id])}}const b={register:m,unregister:v,selected:t,select:x,disabled:I(()=>l.disabled),prev:()=>h(n.length-1),next:()=>h(1),isSelected:e=>t.value.includes(e),selectedClass:I(()=>l.selectedClass),items:I(()=>n),getItemIndex:e=>H(n,e)};return w(r,b),b}function H(l,r){const a=S(l,[r]);return a.length?l.findIndex(n=>n.id===a[0]):-1}function S(l,r){const a=[];return r.forEach(n=>{const t=l.find(m=>U(n,m.value)),s=l[n];(t==null?void 0:t.value)!=null?a.push(t.id):s!=null&&a.push(s.id)}),a}function J(l,r){const a=[];return r.forEach(n=>{const t=l.findIndex(s=>s.id===n);if(~t){const s=l[t];a.push(s.value!=null?s.value:t)}}),a}export{W as a,N as b,O as m,R as u};
