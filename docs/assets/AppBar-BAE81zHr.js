import{p as O,r as z,s as y,b as m,d as q,e as T,f as x,g as W,h as j,u as Y,t as H,i as G,j as J,k as K,l as Q,m as X,n as Z,a as s,q as ee,_ as te,c as E,w as o,v as ae,o as $,x as w,y as S,z as N,A as le,B as L,C as I}from"./index-BtIo2-Z_.js";import{m as oe,V as R}from"./VToolbar-o4oksDe3.js";import{V as M}from"./VImg-FY_z5S7Z.js";import{V as C}from"./VBtn--bGuKZaN.js";import{V as se}from"./VAvatar-l5UJO0sV.js";import{V as re}from"./VMenu-Cs322VI3.js";import{V as ne,a as F,b as U}from"./VList-Cnqqz-5U.js";import"./index-C5-hvfiu.js";import"./index-SDX8Otz2.js";import"./group-DgRBM2CV.js";import"./VProgressCircular-DNPB7izS.js";import"./VOverlay-BnbjS8dz.js";import"./forwardRefs--KQCZfKO.js";import"./dialog-transition-Dq7CKyny.js";const ie=O({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ue(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=i;let c=0,d=0;const t=z(null),r=y(0),n=y(0),f=y(0),V=y(!1),v=y(!1),h=m(()=>Number(e.scrollThreshold)),P=m(()=>q((h.value-r.value)/h.value||0)),g=()=>{const l=t.value;if(!l||u&&!u.value)return;c=r.value,r.value="window"in l?l.pageYOffset:l.scrollTop;const p=l instanceof Window?document.documentElement.scrollHeight:l.scrollHeight;if(d!==p){d=p;return}v.value=r.value<c,f.value=Math.abs(r.value-h.value)};return T(v,()=>{n.value=n.value||r.value}),T(V,()=>{n.value=0}),x(()=>{T(()=>e.scrollTarget,l=>{var b;const p=l?document.querySelector(l):window;p&&p!==t.value&&((b=t.value)==null||b.removeEventListener("scroll",g),t.value=p,t.value.addEventListener("scroll",g,{passive:!0}))},{immediate:!0})}),W(()=>{var l;(l=t.value)==null||l.removeEventListener("scroll",g)}),u&&T(u,g,{immediate:!0}),{scrollThreshold:h,currentScroll:r,currentThreshold:f,isScrollActive:V,scrollRatio:P,isScrollingUp:v,savedScroll:n}}const ce=O({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...oe(),...Z(),...ie(),height:{type:[Number,String],default:64}},"VAppBar"),de=j()({name:"VAppBar",props:ce(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:u}=i;const c=z(),d=Y(e,"modelValue"),t=m(()=>{var _;const a=new Set(((_=e.scrollBehavior)==null?void 0:_.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),r=m(()=>{const a=t.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!d.value}),{currentScroll:n,scrollThreshold:f,isScrollingUp:V,scrollRatio:v}=ue(e,{canScroll:r}),h=H(()=>t.value.hide||t.value.fullyHide),P=m(()=>e.collapse||t.value.collapse&&(t.value.inverted?v.value>0:v.value===0)),g=m(()=>e.flat||t.value.fullyHide&&!d.value||t.value.elevate&&(t.value.inverted?n.value>0:n.value===0)),l=m(()=>t.value.fadeImage?t.value.inverted?1-v.value:v.value:void 0),p=m(()=>{var B,k;if(t.value.hide&&t.value.inverted)return 0;const a=((B=c.value)==null?void 0:B.contentHeight)??0,_=((k=c.value)==null?void 0:k.extensionHeight)??0;return h.value?n.value<f.value||t.value.fullyHide?a+_:a:a+_});G(()=>!!e.scrollBehavior,()=>{J(()=>{h.value?t.value.inverted?d.value=n.value>f.value:d.value=V.value||n.value<f.value:d.value=!0})});const{ssrBootStyles:b}=K(),{layoutItemStyles:D}=Q({id:e.name,order:m(()=>parseInt(e.order,10)),position:H(()=>e.location),layoutSize:p,elementSize:y(void 0),active:d,absolute:H(()=>e.absolute)});return X(()=>{const a=R.filterProps(e);return s(R,ee({ref:c,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...D.value,"--v-toolbar-image-opacity":l.value,height:void 0,...b.value},e.style]},a,{collapse:P.value,flat:g.value}),u)}),{}}});var A={FRONT_HOST:"https://raisplus-test.unhcr.in.ua",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_DEFAULT_THEME:"gsc"};const me={computed:{logo(){return`/themes/${this.$vuetify.theme.global.name}/logo-white.svg`},shortName(){return A.APP_SHORTNAME}},beforeMount(){const{theme:e}=this.$route.query;if(e)localStorage.setItem(`${A.APP_NAME}_theme`,e),this.$vuetify.theme.global.name=e;else{let i=localStorage.getItem(`${A.APP_NAME}_theme`);this.$vuetify.theme.global.name=i||A.APP_DEFAULT_THEME}},methods:{setLocale(e){this.appStore.locale=e,this.$i18n.locale=e},async logout(){var u,c;await this.$api.auth.logout(),await this.$msal.initialize();const e=(c=(u=this.appStore)==null?void 0:u.account)==null?void 0:c.homeAccountId;this.appStore.setAccount(void 0);const i={account:this.$msal.getAccountByHomeId(e),mainWindowRedirectUri:A.FRONT_HOST};await this.$msal.logoutPopup(i)}}},ve={class:"d-flex align-center"},pe={class:"hidden-sm-and-down pl-2 ml-2 cursor-pointer",style:{"border-left":"1px solid #FFF","font-size":"120%"}},he={class:"mr-4 hidden-sm-and-down"};function fe(e,i,u,c,d,t){const r=ae("router-link");return $(),E(de,{app:"",dark:"",color:"primary",density:"compact",class:"position-fixed"},{append:o(()=>[N(s(C,{class:"mr-2"},{default:o(()=>[w("span",he,S(e.appStore.username),1),s(se,{size:"30px",color:"grey lighten-3"},{default:o(()=>[e.appStore.userImage?($(),E(M,{key:0,alt:"User Image",src:e.appStore.userImage},null,8,["src"])):le("",!0),N(w("span",{class:"text-h6 primary--text"},S(e.appStore.initials),513),[[L,!e.appStore.userImage]])]),_:1}),s(re,{activator:"parent"},{default:o(()=>[s(ne,null,{default:o(()=>[s(F,{"router-link":"",to:"/users/me"},{default:o(()=>[s(U,null,{default:o(()=>[I(S(e.$t("Edit user")),1)]),_:1})]),_:1}),s(F,{onClick:t.logout},{default:o(()=>[s(U,null,{default:o(()=>[I(S(e.$t("Logout")),1)]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},512),[[L,e.appStore.username]]),s(C,{color:"white",variant:"tonal",onClick:i[0]||(i[0]=n=>t.setLocale(e.$i18n.locale==="en"?"uk":"en"))},{default:o(()=>[I(S(e.$i18n.locale),1)]),_:1})]),default:o(()=>[w("div",ve,[s(r,{to:"/",tag:"a"},{default:o(()=>[s(M,{"router-link":"",alt:"UNHCR Logo",class:"shrink ml-2 mr-2 cursor-pointer",contain:"",src:t.logo,height:"34",width:"150"},null,8,["src"])]),_:1}),s(r,{to:"/",tag:"a"},{default:o(()=>[w("div",pe,S(e.$t(t.shortName)),1)]),_:1})])]),_:1})}const Ee=te(me,[["render",fe]]);export{Ee as default};
