import{p as it}from"./index-D0cxP7tL.js";import{d as ce}from"./index-D0pvfY44.js";import{a as at,p as ve}from"./importProcessor-8a6EwQZQ.js";import{_ as F,a7 as ye,o as f,F as v,a,w as d,z as h,A as m,x as w,y as I,C as y,G as L,H as R,c as T,a8 as A,B as S,a4 as Ae,aq as He,ad as nt,ae as Y,az as ot,p as z,h as W,ar as Oe,l as X,b as V,ah as Ee,K as j,aA as Pe,I as Ne,J as rt,O as dt,Q as ut,aB as ct,r as be,s as de,e as mt,ai as ht,P as pt,R as Me,u as ft,n as me,j as gt,aC as Se,X as vt,aD as yt,aE as bt,aF as St,aG as _t,aH as _e,L as wt}from"./index-BYWsBYtF.js";import{V as E,a as B}from"./VRow-D5QUgmxK.js";import{a as $e,V as k}from"./VBtn-DEU8AXzn.js";import{V as ne}from"./VAlert-BA1FNbYI.js";import{V as Le,c as kt,a as Be,b as Re}from"./VCard-C8It3tDs.js";import{V as Dt,a as It,b as Vt,d as U}from"./VList-wnBQ6eUC.js";import{V as se}from"./VCheckbox-CLjkCuK4.js";import{V as $,g as we,R as Ct,n as xt,M as Tt}from"./index-CqdMy8lr.js";import{V as q}from"./VSpacer-D4hnwTqC.js";import{V as he}from"./VDialog-DkfmLzLV.js";import{d as ze}from"./debouncer-Whu4ZLob.js";import{V as Ue}from"./VDataTableVirtual-BO58bCzO.js";import{V as oe,a as Ye}from"./VToolbar-Jw3O4Zrq.js";import{V as je}from"./VTextField-CLSPMm7c.js";import{V as Q}from"./VTooltip-CKohhaj7.js";import{V as Fe,c as At}from"./VAvatar-Bm8XvpvO.js";import{_ as Ht,a as Ot,b as Et}from"./CustomMultipleBundle-D5JEGacT.js";import{V as We}from"./VContainer-rOsYQHyZ.js";import{_ as Pt}from"./CustomBundle-pHbbXnxx.js";import{w as Nt,X as ke}from"./comlink-DRT95HA4.js";import{m as Mt,V as ue}from"./CustomDate-BvE_k-Ie.js";import{V as $t}from"./VSystemBar-D2w16SNc.js";import{m as Xe,u as Ge,b as Ke,a as Lt}from"./group-BcbT0sDe.js";import{a as Bt,b as Rt}from"./VOverlay-uyg0Ioz0.js";var zt={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};const Ut=["address","aor","bundleName","date","publicId","populationType","distributionModality","items","organization","responsibleOrganization","fundedBy","objectives"],Yt=["address","aor","bundleName","date","publicId","populationType","distributionModality","organization","responsibleOrganization","fundedBy","objectives"],jt={props:{modelValue:{type:Array,default:()=>[]},isDonation:{type:Boolean},headers:{type:Array,default:()=>[]},initialData:{type:Object,default:()=>({})}},provide:["$error"],computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},data(){return{loading:!1,status:void 0,errors:[]}},methods:{exportData(){this.loading=!0;const e=this.headers.map(l=>l.key);e.splice(1,0,"duplicateResult","duplicateBundle","duplicateDate","duplicateOrganization");const t=this.headers.map(l=>l.title);t.splice(1,0,"Deduplication result","Type of the provided assistance","Date of duplicated assistance","Assistance provider");const i=JSON.parse(JSON.stringify(this.model)).map(l=>{var p,c;return l.duplicateResult=(p=l.duplicate)!=null&&p.length?"Duplicated":"Unique",(c=l.duplicate)!=null&&c.length&&(l.duplicateBundle=l.duplicate[0].bundleName,l.duplicateDate=l.duplicate[0].date,l.duplicateOrganization=l.duplicate[0].organization.name),l}),o=e.reduce((l,p,c)=>(l[c]=i.map(b=>b[p]),l),{}),s={headers:t,columns:o},n=`${zt.FRONT_HOST}/export/export.xlsx`;(async()=>{const l=`${this.initialData.publicId} - Clean data.xlsx`;return await ce(n,s,l)})(),this.loading=!1},async importData(){if(this.loading=!0,this.isDonation&&!this.initialData.id){const n=this.initialData,{donations:u}=this.$storage,l=it[this.table],p=l==null?void 0:l.preprocess;p&&(n=p(n)),n.status="Converted",await this.$nextTick();const c=await u.push(n);this.initialData.id=c.id}let e;if(this.isDonation){const{requests:n}=this.$storage,u=await n.filter({donationId:this.initialData.id}).find();if(!u.count){const l=ye(e||this.initialData,Ut);l.donationId=this.initialData.id,l.responsibleOrganization=this.initialData.organization,l.organization=this.initialData.receivingOrganization,l.status="In distribution",l.tags||(l.tags=[]),l.tags.includes("Converted donation")||l.tags.push("Converted donation"),e=await n.push(l)}u.count&&(e=u.items[0])}this.isDonation||(e=this.initialData);const t=ye(e||this.initialData,Yt);t.date.toLocaleDateString&&(t.date=t.date.toLocaleDateString("sv").substring(0,10)),t.distributionId=e.id,this.isDonation&&(t.donationId=this.initialData.id);let i=JSON.parse(JSON.stringify(this.model));i=i.map(n=>{const u=Object.assign({},t,n);return u.createdBy=this.appStore.user.id,u.createdByEmail=this.appStore.user.email,delete u.id,delete u.duplicate,delete u.status,delete u.assignees,u});const o=at(i).map(n=>(n.household&&n.address&&(n.household=Object.assign({},n.address,n.household)),this.isDonation&&(n.donationId=this.initialData.id),n)),{assistances:s}=this.$storage;try{await s.push(o),this.status="success"}catch({errors:n}){this.status="error",this.errors=n}this.$emit("imported",e==null?void 0:e.id),this.loading=!1}}},Ft={class:"h-100"},Wt={class:"text-h4"},Xt={class:"mw-40 ml-4 mr-4 pb-10"},Gt={class:"text-center drag-text"},Kt={class:"text-h5 mb-2"},Jt={class:"mt-8"},qt={class:"mt-8"},Qt={class:"mt-8"},Zt={class:"ml-8 text-left"},el={class:"mt-8"};function tl(e,t,i,o,s,n){return f(),v("div",Ft,[a(B,{class:"pl-4 pr-4"},{default:d(()=>[a(E,{cols:"12"},{default:d(()=>[h("div",Wt,m(e.$t("Import the data")),1)]),_:1})]),_:1}),a(B,{class:"pl-4 pr-4"},{default:d(()=>[a(E,{cols:"12",class:"text-center"},{default:d(()=>[h("div",Xt,[h("div",null,[h("div",Gt,[h("div",null,[h("div",Kt,m(e.$t("You have successfully checked your data")),1),h("div",null,m(e.$t("You can download the deduplicated dataset of finish your import")),1)]),w(a($e,{indeterminate:"",color:"primary",size:"64",class:"mt-8"},null,512),[[I,s.loading]]),w(h("div",Jt,[a(ne,{color:"success"},{default:d(()=>[y(m(e.$t("Your data is imported. You can close the window.")),1)]),_:1})],512),[[I,s.status==="success"]]),w(h("div",qt,[a(ne,{color:"error"},{default:d(()=>[y(m(e.$t("Your data is not imported. Please check the following errors.")),1)]),_:1})],512),[[I,s.status==="error"]]),w(h("div",Qt,[h("ul",Zt,[(f(!0),v(L,null,R(s.errors,(u,l)=>(f(),v("li",{key:l},[h("strong",null,m(e.$t("Row"))+" "+m(u.index+1)+":",1),y(" "+m(e.$t(u.message)),1)]))),128))])],512),[[I,s.status==="error"&&s.errors.length]]),w(h("div",el,[a(k,{onClick:n.exportData,color:"secondary","prepend-icon":"mdi-download"},{default:d(()=>[y(m(e.$t("Download")),1)]),_:1},8,["onClick"]),a(k,{disabled:s.loading||s.status==="success",onClick:n.importData,color:"primary",class:"ml-2","prepend-icon":"mdi-upload"},{default:d(()=>[y(m(e.$t("Import")),1)]),_:1},8,["disabled","onClick"]),a(k,{onClick:t[0]||(t[0]=u=>e.$emit("close")),color:"info",variant:"text",class:"ml-2","prepend-icon":"mdi-close"},{default:d(()=>[y(m(e.$t("Close")),1)]),_:1})],512),[[I,!s.loading]])])])])]),_:1})]),_:1})])}const ll=F(jt,[["render",tl]]);let ee,ae;const sl={props:{modelValue:{type:Array,default:()=>[]},dialog:{type:Boolean}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},data(){return{isDragged:!1,activeIndex:0,draggedIndex:0}},methods:{dragStart(e,t){this.activeIndex=t,ee=e.target.parentElement.parentElement,ae=e.y,setTimeout(()=>{this.isDragged=!0},0)},dragMove(e){let t=Math.round((e.y-ae)/68.8)+this.activeIndex;this.draggedIndex=t<0?0:t>this.model.length?this.model.length:t,ee.style.zIndex=100;let i=e.y-ae;ee.style.transform=`translateY(${i}px)`},dragStop(e){let t=Math.round((e.y-ae)/68.8)+this.activeIndex;this.draggedIndex=t<0?0:t>this.model.length?this.model.length:t,this.isDragged=!1;let i=this.draggedIndex;const o=[...this.model],s=o.splice(this.activeIndex,1)[0];o.splice(i,0,s),this.model=o,setTimeout(()=>{ee.style.transform=null,ee.style.zIndex=null},100)}}};function il(e,t,i,o,s,n){return f(),T(he,{"model-value":i.dialog,width:"600"},{default:d(()=>[a(Le,{width:"600",class:"margin-auto custom-thumb"},{default:d(()=>[a(kt,{class:"d-flex align-center justify-space-between mt-4"},{default:d(()=>[y(m(e.$t("Manage columns"))+" ",1),a(k,{onClick:t[0]||(t[0]=u=>e.$emit("close")),icon:"mdi-close",size:"x-small",variant:"text"})]),_:1}),a(Be,null,{default:d(()=>[a(Dt,{density:"compact"},{default:d(()=>[(f(!0),v(L,null,R(n.model,({show:u,header:l},p)=>(f(),T(It,{class:A([{shiftup:s.isDragged&&p!==s.activeIndex&&p<this.activeIndex&&p>=this.draggedIndex,shiftdown:s.isDragged&&p!==s.activeIndex&&p>this.activeIndex&&p<=this.draggedIndex},"bg-grey-lighten-3 manage-column mb-1"]),key:l.key,style:{width:"100%"},ref_for:!0,ref:"drag"},{prepend:d(()=>[a(se,{"hide-details":"",modelValue:n.model[p].show,"onUpdate:modelValue":c=>n.model[p].show=c},null,8,["modelValue","onUpdate:modelValue"])]),append:d(()=>[a($,{onDragstart:c=>n.dragStart(c,p),onDrag:n.dragMove,onDragend:n.dragStop,color:"grey-darken-1",draggable:"true",class:"ml-3 mr-0",style:{cursor:"grab"}},{default:d(()=>t[2]||(t[2]=[y("mdi-drag-horizontal-variant")])),_:2},1032,["onDragstart","onDrag","onDragend"])]),default:d(()=>[a(Vt,{class:"ml-2"},{default:d(()=>[y(m(l.title),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),a(Re,null,{default:d(()=>[a(q),a(k,{text:e.$t("Close"),onClick:t[1]||(t[1]=u=>e.$emit("close")),color:"primary"},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["model-value"])}const Je=F(sl,[["render",il]]);var al={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};let De,Ie,te;const nl={name:"ImportDeduplication",props:{modelValue:{type:Array,default:()=>[]},initialData:{type:Object,default:()=>({})},dialogHeight:{type:Number,default:400},headers:{type:Array,default:()=>[]}},data(){return{currentItem:[],selected:[],selectedHeaders:[],headersDialog:!1,selectedAll:!1,search:void 0,searchInput:void 0,showDuplicationsOnly:!1}},mounted(){this.selectedHeaders=this.headers.map(e=>e.key)},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},dialog(){return this.currentItem.length>0},availableHeaders(){return this.headers.map(e=>e.key)},shownHeaders(){return this.headers.filter(e=>this.selectedHeaders.includes(e.key))},alertType(){return this.duplicationsCount?"error":"success"},duplicationsCount(){return this.model.filter(e=>{var t;return(t=e.duplicate)==null?void 0:t.length}).length},selectedCount(){return this.selected.length},recordsToShow(){return this.showDuplicationsOnly?this.model.filter(e=>{var t;return(t=e.duplicate)==null?void 0:t.length}):this.model}},methods:{setSearch:ze(function(e){this.search=e}),initResizer(e){De=e.clientX,te=e.target.parentElement;const t=window.getComputedStyle(te);Ie=parseInt(t.width,10)},resize(e){const t=e.clientX-De;let i=Ie+t;if(i<0)return!1;i=Math.abs(i)<70?70:i,te.style.width=`${i}px`,te.style.minWidth=`${i}px`,te.style.maxWidth=`${i}px`},highlight(e){if(e instanceof Date&&(e=e.toLocaleDateString(this.$i18n.locale)),typeof e!="string"||!e)return e;if(e=String(e),e=e.replace(/<[^>]+?>/g,""),this.search){let t=this.search.replace(/[^a-zа-яєіїґ\d ]/g,""),i=new RegExp(`(${t})`,"gi");e=e.replace(i,"<strong>$1</strong>")}return e},showDuplications(){if(this.showDuplicationsOnly=!this.showDuplicationsOnly,this.showDuplicationsOnly){let e=this.recordsToShow.map(t=>t.taxId);this.selected=this.selected.filter(t=>e.includes(t))}},selectAll(){this.selected.length!==this.recordsToShow.length?(this.selected=this.recordsToShow.map(e=>e.taxId),console.log(this.recordsToShow)):this.selected=[]},selectAllDuplications(){this.selected=this.model.filter(e=>{var t;return(t=e.duplicate)==null?void 0:t.length}).map(e=>e.id)},deleteSelected(){const e=[...this.selected];this.model=this.model.filter(t=>!e.includes(t.id)),this.selected=[]},exportData(){const e=this.model.filter(l=>this.selected.includes(l.id)),t=this.headers.filter(l=>l.key!=="duplicate").map(l=>l.key),i=this.headers.filter(l=>l.key!=="duplicate").map(l=>l.title),o=t.reduce((l,p,c)=>(l[c]=e.map(b=>b[p]),l),{}),s={headers:i,columns:o},n=`${al.FRONT_HOST}/export/export.xlsx`;this.model.date,(async()=>{const l=`${new Date(this.initialData.date).toLocaleDateString("sv-SE")} - ${this.initialData.bundleName} Duplicated records.xlsx`;return await ce(n,s,l)})()}}},ol={key:0,class:"font-weight-light"},rl=["onClick"],dl={class:"text-caption opacity-06"},ul={key:0,class:"ml-4 font-weight-light"},cl={class:"d-flex w-100 justify-space-between"},ml=["innerHTML"],hl=["innerHTML"],pl={key:2},fl={key:3,class:"ml-4 font-weight-light"},gl={class:"ml-4"},vl={class:"d-flex w-100"},yl={key:0,class:"bg-blue-grey-lighten-1 pa-2"},bl={class:"bg-blue-grey-lighten-5 pa-4 flex-grow-1"},Sl={key:0},_l={class:"text-h6 mt-4"},wl={class:"mb-6 mt-2"},kl={class:"mt-2 mb-2"},Dl={key:0,class:"mt-2 mb-2"},Il={key:1,class:"mt-2 mb-2"},Vl={key:2,class:"mt-2 mb-2"},Cl={key:3,class:"mt-2 mb-2"},xl={class:"mt-2 mb-2"},Tl={key:4,class:"mt-2 mb-2"},Al={class:"ml-6"},Hl={key:5,class:"mt-2 mb-2"};function Ol(e,t,i,o,s,n){const u=Je;return f(),v("div",null,[a(B,null,{default:d(()=>[a(E,{cols:"12",ref:"mainScreen"},{default:d(()=>[a(Ue,{modelValue:s.selected,"onUpdate:modelValue":t[6]||(t[6]=l=>s.selected=l),class:"import-table",headers:i.headers,search:s.search,items:n.recordsToShow,sticky:!0,"item-height":56,"show-select":"","fixed-header":"",height:e.$vuetify.display.height-370,"item-value":"Tax ID"},{top:d(()=>[w(a(oe,{flat:"",color:"white"},{default:d(()=>[a(Ye,{class:"text-h5",style:{"min-width":"350px"}},{default:d(()=>[y(m(e.$t("Deduplication")),1)]),_:1}),a(U,{class:"mx-4",inset:"",vertical:""}),a(je,{modelValue:s.searchInput,"onUpdate:modelValue":[t[0]||(t[0]=l=>s.searchInput=l),n.setSearch],label:e.$t("Search"),class:"mr-4 w-100",variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-magnify"},{append:d(()=>[n.duplicationsCount?(f(),v("div",ol,[a(k,{onClick:n.showDuplications,color:s.showDuplicationsOnly?"red":"black",size:"small",icon:"mdi-filter"},null,8,["onClick","color"]),a(Q,{activator:"parent",location:"start"},{default:d(()=>[y(m(e.$t("Show duplicated records only")),1)]),_:1})])):S("",!0)]),_:1},8,["modelValue","onUpdate:modelValue","label"]),a(q),Ae(e.$slots,"action-btn",{},()=>[a(k,{onClick:t[1]||(t[1]=l=>e.$emit("btnClick")),variant:"tonal",class:"ml-2"},{default:d(()=>[a($,{left:""},{default:d(()=>t[10]||(t[10]=[y("mdi-table-edit")])),_:1})]),_:1})])]),_:3},512),[[I,!e.$vuetify.display.xs]]),a(ne,{color:n.alertType,variant:"tonal",class:"mt-2 mb-2"},{default:d(()=>[y(m(e.$tc("Number of duplications",n.duplicationsCount))+". "+m(e.$tc("Number of selected rows",n.selectedCount))+".",1)]),_:1},8,["color"])]),bottom:d(()=>[a(oe,{class:"mt-2 pa-0 ml-0",flat:"",density:"compact",color:"white"},{default:d(()=>[w(a(k,{onClick:n.selectAllDuplications,class:"ml-0",color:"error",variant:"tonal","prepend-icon":"mdi-checkbox-outline"},{default:d(()=>[y(m(e.$t("Select all duplications")),1)]),_:1},8,["onClick"]),[[I,n.duplicationsCount]]),w(a(k,{onClick:n.exportData,class:"ml-2",color:"primary",variant:"tonal","prepend-icon":"mdi-download"},{default:d(()=>[y(m(e.$t("Download")),1)]),_:1},8,["onClick"]),[[I,n.selectedCount]]),w(a(k,{onClick:n.deleteSelected,class:"ml-2",color:"warning",variant:"tonal","prepend-icon":"mdi-delete"},{default:d(()=>[y(m(e.$t("Delete")),1)]),_:1},8,["onClick"]),[[I,n.selectedCount]]),a(q),a(k,{onClick:t[2]||(t[2]=l=>e.$emit("setStep",5)),class:"mr-0",color:"success",variant:"flat","prepend-icon":"mdi-play"},{default:d(()=>[y(m(e.$t("Proceed")),1)]),_:1})]),_:1})]),headers:d(({columns:l,isSorted:p,getSortIcon:c,toggleSort:b})=>[h("tr",null,[(f(!0),v(L,null,R(l,r=>(f(),v("td",{key:r.key,style:He({"text-align":r.align}),class:A({"custom-check":r.key==="data-table-select","bg-orange-darken-4":typeof r.error<"u"})},[h("div",{class:A(["d-flex text-no-wrap align-center",{"justify-space-between":r.align!=="center","justify-center":r.align==="center"}])},[r.key==="data-table-select"?(f(),T(se,{key:0,onClick:n.selectAll,indeterminate:s.selected.length>0,"hide-details":""},null,8,["onClick","indeterminate"])):(f(),v("div",{key:1,class:A([{"cursor-pointer":r.sortable,"mr-2":r.sortable},"d-flex align-center"]),onClick:()=>b(r)},[h("div",null,[h("div",dl,m(r.key),1),h("div",null,m(e.$t(r.title)),1)]),r.error?(f(),v("div",ul,[a($,{icon:"mdi-information-outline"}),a(Q,{activator:"parent",location:"start"},{default:d(()=>[y(m(e.$t(r.error)),1)]),_:2},1024)])):S("",!0)],10,rl)),p(r)?w((f(),T($,{key:2,icon:c(r)},null,8,["icon"])),[[I,r.sortable]]):S("",!0)],2),h("div",{onDragstart:t[3]||(t[3]=(...g)=>n.initResizer&&n.initResizer(...g)),onDrag:t[4]||(t[4]=(...g)=>n.resize&&n.resize(...g)),draggable:"true",class:"resizer"},null,32)],6))),128))])]),item:d(({item:l,index:p})=>[h("tr",null,[h("td",null,[a(se,{modelValue:s.selected,"onUpdate:modelValue":t[5]||(t[5]=c=>s.selected=c),value:l.id,"hide-details":""},null,8,["modelValue","value"])]),(f(!0),v(L,null,R(n.shownHeaders,({key:c,align:b})=>(f(),v("td",{class:A({[`text-${b}`]:!0,"bg-red-lighten-1":c==="duplicate"&&l[c].length>0})},[h("div",cl,[c!=="duplicate"&&l[c]&&typeof l[c]=="string"?(f(),v("div",{key:0,innerHTML:l[c].match(/[a-z]/)===null?n.highlight(l[c]):n.highlight(e.$t(l[c]))},null,8,ml)):S("",!0),c!=="duplicate"&&typeof l[c]!="string"?(f(),v("div",{key:1,innerHTML:n.highlight(l[c])},null,8,hl)):S("",!0),c==="duplicate"?(f(),v("div",pl,m(l[c].length>0?e.$t("Duplicated"):e.$t("Unique")),1)):S("",!0),c==="duplicate"&&l[c].length>0?(f(),v("div",fl,[a($,{onClick:r=>s.currentItem=l[c],icon:"mdi-information-outline",class:"cursor-pointer"},null,8,["onClick"]),a(Q,{activator:"parent","max-width":"300",location:"bottom"},{default:d(()=>[h("ul",gl,[(f(!0),v(L,null,R(l[c],r=>(f(),v("li",null,m(new Date(r.date).toLocaleDateString(e.$i18n.locale))+" - "+m(e.$t(r.bundleName)),1))),256))])]),_:2},1024)])):S("",!0)])],2))),256))])]),_:3},8,["modelValue","headers","search","items","height"])]),_:3},512)]),_:3}),a(he,{"model-value":n.dialog},{default:d(()=>[a(Le,{title:e.$t("Duplications"),"max-width":"600",class:"margin-auto custom-thumb"},{default:d(()=>[s.currentItem.length?(f(),T(Be,{key:0},{default:d(()=>{var l,p,c,b,r;return[h("div",vl,[(l=s.currentItem[0])!=null&&l.headOfHousehold?(f(),v("div",yl,[a(Fe,{size:"56",color:"blue-grey-lighten-3"},{default:d(()=>{var g;return[a($,{size:"x-large",icon:((g=s.currentItem[0])==null?void 0:g.headOfHousehold.gender)==="Male"?"mdi-human-male":"mdi-human-female"},null,8,["icon"])]}),_:1})])):S("",!0),h("div",bl,[(p=s.currentItem[0])!=null&&p.headOfHousehold.gender?(f(),v("div",Sl,[h("strong",null,m(e.$t("Gender"))+":",1),y(" "+m(e.$t((c=s.currentItem[0])==null?void 0:c.headOfHousehold.gender)),1)])):S("",!0),h("div",null,[h("strong",null,m(e.$t("Birthday"))+":",1),y(" "+m(new Date((b=s.currentItem[0])==null?void 0:b.headOfHousehold.birthday).toLocaleString(e.$i18n.locale,{year:"numeric",month:"numeric",day:"numeric"})),1)]),h("div",null,[h("strong",null,m(e.$t("Current age"))+":",1),y(" "+m((r=s.currentItem[0])==null?void 0:r.headOfHousehold.age),1)]),h("div",_l,m(e.$t("Deduplication results")),1),h("div",wl,[h("div",null,[h("strong",null,m(e.$t("This person has already received the support from humanitarian organizations")),1)])]),(f(!0),v(L,null,R(s.currentItem,g=>{var D,_,P,H;return f(),v("div",{key:g.publicId,class:"mb-7 pl-2",style:{"border-left":"2px solid #039BE5"}},[h("div",kl,[h("strong",null,m(e.$t("Date"))+":",1),y(" "+m(new Date(g.date).toLocaleDateString("uk")),1)]),g.bundleName?(f(),v("div",Dl,[h("strong",null,m(e.$t("Assistance type"))+":",1),y(" "+m(e.$t(g.bundleName)),1)])):S("",!0),(D=g.address)!=null&&D.pCode1?(f(),v("div",Il,[h("strong",null,m(e.$t("Oblast"))+":",1),y(" "+m(e.$t(g.address.pCode1)),1)])):S("",!0),(_=g.address)!=null&&_.pCode2?(f(),v("div",Vl,[h("strong",null,m(e.$t("Raion"))+":",1),y(" "+m(e.$t(g.address.pCode2)),1)])):S("",!0),(P=g.address)!=null&&P.pCode4?(f(),v("div",Cl,[h("strong",null,m(e.$t("Locality"))+":",1),y(" "+m(e.$t(g.address.pCode4)),1)])):S("",!0),h("div",xl,[h("strong",null,m(e.$t("Organization"))+":",1),y(" "+m((H=g.organization)==null?void 0:H.name),1)]),g.items&&g.items.length?(f(),v("div",Tl,[h("div",null,[h("strong",null,m(e.$t("Items"))+":",1)]),h("ul",Al,[(f(!0),v(L,null,R(g.items,O=>w((f(),v("li",null,m(e.$t(O.key))+": "+m(O.value),513)),[[I,O.value]])),256))])])):S("",!0),g.value?(f(),v("div",Hl,[h("strong",null,m(e.$t("Value"))+":",1),y(" "+m(g.value?g.value.toLocaleString("uk-UA",{style:"currency",currency:g.currency||"USD"}):""),1)])):S("",!0)])}),128))])])]}),_:1})):S("",!0),a(Re,null,{default:d(()=>[a(q),a(k,{text:e.$t("Close"),color:"primary",onClick:t[7]||(t[7]=l=>s.currentItem=[])},null,8,["text"])]),_:1})]),_:1},8,["title"])]),_:1},8,["model-value"]),a(u,{modelValue:s.selectedHeaders,"onUpdate:modelValue":t[8]||(t[8]=l=>s.selectedHeaders=l),dialog:s.headersDialog,onClose:t[9]||(t[9]=l=>s.headersDialog=!1)},null,8,["modelValue","dialog"])])}const El=F(nl,[["render",Ol]]),Pl={name:"ImportDeduplicationSetup",props:{modelValue:{type:Array,default:()=>[]}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},data(){return{filters:{items:{$nested:{key:[]}}}}},methods:{async deduplicateData(){this.$emit("setLoading",!0);for(let l of this.model)delete l.duplicate;const e=[...new Set(this.model.map(l=>l["headOfHousehold.taxId"]).filter(Boolean))],t=[...new Set(this.model.map(l=>l["headOfHousehold.passport"]).filter(Boolean))],i=[...e,...t],{assistances:o}=this.$storage,s=JSON.parse(JSON.stringify(this.filters)),n=[s];if(!s.distributionModality||s.distributionModality.includes("Cash")||s.distributionModality.includes("Voucher")){const l={distributionModality:s.distributionModality,value:{$gt:0}};l.distributionModality||delete l.distributionModality,n.push(l)}let u=await o.useIndex("peopleIds").filter({peopleIds:i}).should(n).include(["headOfHousehold.givenName","headOfHousehold.taxId","headOfHousehold.passport","familyMembers.taxId","familyMembers.passport","date","bundleName","organization.name","admin1","admin2","admin3","admin4","address.pCode1","address.pCode2","address.pCode3","address.pCode4"]).find();u.count||(this.$emit("setLoading",!1),this.$emit("setStep",4)),u.items=u.items.map(l=>(l.taxIds=[l.headOfHousehold.taxId],l.familyMembers&&(l.taxIds=[...l.taxIds,...l.familyMembers.map(p=>p.taxId)]),l));for(let l of this.model){let p=u.items.filter(c=>{var b;return(b=c.taxIds)==null?void 0:b.includes(l["headOfHousehold.taxId"])});l.duplicate=p,p.length&&(l.householdId=p[0].householdId)}this.$emit("setLoading",!1),this.$emit("setStep",4)}},watch:{"filters.bundleName"(){this.filters.items.$nested.key=[]},"filters.distributionModality"(){this.filters.items.$nested.key=[]}}},Nl={class:"d-flex flex-column h-100"},Ml={class:"text-h5 ml-1"},$l={class:"ml-1"},Ll={class:"text-h6 mb-4"},Bl={class:"text-h6 mb-4"},Rl={class:"text-h6 mb-4"};function zl(e,t,i,o,s,n){const u=Ht,l=Ot,p=Et;return f(),v("div",Nl,[a(B,null,{default:d(()=>[a(E,{cols:"12",ref:"mainScreen"},{default:d(()=>[a(We,{fluid:""},{default:d(()=>[a(B,null,{default:d(()=>[a(E,null,{default:d(()=>[h("div",Ml,m(e.$t("Deduplication setup")),1),h("div",$l,m(e.$t("Select filters to apply for the following deduplication")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1}),a(B,{class:"ml-3 mr-3 h-100 flex-grow-1"},{default:d(()=>{var c,b,r,g;return[a(E,{cols:"4"},{default:d(()=>[h("div",Ll,m(e.$t("Define the type of assistance")),1),a(u,{modelValue:s.filters.bundleName,"onUpdate:modelValue":t[0]||(t[0]=D=>s.filters.bundleName=D)},null,8,["modelValue"])]),_:1}),a(E,{cols:"4"},{default:d(()=>[h("div",Bl,m(e.$t("Define the assistance modality")),1),a(l,{modelValue:s.filters.distributionModality,"onUpdate:modelValue":t[1]||(t[1]=D=>s.filters.distributionModality=D)},null,8,["modelValue"])]),_:1}),((b=(c=s.filters)==null?void 0:c.bundleName)==null?void 0:b.length)===1&&((g=(r=s.filters)==null?void 0:r.distributionModality)==null?void 0:g.length)===1&&s.filters.distributionModality[0]==="In-kind"?(f(),T(E,{key:0,cols:"4"},{default:d(()=>{var D,_,P,H;return[h("div",Rl,m(e.$t("Define the specific items")),1),((_=(D=s.filters)==null?void 0:D.bundleName)==null?void 0:_.length)===1&&((H=(P=s.filters)==null?void 0:P.distributionModality)==null?void 0:H.length)===1&&s.filters.distributionModality[0]==="In-kind"?(f(),T(p,{key:0,modelValue:s.filters.items.$nested.key,"onUpdate:modelValue":t[2]||(t[2]=O=>s.filters.items.$nested.key=O),bundle:s.filters.bundleName[0],class:"mt-4"},null,8,["modelValue","bundle"])):S("",!0)]}),_:1})):S("",!0)]}),_:1}),a(B,{class:"align-center flex-grow-0 mt-2 pl-4 pr-4"},{default:d(()=>[a(E,{cols:"12",class:"text-right"},{default:d(()=>[a(k,{onClick:n.deduplicateData,class:"ml-2",color:"success"},{default:d(()=>[y(m(e.$t("Proceed")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})])}const Ul=F(Pl,[["render",zl]]);var Yl={IS_TEST:!0,FRONT_HOST:"https://raisplus-test.unhcr.in.ua",STATIC_ASSETS_PATH:"http://localhost:3000/static/",MS_APP_CLIENT_ID:"4f92930c-13d8-4c36-95d6-2f2d31727e6e",MS_APP_AUTHORITY:"https://login.microsoftonline.com/e5c37981-6664-4134-8a0c-6543d2af80be",BYPASS_MSAL:!0,LOCALE:"uk-ua",LANGUAGE:"uk",BACKEND_HOST:"http://localhost:3000/api/v1",APP_NAME:"rais-plus",APP_SHORTNAME:"RAIS+",APP_FULLNAME:"RAIS+ Ukraine Assistance Monitoring System",APP_DEFAULT_THEME:"gsc",APP_KEY:"UicablEChAKeyNOmerYONYmIkIMELACIstioNIUMItIcARterm"};let Ve,Ce,le;const jl={name:"ImportTable",props:{modelValue:{type:Array,default:()=>[]},initialData:{type:Object,default:()=>({})},dialogHeight:{type:Number,default:400},headers:{type:Array,default:()=>[]}},data(){return{selected:[],selectedHeaders:[],headersDialog:!1,selectedAll:!1,search:void 0,searchInput:void 0,showErrorsOnly:!1}},mounted(){this.selectedHeaders=this.headers.map(e=>({show:!0,header:e}))},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},availableHeaders(){return this.headers.map(e=>e.key)},shownHeaders(){return this.selectedHeaders.filter(({show:e})=>e).map(({header:e})=>e)},errorsCount(){return this.model.filter(e=>e.errors).length},blanksCount(){return this.model.filter(e=>{for(let{key:t}of this.headers)if(!["errors","headOfHousehold.taxId","headOfHousehold.passport"].includes(t)&&(typeof e[t]>"u"||e[t]===""))return!0}).length},selectedCount(){return this.selected.length},alertType(){return this.errorsCount?"error":this.blanksCount?"warning":"success"},recordsToShow(){return this.showErrorsOnly?this.model.filter(e=>e.errors):this.model}},methods:{setSearch:ze(function(e){this.search=e}),initResizer(e){Ve=e.clientX,le=e.target.parentElement;const t=window.getComputedStyle(le);Ce=parseInt(t.width,10)},resize(e){const t=e.clientX-Ve;let i=Ce+t;if(i<0)return!1;i=Math.abs(i)<70?70:i,le.style.width=`${i}px`,le.style.minWidth=`${i}px`,le.style.maxWidth=`${i}px`},highlight(e){if(e instanceof Date&&(e=e.toLocaleDateString("uk")),typeof e!="string"||!e)return e;if(e=String(e),e=e.replace(/<[^>]+?>/g,""),this.search){let t=this.search.replace(/[^a-zа-яєіїґ\d ]/g,""),i=new RegExp(`(${t})`,"gi");e=e.replace(i,"<strong>$1</strong>")}return e},showErrors(){if(this.showErrorsOnly=!this.showErrorsOnly,this.showErrorsOnly){let e=this.recordsToShow.map(t=>t.id);this.selected=this.selected.filter(t=>e.includes(t))}},selectAllErrors(){this.selected=this.model.filter(e=>typeof e.errors<"u").map(e=>e.id)},selectAll(){this.selected.length!==this.recordsToShow.length?this.selected=this.recordsToShow.map(e=>e.id):this.selected=[]},deleteSelected(){const e=[...this.selected];this.model=this.model.filter(t=>!e.includes(t.id)),this.selected=[]},exportData(){const e=this.model.filter(l=>this.selected.includes(l.id)),t=this.headers.map(l=>l.key),i=this.headers.map(l=>l.title),o=t.reduce((l,p,c)=>(l[c]=e.map(b=>b[p]),l),{}),s={headers:i,columns:o},n=`${Yl.FRONT_HOST}/export/export.xlsx`;this.model.date,(async()=>{const l=`${new Date(this.initialData.date).toLocaleDateString("sv-SE")} - ${this.initialData.bundleName} Error records.xlsx`;return await ce(n,s,l)})()},async proccedToDeduplication(){this.$emit("setStep",3)}},watch:{dialogHeight(e){const t=e-240;this.height=t}}},Fl={class:"font-weight-light"},Wl=["onClick"],Xl={class:"text-caption opacity-06"},Gl={key:0,class:"ml-4 font-weight-light"},Kl={class:"d-flex w-100 justify-space-between"},Jl=["innerHTML"],ql=["innerHTML"],Ql={key:2,class:"ml-4 font-weight-light"};function Zl(e,t,i,o,s,n){const u=Je;return f(),T(B,null,{default:d(()=>[a(E,{cols:"12",ref:"mainScreen"},{default:d(()=>[a(Ue,{modelValue:s.selected,"onUpdate:modelValue":t[5]||(t[5]=l=>s.selected=l),class:"import-table",height:e.$vuetify.display.height-370,headers:n.shownHeaders,search:s.search,items:n.recordsToShow,sticky:!0,"item-height":56,"show-select":"","fixed-header":"","item-value":"Tax ID"},{top:d(()=>[a(oe,{flat:"",color:"white",class:"hidden-sm-and-down"},{default:d(()=>[a(Ye,{class:"text-h5",style:{"min-width":"350px"}},{default:d(()=>[y(m(e.$t("Check the result")),1)]),_:1}),a(U,{class:"mx-4",inset:"",vertical:""}),a(je,{modelValue:s.searchInput,"onUpdate:modelValue":[t[0]||(t[0]=l=>s.searchInput=l),n.setSearch],label:e.$t("Search"),class:"mr-4 w-100",variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-magnify"},{append:d(()=>[h("div",Fl,[a(k,{onClick:n.showErrors,color:s.showErrorsOnly?"red":"black",size:"small",icon:"mdi-filter"},null,8,["onClick","color"]),a(Q,{activator:"parent",location:"start"},{default:d(()=>[y(m(e.$t("Show errors only")),1)]),_:1})])]),_:1},8,["modelValue","onUpdate:modelValue","label"]),a(q),Ae(e.$slots,"action-btn",{},()=>[a(k,{onClick:t[1]||(t[1]=l=>s.headersDialog=!0),variant:"tonal",class:"ml-2"},{default:d(()=>[a($,{left:""},{default:d(()=>t[8]||(t[8]=[y("mdi-table-edit")])),_:1})]),_:1})])]),_:3}),a(ne,{color:n.alertType,variant:"tonal",class:"mt-2 mb-2"},{default:d(()=>[y(m(e.$tc("Number of records",n.model.length))+". "+m(e.$tc("Number of errors",n.errorsCount))+". "+m(e.$tc("Number of blanks",n.blanksCount))+". "+m(e.$tc("Number of selected rows",n.selectedCount))+".",1)]),_:1},8,["color"])]),bottom:d(()=>[a(oe,{class:"mt-2 pa-0 ml-0",flat:"",density:"compact",color:"white"},{default:d(()=>[w(a(k,{onClick:n.selectAllErrors,class:"ml-0",color:"error",variant:"tonal","prepend-icon":"mdi-checkbox-outline"},{default:d(()=>[y(m(e.$t("Select all errors")),1)]),_:1},8,["onClick"]),[[I,n.errorsCount]]),w(a(k,{onClick:n.exportData,class:"ml-2",color:"primary",variant:"tonal","prepend-icon":"mdi-download"},{default:d(()=>[y(m(e.$t("Download")),1)]),_:1},8,["onClick"]),[[I,n.selectedCount]]),w(a(k,{onClick:n.deleteSelected,class:"ml-2",color:"warning",variant:"tonal","prepend-icon":"mdi-delete"},{default:d(()=>[y(m(e.$t("Delete")),1)]),_:1},8,["onClick"]),[[I,n.selectedCount]]),a(q),a(k,{disabled:n.errorsCount!==0||!this.model.length,onClick:n.proccedToDeduplication,class:"mr-0",color:"success",variant:"flat","prepend-icon":"mdi-play"},{default:d(()=>[y(m(e.$t("Proceed")),1)]),_:1},8,["disabled","onClick"])]),_:1})]),headers:d(({columns:l,isSorted:p,getSortIcon:c,toggleSort:b})=>[h("tr",null,[(f(!0),v(L,null,R(l,r=>(f(),v("td",{key:r.key,style:He({"text-align":r.align}),class:A({"custom-check":r.key==="data-table-select","bg-orange-darken-4":typeof r.error<"u"})},[h("div",{class:A(["d-flex text-no-wrap align-center",{"justify-space-between":r.align!=="center","justify-center":r.align==="center"}])},[r.key==="data-table-select"?(f(),T(se,{key:0,onClick:n.selectAll,indeterminate:s.selected.length>0,"hide-details":""},null,8,["onClick","indeterminate"])):(f(),v("div",{key:1,class:A([{"cursor-pointer":r.sortable,"mr-2":r.sortable},"d-flex align-center"]),onClick:()=>b(r)},[h("div",null,[h("div",Xl,m(r.key),1),h("div",null,m(e.$t(r.title)),1)]),r.error?(f(),v("div",Gl,[a($,{icon:"mdi-information-outline"}),a(Q,{activator:"parent",location:"start"},{default:d(()=>[y(m(e.$t(r.error)),1)]),_:2},1024)])):S("",!0)],10,Wl)),p(r)?w((f(),T($,{key:2,icon:c(r)},null,8,["icon"])),[[I,r.sortable]]):S("",!0)],2),h("div",{onDragstart:t[2]||(t[2]=(...g)=>n.initResizer&&n.initResizer(...g)),onDrag:t[3]||(t[3]=(...g)=>n.resize&&n.resize(...g)),draggable:"true",class:"resizer"},null,32)],6))),128))])]),item:d(({item:l,index:p})=>[h("tr",null,[h("td",null,[a(se,{modelValue:s.selected,"onUpdate:modelValue":t[4]||(t[4]=c=>s.selected=c),value:l.id,"hide-details":""},null,8,["modelValue","value"])]),(f(!0),v(L,null,R(n.shownHeaders,({key:c,align:b})=>{var r,g,D;return f(),v("td",{class:A({[`text-${b}`]:!0,"bg-yellow-lighten-2":typeof l[c]>"u"&&typeof((r=l.errors)==null?void 0:r[c])>"u","bg-red-lighten-1":typeof((g=l.errors)==null?void 0:g[c])<"u"})},[h("div",Kl,[typeof l[c]=="string"&&l[c]&&l[c].match(/[a-z]/ig)?(f(),v("div",{key:0,innerHTML:n.highlight(e.$t(l[c]))},null,8,Jl)):(f(),v("div",{key:1,innerHTML:n.highlight(l[c])},null,8,ql)),(D=l.errors)!=null&&D[c]?(f(),v("div",Ql,[a($,{icon:"mdi-information-outline"}),a(Q,{activator:"parent","max-width":"300",location:"bottom"},{default:d(()=>{var _;return[y(m(e.$t((_=l.errors)==null?void 0:_[c])),1)]}),_:2},1024)])):S("",!0)])],2)}),256))])]),_:3},8,["modelValue","height","headers","search","items"])]),_:3},512),a(u,{modelValue:s.selectedHeaders,"onUpdate:modelValue":t[6]||(t[6]=l=>s.selectedHeaders=l),dialog:s.headersDialog,onClose:t[7]||(t[7]=l=>s.headersDialog=!1)},null,8,["modelValue","dialog"])]),_:3})}const es=F(jl,[["render",Zl]]),{cashAssistances:ts,inKindAssistances:ls}=ot,ss=Nt(new Worker("/import/worker.js")),is=e=>new Promise((t,i)=>{const o=new FileReader;o.onerror=()=>i(o.error),o.onload=s=>{t(o.result)},e&&o.readAsArrayBuffer(e)}),as={props:{modelValue:{type:Object,default:()=>[]},initialData:{type:Object,default:()=>({})},disabled:{type:Boolean}},computed:{model:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},bundleName:{get(){return this.initialData.bundleName},set(e){this.$emit("setBundle",e)}}},data(){return{isDragover:!1,dialog:!1,importText:void 0}},methods:{resetBundle(){this.model.items=[]},async upload(e){if(typeof this.bundleName>"u")return alert(this.$t("You need to select the bundle"));this.$emit("setLoading",!0);const t=await is(e[0]),i=ke.read(t,{cellDates:!0,cellNF:!1,cellText:!1}),o=i.SheetNames,s=i.Sheets[o[0]],n=ke.utils.sheet_to_json(s,{header:1});let u=ve(n);u.data=u.data.map(l=>{var p;return l.tags=((p=l.tags)==null?void 0:p.split(","))||[],l.tags=[...l.tags,...this.initialData.tags||[]].join(","),l.tags||delete l.tags,l}),this.isDragover=!1,this.validateData(u),this.$refs.fileInput.value=""},async importTSV(){this.$emit("setLoading",!0);const e=await ss(this.importText);let t=ve(e);t.data=t.data.map(i=>{var o;return i.tags=((o=i.tags)==null?void 0:o.split(","))||[],i.tags=[...i.tags,...this.initialData.tags||[]].join(","),i.tags||delete i.tags,i}),this.validateData(t)},validateData({data:e,headers:t}){const i=this.initialData.distributionModality==="In-kind"?ls:ts;e=e.map(o=>{o.id=o["headOfHousehold.taxId"]||o["headOfHousehold.passport"];const s=i.validate(o,{abortEarly:!1});if(!s.error)return o;o.errors={};for(let n of s.error.details)o.errors[n.path[0]]=n.message;return o}),t=t.map(o=>(o.title=o.title.replace(/\*$/,""),o.title=o.title.replace(/^Items - /,""),o.title=o.title.replace(/^Strings - /,""),o)),this.model=e,this.$emit("setHeaders",t),this.$emit("setStep",2)}},watch:{bundleName(e){this.$emit("setBundle",e)}}},ns={class:"h-100 d-flex flex-column mt-4 flex-shrink-1"},os={class:"text-h5"},rs=["href"],ds={class:"v-btn__content","data-no-activator":""},us={class:"import-text flex-grow-1 ml-4 mr-4 mt-4"},cs={class:"text-h5 mb-2"},ms={class:"text-h5 mb-2"},hs={class:"text-h5 mb-2"},ps=["disabled"];function fs(e,t,i,o,s,n){const u=Pt;return f(),v("div",ns,[a(B,{class:"align-center flex-grow-0 pl-4 pr-4"},{default:d(()=>[a(E,{cols:"4"},{default:d(()=>[h("div",os,m(e.$t("Upload your data")),1)]),_:1}),a(E,{cols:"4"},{default:d(()=>[a(u,{modelValue:n.bundleName,"onUpdate:modelValue":t[0]||(t[0]=l=>n.bundleName=l),disabled:i.disabled},null,8,["modelValue","disabled"])]),_:1}),a(E,{cols:"4",class:"text-right"},{default:d(()=>[i.initialData.bundleName?(f(),v("a",{key:0,download:"",class:"v-btn v-theme--unhcr text-primary v-btn--density-default v-btn--size-default v-btn--variant-tonal",href:`/import/templates/${i.initialData.bundleName}-${i.initialData.distributionModality}.xlsx`},[t[11]||(t[11]=h("span",{class:"v-btn__overlay"},null,-1)),t[12]||(t[12]=h("span",{class:"v-btn__underlay"},null,-1)),t[13]||(t[13]=h("span",{class:"v-btn__prepend"},[h("i",{class:"mdi-download mdi v-icon notranslate v-theme--unhcr v-icon--size-default","aria-hidden":"true"})],-1)),h("span",ds,m(e.$t("Download template")),1)],8,rs)):S("",!0)]),_:1})]),_:1}),h("div",us,[h("div",null,[w(h("div",{class:A(["text-center drag-text",{"drag-over":s.isDragover}])},[w(h("div",null,[h("div",cs,m(e.$t("Select bundle")),1),h("div",null,m(e.$t("To start data import select the bundle, download the relevant template and provide the data")),1)],512),[[I,typeof n.bundleName>"u"]]),w(h("div",null,[h("div",ms,m(e.$t("Add your data here")),1),h("div",null,m(e.$t("To begin, select the table you want to import in Excel, copy it to the clipboard, and the paste here")),1),h("div",null,m(e.$t("or drop the Excel file")),1)],512),[[I,!s.isDragover&&n.bundleName]]),w(h("div",null,[a($,{size:"x-large",class:"mb-2"},{default:d(()=>t[14]||(t[14]=[y("mdi-upload")])),_:1}),h("div",hs,m(e.$t("Drop your file here")),1)],512),[[I,s.isDragover]])],2),[[I,!s.importText]]),w(h("textarea",{"onUpdate:modelValue":t[1]||(t[1]=l=>s.importText=l),disabled:typeof n.bundleName>"u",onDrag:t[2]||(t[2]=Y(()=>{},["prevent","stop"])),onDragstart:t[3]||(t[3]=Y(()=>{},["prevent","stop"])),onDragover:t[4]||(t[4]=Y(l=>s.isDragover=!0,["prevent","stop"])),onDragenter:t[5]||(t[5]=Y(l=>s.isDragover=!0,["prevent","stop"])),onDragend:t[6]||(t[6]=Y(l=>s.isDragover=!1,["prevent","stop"])),onDragleave:t[7]||(t[7]=Y(l=>s.isDragover=!1,["prevent","stop"])),onDrop:t[8]||(t[8]=Y(l=>n.upload(l.dataTransfer.files),["prevent","stop"])),class:"w-100 h-100 elevation-2 pa-1","data-gramm":"false",spellcheck:"false",autocapitalize:"none",autocorrect:"off",autocomplete:"off"},null,40,ps),[[nt,s.importText]])])]),a(B,{class:"align-center flex-grow-0 mt-2 pl-4 pr-4"},{default:d(()=>[a(E,{cols:"12",class:"text-right"},{default:d(()=>[w(a(k,{onClick:t[9]||(t[9]=l=>e.$refs.fileInput.click()),disabled:typeof n.bundleName>"u","prepend-icon":"mdi-upload",color:"success",class:"ml-2"},{default:d(()=>[y(m(e.$t("Upload file")),1)]),_:1},8,["disabled"]),[[I,!s.importText]]),w(a(k,{onClick:n.importTSV,class:"ml-2",color:"success"},{default:d(()=>[y(m(e.$t("Import")),1)]),_:1},8,["onClick"]),[[I,s.importText]])]),_:1})]),_:1}),h("input",{ref:"fileInput",onInput:t[10]||(t[10]=l=>n.upload(l.target.files)),class:"d-none box__file",type:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","data-multiple-caption":"{count} files selected",multiple:""},null,544)])}const gs=F(as,[["render",fs]]),pe=Symbol.for("vuetify:v-stepper"),qe=z({color:String,disabled:{type:[Boolean,String],default:!1},prevText:{type:String,default:"$vuetify.stepper.prev"},nextText:{type:String,default:"$vuetify.stepper.next"}},"VStepperActions"),vs=W()({name:"VStepperActions",props:qe(),emits:{"click:prev":()=>!0,"click:next":()=>!0},setup(e,t){let{emit:i,slots:o}=t;const{t:s}=Oe();function n(){i("click:prev")}function u(){i("click:next")}return X(()=>{const l={onClick:n},p={onClick:u};return a("div",{class:"v-stepper-actions"},[a(we,{defaults:{VBtn:{disabled:["prev",!0].includes(e.disabled),text:s(e.prevText),variant:"text"}}},{default:()=>{var c;return[((c=o.prev)==null?void 0:c.call(o,{props:l}))??a(k,l,null)]}}),a(we,{defaults:{VBtn:{color:e.color,disabled:["next",!0].includes(e.disabled),text:s(e.nextText),variant:"tonal"}}},{default:()=>{var c;return[((c=o.next)==null?void 0:c.call(o,{props:p}))??a(k,p,null)]}})])}),{}}}),Qe=At("v-stepper-header"),ys=z({color:String,title:String,subtitle:String,complete:Boolean,completeIcon:{type:j,default:"$complete"},editable:Boolean,editIcon:{type:j,default:"$edit"},error:Boolean,errorIcon:{type:j,default:"$error"},icon:j,ripple:{type:[Boolean,Object],default:!0},rules:{type:Array,default:()=>[]}},"StepperItem"),bs=z({...ys(),...Xe()},"VStepperItem"),J=W()({name:"VStepperItem",directives:{Ripple:Ct},props:bs(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:i}=t;const o=Ge(e,pe,!0),s=V(()=>(o==null?void 0:o.value.value)??e.value),n=V(()=>e.rules.every(g=>g()===!0)),u=V(()=>!e.disabled&&e.editable),l=V(()=>!e.disabled&&e.editable),p=V(()=>e.error||!n.value),c=V(()=>e.complete||e.rules.length>0&&n.value),b=V(()=>p.value?e.errorIcon:c.value?e.completeIcon:o.isSelected.value&&e.editable?e.editIcon:e.icon),r=V(()=>({canEdit:l.value,hasError:p.value,hasCompleted:c.value,title:e.title,subtitle:e.subtitle,step:s.value,value:e.value}));return X(()=>{var H,O,G;const g=(!o||o.isSelected.value||c.value||l.value)&&!p.value&&!e.disabled,D=!!(e.title!=null||i.title),_=!!(e.subtitle!=null||i.subtitle);function P(){o==null||o.toggle()}return w(a("button",{class:["v-stepper-item",{"v-stepper-item--complete":c.value,"v-stepper-item--disabled":e.disabled,"v-stepper-item--error":p.value},o==null?void 0:o.selectedClass.value],disabled:!e.editable,onClick:P},[u.value&&xt(!0,"v-stepper-item"),a(Fe,{key:"stepper-avatar",class:"v-stepper-item__avatar",color:g?e.color:void 0,size:24},{default:()=>{var N;return[((N=i.icon)==null?void 0:N.call(i,r.value))??(b.value?a($,{icon:b.value},null):s.value)]}}),a("div",{class:"v-stepper-item__content"},[D&&a("div",{key:"title",class:"v-stepper-item__title"},[((H=i.title)==null?void 0:H.call(i,r.value))??e.title]),_&&a("div",{key:"subtitle",class:"v-stepper-item__subtitle"},[((O=i.subtitle)==null?void 0:O.call(i,r.value))??e.subtitle]),(G=i.default)==null?void 0:G.call(i,r.value)])]),[[Ee("ripple"),e.ripple&&e.editable,null]])}),{}}}),Ss=e=>{const{touchstartX:t,touchendX:i,touchstartY:o,touchendY:s}=e,n=.5,u=16;e.offsetX=i-t,e.offsetY=s-o,Math.abs(e.offsetY)<n*Math.abs(e.offsetX)&&(e.left&&i<t-u&&e.left(e),e.right&&i>t+u&&e.right(e)),Math.abs(e.offsetX)<n*Math.abs(e.offsetY)&&(e.up&&s<o-u&&e.up(e),e.down&&s>o+u&&e.down(e))};function _s(e,t){var o;const i=e.changedTouches[0];t.touchstartX=i.clientX,t.touchstartY=i.clientY,(o=t.start)==null||o.call(t,{originalEvent:e,...t})}function ws(e,t){var o;const i=e.changedTouches[0];t.touchendX=i.clientX,t.touchendY=i.clientY,(o=t.end)==null||o.call(t,{originalEvent:e,...t}),Ss(t)}function ks(e,t){var o;const i=e.changedTouches[0];t.touchmoveX=i.clientX,t.touchmoveY=i.clientY,(o=t.move)==null||o.call(t,{originalEvent:e,...t})}function Ds(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:i=>_s(i,t),touchend:i=>ws(i,t),touchmove:i=>ks(i,t)}}function Is(e,t){var l;const i=t.value,o=i!=null&&i.parent?e.parentElement:e,s=(i==null?void 0:i.options)??{passive:!0},n=(l=t.instance)==null?void 0:l.$.uid;if(!o||!n)return;const u=Ds(t.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[n]=u,Pe(u).forEach(p=>{o.addEventListener(p,u[p],s)})}function Vs(e,t){var n,u;const i=(n=t.value)!=null&&n.parent?e.parentElement:e,o=(u=t.instance)==null?void 0:u.$.uid;if(!(i!=null&&i._touchHandlers)||!o)return;const s=i._touchHandlers[o];Pe(s).forEach(l=>{i.removeEventListener(l,s[l])}),delete i._touchHandlers[o]}const Ze={mounted:Is,unmounted:Vs},et=Symbol.for("vuetify:v-window"),tt=Symbol.for("vuetify:v-window-group"),lt=z({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...Ne(),...rt(),...dt()},"VWindow"),xe=W()({name:"VWindow",directives:{Touch:Ze},props:lt(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{themeClasses:o}=ut(e),{isRtl:s}=ct(),{t:n}=Oe(),u=Ke(e,tt),l=be(),p=V(()=>s.value?!e.reverse:e.reverse),c=de(!1),b=V(()=>{const C=e.direction==="vertical"?"y":"x",M=(p.value?!c.value:c.value)?"-reverse":"";return`v-window-${C}${M}-transition`}),r=de(0),g=be(void 0),D=V(()=>u.items.value.findIndex(C=>u.selected.value.includes(C.id)));mt(D,(C,x)=>{const M=u.items.value.length,Z=M-1;M<=2?c.value=C<x:C===Z&&x===0?c.value=!0:C===0&&x===Z?c.value=!1:c.value=C<x}),ht(et,{transition:b,isReversed:c,transitionCount:r,transitionHeight:g,rootRef:l});const _=V(()=>e.continuous||D.value!==0),P=V(()=>e.continuous||D.value!==u.items.value.length-1);function H(){_.value&&u.prev()}function O(){P.value&&u.next()}const G=V(()=>{const C=[],x={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${p.value?"right":"left"}`,onClick:u.prev,"aria-label":n("$vuetify.carousel.prev")};C.push(_.value?i.prev?i.prev({props:x}):a(k,x,null):a("div",null,null));const M={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${p.value?"left":"right"}`,onClick:u.next,"aria-label":n("$vuetify.carousel.next")};return C.push(P.value?i.next?i.next({props:M}):a(k,M,null):a("div",null,null)),C}),N=V(()=>e.touch===!1?e.touch:{...{left:()=>{p.value?H():O()},right:()=>{p.value?O():H()},start:x=>{let{originalEvent:M}=x;M.stopPropagation()}},...e.touch===!0?{}:e.touch});return X(()=>w(a(e.tag,{ref:l,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var C,x;return[a("div",{class:"v-window__container",style:{height:g.value}},[(C=i.default)==null?void 0:C.call(i,{group:u}),e.showArrows!==!1&&a("div",{class:"v-window__controls"},[G.value])]),(x=i.additional)==null?void 0:x.call(i,{group:u})]}}),[[Ee("touch"),N.value]])),{group:u}}}),Cs=z({...pt(lt(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VStepperWindow"),xs=W()({name:"VStepperWindow",props:Cs(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const o=Me(pe,null),s=ft(e,"modelValue"),n=V({get(){var u;return s.value!=null||!o?s.value:(u=o.items.value.find(l=>o.selected.value.includes(l.id)))==null?void 0:u.value},set(u){s.value=u}});return X(()=>{const u=xe.filterProps(e);return a(xe,me({_as:"VStepperWindow"},u,{modelValue:n.value,"onUpdate:modelValue":l=>n.value=l,class:["v-stepper-window",e.class],style:e.style,mandatory:!1,touch:!1}),i)}),{}}}),st=z({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ne(),...Xe(),...Bt()},"VWindowItem"),Te=W()({name:"VWindowItem",directives:{Touch:Ze},props:st(),emits:{"group:selected":e=>!0},setup(e,t){let{slots:i}=t;const o=Me(et),s=Ge(e,tt),{isBooted:n}=gt();if(!o||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const u=de(!1),l=V(()=>n.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function p(){!u.value||!o||(u.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function c(){var _;u.value||!o||(u.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Se((_=o.rootRef.value)==null?void 0:_.clientHeight)),o.transitionCount.value+=1)}function b(){p()}function r(_){u.value&&vt(()=>{!l.value||!u.value||!o||(o.transitionHeight.value=Se(_.clientHeight))})}const g=V(()=>{const _=o.isReversed.value?e.reverseTransition:e.transition;return l.value?{name:typeof _!="string"?o.transition.value:_,onBeforeEnter:c,onAfterEnter:p,onEnterCancelled:b,onBeforeLeave:c,onAfterLeave:p,onLeaveCancelled:b,onEnter:r}:!1}),{hasContent:D}=Rt(e,s.isSelected);return X(()=>a(Tt,{transition:g.value,disabled:!n.value},{default:()=>{var _;return[w(a("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[D.value&&((_=i.default)==null?void 0:_.call(i))]),[[I,s.isSelected.value]])]}})),{groupItem:s}}}),Ts=z({...st()},"VStepperWindowItem"),As=W()({name:"VStepperWindowItem",props:Ts(),setup(e,t){let{slots:i}=t;return X(()=>{const o=Te.filterProps(e);return a(Te,me({_as:"VStepperWindowItem"},o,{class:["v-stepper-window-item",e.class],style:e.style}),i)}),{}}}),Hs=z({altLabels:Boolean,bgColor:String,completeIcon:j,editIcon:j,editable:Boolean,errorIcon:j,hideActions:Boolean,items:{type:Array,default:()=>[]},itemTitle:{type:String,default:"title"},itemValue:{type:String,default:"value"},nonLinear:Boolean,flat:Boolean,...yt()},"Stepper"),Os=z({...Hs(),...Lt({mandatory:"force",selectedClass:"v-stepper-item--selected"}),...Mt(),...bt(qe(),["prevText","nextText"])},"VStepper"),Es=W()({name:"VStepper",props:Os(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:i}=t;const{items:o,next:s,prev:n,selected:u}=Ke(e,pe),{displayClasses:l,mobile:p}=St(e),{completeIcon:c,editIcon:b,errorIcon:r,color:g,editable:D,prevText:_,nextText:P}=_t(e),H=V(()=>e.items.map((N,C)=>{const x=_e(N,e.itemTitle,N),M=_e(N,e.itemValue,C+1);return{title:x,value:M,raw:N}})),O=V(()=>o.value.findIndex(N=>u.value.includes(N.id))),G=V(()=>e.disabled?e.disabled:O.value===0?"prev":O.value===o.value.length-1?"next":!1);return wt({VStepperItem:{editable:D,errorIcon:r,completeIcon:c,editIcon:b,prevText:_,nextText:P},VStepperActions:{color:g,disabled:G,prevText:_,nextText:P}}),X(()=>{const N=ue.filterProps(e),C=!!(i.header||e.items.length),x=e.items.length>0,M=!e.hideActions&&!!(x||i.actions);return a(ue,me(N,{color:e.bgColor,class:["v-stepper",{"v-stepper--alt-labels":e.altLabels,"v-stepper--flat":e.flat,"v-stepper--non-linear":e.nonLinear,"v-stepper--mobile":p.value},l.value,e.class],style:e.style}),{default:()=>{var Z,fe;return[C&&a(Qe,{key:"stepper-header"},{default:()=>[H.value.map((K,ie)=>{let{raw:re,...ge}=K;return a(L,null,[!!ie&&a(U,null,null),a(J,ge,{default:i[`header-item.${ge.value}`]??i.header,icon:i.icon,title:i.title,subtitle:i.subtitle})])})]}),x&&a(xs,{key:"stepper-window"},{default:()=>[H.value.map(K=>a(As,{value:K.value},{default:()=>{var ie,re;return((ie=i[`item.${K.value}`])==null?void 0:ie.call(i,K))??((re=i.item)==null?void 0:re.call(i,K))}}))]}),(Z=i.default)==null?void 0:Z.call(i,{prev:n,next:s}),M&&(((fe=i.actions)==null?void 0:fe.call(i,{next:s,prev:n}))??a(vs,{key:"stepper-actions","onClick:prev":n,"onClick:next":s},i))]}})}),{prev:n,next:s}}}),Ps={props:{dialog:{type:Boolean},disabled:{type:Boolean},initialData:{type:Object,default:()=>({})},createRequest:{type:Boolean},isDonation:{type:Boolean}},computed:{currentHeaders(){const e=[],t=this.headers.map(o=>o.key);t.includes("headOfHousehold.taxId")&&e.push({key:"headOfHousehold.taxId",title:"Tax ID",value:"headOfHousehold.taxId"}),t.includes("headOfHousehold.passport")&&e.push({key:"headOfHousehold.passport",title:"Passport",value:"headOfHousehold.passport"}),this.step===4&&e.push({key:"duplicate",title:"Deduplication status",align:"start"});const i=this.headers.filter(o=>!["id","duplicate","headOfHousehold.taxId","headOfHousehold.passport"].includes(o.key));return e.push(...i),e}},data(){return{loading:!1,data:[],headers:[],deduplicationFilter:{},step:1}},methods:{resetData(){this.step=1,this.data=[],this.headers=[]},resetValidation(){let e=this.headers.map(t=>t.key).indexOf("duplicate");e>-1&&this.headers.splice(e,1),this.step=2},closeDialog(){this.$emit("close"),this.step=1}},watch:{step(){this.loading=!1}}},Ns={class:"ms-2"},Ms={key:0,class:"flex-grow-1 h-100 d-flex align-center justify-center"};function $s(e,t,i,o,s,n){const u=gs,l=es,p=Ul,c=El,b=ll;return f(),T(he,{modelValue:i.dialog,"onUpdate:modelValue":t[18]||(t[18]=r=>e.$emit("close",r)),class:"import-dialog",fullscreen:"",overlay:""},{default:d(()=>[a(ue,{style:{position:"relative"},ref:"dialogHeight"},{default:d(()=>[a($t,{window:"",color:"primary",style:{top:"0px"},class:"d-flex justify-space-between"},{default:d(()=>[h("span",Ns,m(e.$t("Import dialog")),1),a($,{onClick:n.closeDialog,color:"white",icon:"mdi-close",class:"ms-2 text-white cursor-pointer"},null,8,["onClick"])]),_:1}),a(We,{class:"h-100 d-flex flex-column pa-lg-4",fluid:""},{default:d(()=>[a(Es,{"model-value":s.step,class:"pt-4 ma-0 flex-shrink-0",flat:""},{default:d(()=>[a(Qe,{flat:"",class:"pa-0 ma-0 elevation-0"},{default:d(()=>[a(J,{onClick:n.resetData,title:e.$t("Upload your data"),value:1,color:"primary",editable:s.step>1,complete:s.step>1},null,8,["onClick","title","editable","complete"]),a(U),a(J,{onClick:n.resetValidation,title:e.$t("Check the result"),value:2,color:"primary",editable:s.step>2,complete:s.step>2},null,8,["onClick","title","editable","complete"]),a(U),a(J,{onClick:t[0]||(t[0]=r=>s.step=3),title:e.$t("Deduplication setup"),value:3,color:"primary",editable:s.step>3,complete:s.step>3},null,8,["title","editable","complete"]),a(U),a(U),a(J,{onClick:t[1]||(t[1]=r=>s.step=4),title:e.$t("Deduplication"),value:4,color:"primary",editable:s.step>4,complete:s.step>4},null,8,["title","editable","complete"]),a(U),a(J,{title:e.$t("Import the data"),value:5,color:"primary",editable:s.step>5,complete:s.step>5},null,8,["title","editable","complete"])]),_:1})]),_:1},8,["model-value"]),s.loading?(f(),v("div",Ms,[a($e,{indeterminate:"",color:"primary",size:"x-large"})])):S("",!0),s.step===1?(f(),T(u,{key:1,modelValue:s.data,"onUpdate:modelValue":t[2]||(t[2]=r=>s.data=r),class:A({"d-none":s.loading}),disabled:i.disabled,"initial-data":i.initialData,onSetLoading:t[3]||(t[3]=r=>s.loading=r),onSetStep:t[4]||(t[4]=r=>s.step=r),onSetHeaders:t[5]||(t[5]=r=>s.headers=r),onSetBundle:t[6]||(t[6]=r=>i.initialData.bundleName=r)},null,8,["modelValue","class","disabled","initial-data"])):S("",!0),s.step===2?(f(),T(l,{key:2,modelValue:s.data,"onUpdate:modelValue":t[7]||(t[7]=r=>s.data=r),headers:n.currentHeaders,"initial-data":i.initialData,class:A({"d-none":s.loading}),"dialog-height":e.$refs.dialogHeight.$el.offsetHeight,onSetLoading:t[8]||(t[8]=r=>s.loading=r),onSetStep:t[9]||(t[9]=r=>s.step=r)},null,8,["modelValue","headers","initial-data","class","dialog-height"])):S("",!0),s.step===3?(f(),T(p,{key:3,modelValue:s.data,"onUpdate:modelValue":t[10]||(t[10]=r=>s.data=r),class:A({"d-none":s.loading}),filter:s.deduplicationFilter,onSetLoading:t[11]||(t[11]=r=>s.loading=r),onSetStep:t[12]||(t[12]=r=>s.step=r)},null,8,["modelValue","class","filter"])):S("",!0),s.step===4?(f(),T(c,{key:4,modelValue:s.data,"onUpdate:modelValue":t[13]||(t[13]=r=>s.data=r),headers:n.currentHeaders,"initial-data":i.initialData,class:A({"d-none":s.loading}),"dialog-height":e.$refs.dialogHeight.$el.offsetHeight,onSetLoading:t[14]||(t[14]=r=>s.loading=r),onSetStep:t[15]||(t[15]=r=>s.step=r)},null,8,["modelValue","headers","initial-data","class","dialog-height"])):S("",!0),s.step===5?(f(),T(b,{key:5,modelValue:s.data,"onUpdate:modelValue":t[16]||(t[16]=r=>s.data=r),headers:n.currentHeaders,"initial-data":i.initialData,"is-donation":i.isDonation,class:A({"d-none":s.loading}),onClose:n.closeDialog,onImported:t[17]||(t[17]=r=>e.$emit("imported",r))},null,8,["modelValue","headers","initial-data","is-donation","class","onClose"])):S("",!0)]),_:1})]),_:1},512)]),_:1},8,["modelValue"])}const ci=F(Ps,[["render",$s]]);export{ci as _};
