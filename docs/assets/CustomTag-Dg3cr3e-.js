import{d as g}from"./debouncer-Whu4ZLob.js";import{a9 as p,a3 as f,u as l,a4 as o,ad as y,Q as h,S as m,Y as d,a6 as c,W as r,a8 as V}from"./@vue-CVhpfiSJ.js";import{_ as b}from"./index-Dr3A69Vy.js";import{j as _,r as v,k as S,a2 as w}from"./vuetify-8yKwgmF2.js";const T=g(function(t){this.getTags()}),C={name:"CustomTag",props:{modelValue:{type:Array,default:()=>[]},entity:{type:String},field:{type:String,default:"tags"},label:{type:String},hint:{type:String}},data(){return{search:"",tags:[],loading:!1}},methods:{remove(t){this.search||(this.model.splice(this.model.length-1,1),this.$refs.tag.$el.querySelector("input").focus())},async getTags(){if(this.search.length<3)return[];this.loading=!0;const s=await this.$storage[this.entity].include(["tags"]).filter({tags:{$contains:this.search}}).find();this.tags=s.items.map(i=>i.tags).flat(),this.loading=!1}},computed:{model:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}},translatedLabel(){return this.label||this.$t("Tags")}},watch:{search:T}},k={class:"tag"};function x(t,s,i,L,e,a){var u;return f(),p("div",k,[l(w,{modelValue:a.model,"onUpdate:modelValue":s[0]||(s[0]=n=>a.model=n),ref:"tag",search:e.search,"onUpdate:search":s[1]||(s[1]=n=>e.search=n),onKeyup:V(a.remove,["delete"]),items:e.tags,"hide-no-data":!((u=e.search)!=null&&u.length),hint:i.hint,label:a.translatedLabel,loading:e.loading,variant:"underlined",clearable:"",chips:"",multiple:"","hide-selected":""},{"no-data":o(()=>[l(_,{class:y({"text-center":e.loading})},{default:o(()=>[h(l(v,{class:"margin-auto",indeterminate:"",color:"primary"},null,512),[[m,e.loading]]),h(l(S,null,{default:o(()=>[d(r(t.$t("No results matching"))+' "',1),c("strong",null,r(e.search),1),d('". '+r(t.$t("Press"))+" ",1),s[2]||(s[2]=c("kbd",null,"Enter",-1)),d(" "+r(t.$t("to create a new one")),1)]),_:1},512),[[m,!e.loading]])]),_:1},8,["class"])]),_:1},8,["modelValue","search","onKeyup","items","hide-no-data","hint","label","loading"])])}const D=b(C,[["render",x]]);export{D as _};
