import{m as ue,b as ie,c as ce,d as me,e as he,u as ve,p as ge,f as be,g as fe,h as ye,i as pe,j as Te,k as Ve,l as x,n as D,a as I,o as xe}from"./VDataTable-DS7yi-Dm.js";import{m as De,a as Ie,u as we,b as Se,c as Re}from"./filter-5KaMYqe0.js";import{p as Pe,h as ke,aG as Be,t as o,b as g,s as w,L as Ge,l as Fe,a as t,aC as b,n as m}from"./index-BYWsBYtF.js";const Ee=Pe({...ue(),...ie(),...De(),...Ie()},"VDataTableVirtual"),Oe=ke()({name:"VDataTableVirtual",props:Ee(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,S){let{attrs:R,slots:a}=S;const{groupBy:d}=ce(e),{sortBy:u,multiSort:P,mustSort:k}=me(e),{disableSort:B}=Be(e),{columns:i,headers:G,filterFunctions:F,sortFunctions:E,sortRawFunctions:H}=he(e,{groupBy:d,showSelect:o(e,"showSelect"),showExpand:o(e,"showExpand")}),{items:N}=ve(e,i),f=o(e,"search"),{filteredItems:C}=we(e,N,f,{transform:l=>l.columns,customKeyFilter:F}),{toggleSort:O}=ge({sortBy:u,multiSort:P,mustSort:k}),{sortByWithGroups:U,opened:_,extractRows:j,isGroupOpen:z,toggleGroup:A}=be({groupBy:d,sortBy:u,disableSort:B}),{sortedItems:K}=fe(e,C,U,{transform:l=>({...l.raw,...l.columns}),sortFunctions:E,sortRawFunctions:H}),{flatItems:h}=ye(K,d,_),c=g(()=>j(h.value)),{isSelected:L,select:W,selectAll:q,toggleSelect:J,someSelected:M,allSelected:Q}=pe(e,{allItems:c,currentPage:c}),{isExpanded:X,toggleExpand:Y}=Te(e),{containerRef:Z,markerRef:$,paddingTop:ee,paddingBottom:ae,computedItems:te,handleItemResize:le,handleScroll:se,handleScrollend:oe}=Se(e,h),re=g(()=>te.value.map(l=>l.raw));Ve({sortBy:u,page:w(1),itemsPerPage:w(-1),groupBy:d,search:f}),Ge({VDataTableRows:{hideNoData:o(e,"hideNoData"),noDataText:o(e,"noDataText"),loading:o(e,"loading"),loadingText:o(e,"loadingText")}});const n=g(()=>({sortBy:u.value,toggleSort:O,someSelected:M.value,allSelected:Q.value,isSelected:L,select:W,selectAll:q,toggleSelect:J,isExpanded:X,toggleExpand:Y,isGroupOpen:z,toggleGroup:A,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:h.value,columns:i.value,headers:G.value}));Fe(()=>{const l=x.filterProps(e),ne=D.filterProps(e),de=I.filterProps(e);return t(I,m({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},de),{top:()=>{var s;return(s=a.top)==null?void 0:s.call(a,n.value)},wrapper:()=>{var s,y,p;return t("div",{ref:Z,onScrollPassive:se,onScrollend:oe,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(s=a.colgroup)==null?void 0:s.call(a,n.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(x,m(l,{sticky:e.fixedHeader}),a)]),!e.hideDefaultBody&&t("tbody",null,[t("tr",{ref:$,style:{height:b(ee.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(y=a["body.prepend"])==null?void 0:y.call(a,n.value),t(D,m(R,ne,{items:re.value}),{...a,item:r=>t(Re,{key:r.internalItem.index,renderless:!0,"onUpdate:height":v=>le(r.internalItem.index,v)},{default:v=>{var V;let{itemRef:T}=v;return((V=a.item)==null?void 0:V.call(a,{...r,itemRef:T}))??t(xe,m(r.props,{ref:T,key:r.internalItem.index,index:r.internalItem.index}),a)}})}),(p=a["body.append"])==null?void 0:p.call(a,n.value),t("tr",{style:{height:b(ae.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])])])])},bottom:()=>{var s;return(s=a.bottom)==null?void 0:s.call(a,n.value)}})})}});export{Oe as V};
