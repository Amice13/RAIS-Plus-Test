var R={exports:{}},k=R.exports,A;function C(){return A||(A=1,function(I,z){(function(D,d){I.exports=d()})(k,function(){function D(t,i,r,e,n){(function a(o,h,s,l,m){for(;l>s;){if(l-s>600){var u=l-s+1,c=h-s+1,B=Math.log(u),x=.5*Math.exp(2*B/3),g=.5*Math.sqrt(B*x*(u-x)/u)*(c-u/2<0?-1:1),_=Math.max(s,Math.floor(h-c*x/u+g)),$=Math.min(l,Math.floor(h+(u-c)*x/u+g));a(o,h,_,$,m)}var E=o[h],y=s,p=l;for(d(o,s,h),m(o[l],E)>0&&d(o,s,l);y<p;){for(d(o,y,p),y++,p--;m(o[y],E)<0;)y++;for(;m(o[p],E)>0;)p--}m(o[s],E)===0?d(o,s,p):d(o,++p,l),p<=h&&(s=p+1),h<=p&&(l=p-1)}})(t,i,r||0,e||t.length-1,n||J)}function d(t,i,r){var e=t[i];t[i]=t[r],t[r]=e}function J(t,i){return t<i?-1:t>i?1:0}var f=function(t){t===void 0&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function N(t,i,r){if(!r)return i.indexOf(t);for(var e=0;e<i.length;e++)if(r(t,i[e]))return e;return-1}function v(t,i){X(t,0,t.children.length,i,t)}function X(t,i,r,e,n){n||(n=M(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var a=i;a<r;a++){var o=t.children[a];Y(n,t.leaf?e(o):o)}return n}function Y(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function P(t,i){return t.minX-i.minX}function w(t,i){return t.minY-i.minY}function q(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function b(t){return t.maxX-t.minX+(t.maxY-t.minY)}function O(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function S(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function M(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(t,i,r,e,n){for(var a=[i,r];a.length;)if(!((r=a.pop())-(i=a.pop())<=e)){var o=i+Math.ceil((r-i)/e/2)*e;D(t,o,i,r,n),a.push(i,o,o,r)}}return f.prototype.all=function(){return this._all(this.data,[])},f.prototype.search=function(t){var i=this.data,r=[];if(!S(t,i))return r;for(var e=this.toBBox,n=[];i;){for(var a=0;a<i.children.length;a++){var o=i.children[a],h=i.leaf?e(o):o;S(t,h)&&(i.leaf?r.push(o):O(t,h)?this._all(o,r):n.push(o))}i=n.pop()}return r},f.prototype.collides=function(t){var i=this.data;if(!S(t,i))return!1;for(var r=[];i;){for(var e=0;e<i.children.length;e++){var n=i.children[e],a=i.leaf?this.toBBox(n):n;if(S(t,a)){if(i.leaf||O(t,a))return!0;r.push(n)}}i=r.pop()}return!1},f.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var e=this.data;this.data=r,r=e}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},f.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},f.prototype.clear=function(){return this.data=M([]),this},f.prototype.remove=function(t,i){if(!t)return this;for(var r,e,n,a=this.data,o=this.toBBox(t),h=[],s=[];a||h.length;){if(a||(a=h.pop(),e=h[h.length-1],r=s.pop(),n=!0),a.leaf){var l=N(t,a.children,i);if(l!==-1)return a.children.splice(l,1),h.push(a),this._condense(h),this}n||a.leaf||!O(a,o)?e?(r++,a=e.children[r],n=!1):a=null:(h.push(a),s.push(r),r=0,e=a,a=a.children[0])}return this},f.prototype.toBBox=function(t){return t},f.prototype.compareMinX=function(t,i){return t.minX-i.minX},f.prototype.compareMinY=function(t,i){return t.minY-i.minY},f.prototype.toJSON=function(){return this.data},f.prototype.fromJSON=function(t){return this.data=t,this},f.prototype._all=function(t,i){for(var r=[];t;)t.leaf?i.push.apply(i,t.children):r.push.apply(r,t.children),t=r.pop();return i},f.prototype._build=function(t,i,r,e){var n,a=r-i+1,o=this._maxEntries;if(a<=o)return v(n=M(t.slice(i,r+1)),this.toBBox),n;e||(e=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,e-1))),(n=M([])).leaf=!1,n.height=e;var h=Math.ceil(a/o),s=h*Math.ceil(Math.sqrt(o));j(t,i,r,s,this.compareMinX);for(var l=i;l<=r;l+=s){var m=Math.min(l+s-1,r);j(t,l,m,h,this.compareMinY);for(var u=l;u<=m;u+=h){var c=Math.min(u+h-1,m);n.children.push(this._build(t,u,c,e-1))}}return v(n,this.toBBox),n},f.prototype._chooseSubtree=function(t,i,r,e){for(;e.push(i),!i.leaf&&e.length-1!==r;){for(var n=1/0,a=1/0,o=void 0,h=0;h<i.children.length;h++){var s=i.children[h],l=q(s),m=(u=t,c=s,(Math.max(c.maxX,u.maxX)-Math.min(c.minX,u.minX))*(Math.max(c.maxY,u.maxY)-Math.min(c.minY,u.minY))-l);m<a?(a=m,n=l<n?l:n,o=s):m===a&&l<n&&(n=l,o=s)}i=o||i.children[0]}var u,c;return i},f.prototype._insert=function(t,i,r){var e=r?t:this.toBBox(t),n=[],a=this._chooseSubtree(e,this.data,i,n);for(a.children.push(t),Y(a,e);i>=0&&n[i].children.length>this._maxEntries;)this._split(n,i),i--;this._adjustParentBBoxes(e,n,i)},f.prototype._split=function(t,i){var r=t[i],e=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,e);var a=this._chooseSplitIndex(r,n,e),o=M(r.children.splice(a,r.children.length-a));o.height=r.height,o.leaf=r.leaf,v(r,this.toBBox),v(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(r,o)},f.prototype._splitRoot=function(t,i){this.data=M([t,i]),this.data.height=t.height+1,this.data.leaf=!1,v(this.data,this.toBBox)},f.prototype._chooseSplitIndex=function(t,i,r){for(var e,n,a,o,h,s,l,m=1/0,u=1/0,c=i;c<=r-i;c++){var B=X(t,0,c,this.toBBox),x=X(t,c,r,this.toBBox),g=(n=B,a=x,o=void 0,h=void 0,s=void 0,l=void 0,o=Math.max(n.minX,a.minX),h=Math.max(n.minY,a.minY),s=Math.min(n.maxX,a.maxX),l=Math.min(n.maxY,a.maxY),Math.max(0,s-o)*Math.max(0,l-h)),_=q(B)+q(x);g<m?(m=g,e=c,u=_<u?_:u):g===m&&_<u&&(u=_,e=c)}return e||r-i},f.prototype._chooseSplitAxis=function(t,i,r){var e=t.leaf?this.compareMinX:P,n=t.leaf?this.compareMinY:w;this._allDistMargin(t,i,r,e)<this._allDistMargin(t,i,r,n)&&t.children.sort(e)},f.prototype._allDistMargin=function(t,i,r,e){t.children.sort(e);for(var n=this.toBBox,a=X(t,0,i,n),o=X(t,r-i,r,n),h=b(a)+b(o),s=i;s<r-i;s++){var l=t.children[s];Y(a,t.leaf?n(l):l),h+=b(a)}for(var m=r-i-1;m>=i;m--){var u=t.children[m];Y(o,t.leaf?n(u):u),h+=b(o)}return h},f.prototype._adjustParentBBoxes=function(t,i,r){for(var e=r;e>=0;e--)Y(i[e],t)},f.prototype._condense=function(t){for(var i=t.length-1,r=void 0;i>=0;i--)t[i].children.length===0?i>0?(r=t[i-1].children).splice(r.indexOf(t[i]),1):this.clear():v(t[i],this.toBBox)},f})}(R)),R.exports}export{C as r};
