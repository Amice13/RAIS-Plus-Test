import{y,z as R,x as v}from"./index-Dr3A69Vy.js";import{a as x}from"./arabic-transliterate-CaB0grAR.js";import{m as H}from"./md5-Ct8Y5Pza.js";import{d as D}from"./dot-object-sCKibp8s.js";import{v as M}from"./uuid-C6aID195.js";const K=e=>{let t=[e.building,e.street,e.streetType].filter(Boolean).join(" ");return t=[t,e.block].filter(Boolean).join(", block "),t=[t,e.apartment].filter(Boolean).join(", apt. "),t},B=/([^a-zа-яєіїґё']|^)([a-zа-яєіїґё])/gi,U=e=>e.toLowerCase().replace(B,t=>t.toUpperCase()),L=e=>Object.fromEntries(e.map(t=>[t.key,t.value])),_=(e,t)=>t.reduce((a,i)=>(i in e&&(a[i]=e[i]),a),{}),W=e=>Object.entries(e).map(([t,a])=>({key:t,value:a})),k=e=>e!=null&&(e instanceof Date||typeof e!="object"||(Array.isArray(e)?e.length:Object.keys(e).length)),C=e=>{if(!e||typeof e!="object"||e instanceof Date)return e;if(Array.isArray(e))return e.map(C).filter(k);const t=Object.fromEntries(Object.entries(e).map(([a,i])=>[a,C(i)]).filter(([,a])=>k(a)));return k(t)?t:void 0},I=e=>typeof e=="string"?e.replace(/ +/g," ").trim():Array.isArray(e)?e.map(I):typeof e=="object"&&e!==null?Object.fromEntries(Object.entries(e).map(([t,a])=>[t,I(a)])):e,G="arabic2latin",V="arabic";function Y(e){return x(e,G,V)}const Z=e=>e?new Date(e).toLocaleDateString("uk",{year:"numeric",month:"numeric",day:"numeric"}):"",J={A:"А",B:"В",C:"С",E:"Е",H:"Н",I:"І",K:"К",M:"М",O:"О",P:"Р",T:"Т",X:"Х",a:"а",c:"с",e:"е",i:"і",o:"о",p:"р",y:"у",x:"х"},Q=/[ABCEHIKMOPTXaceiopyx]/g,X=e=>!e||typeof e!="string"?e:e.replace(Q,t=>J[t]),q=new RegExp("(?<=^|[^а-яєіїґё']'?)([єїйюя])","gi"),ee=/[а-яєіїґ]/gi,te=/зг/gi,ae=new RegExp("(?<=[а-яєіїґ])['’](?=[а-яєіїґ])","gi"),ne={Є:"Ye",Ї:"Yi",Й:"Y",Ю:"Yu",Я:"Ya",є:"ye",ї:"yi",й:"y",ю:"yu",я:"ya"},ie={А:"A",Б:"B",В:"V",Г:"H",Ґ:"G",Д:"D",Е:"E",Є:"Ie",Ж:"Zh",З:"Z",И:"Y",І:"I",Ї:"I",Й:"I",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Shch",Ь:"",Ъ:"",Ы:"Y",Э:"E",Ю:"Iu",Я:"Ia",а:"a",б:"b",в:"v",г:"h",ґ:"g",д:"d",е:"e",є:"ie",ж:"zh",з:"z",и:"y",і:"i",ї:"i",й:"i",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ь:"",ъ:"",ы:"y",э:"E",ю:"iu",я:"ia"},se={Зг:"Zgh",зг:"zgh",ЗГ:"ZGH"},re=e=>/[а-яєіїґ]/gis.test(e);function oe(e){return re(e)?e?(e=e.replace(ae,""),e=e.replace(te,t=>se[t]),e=e.replace(q,t=>ne[t]),e=e.replace(ee,t=>ie[t]),e):"":e}var le={LOCALE:"uk-ua"};const S=Object.assign({"./capitalize.js":U,"./key-val-to-obj.js":L,"./limit-to-keys.js":_,"./obj-to-key-val.js":W,"./remove-empty.js":C,"./trim-all.js":I,"../locale/ar-lb/translit.js":Y,"../locale/uk-ua/format-date.js":Z,"../locale/uk-ua/replace-latin.js":X,"../locale/uk-ua/translit.js":oe}),E=Object.keys(S),P=new RegExp(`\\.\\.\\/locale\\/${le.LOCALE}\\/`),T=E.filter(e=>e.match(P)),ue=E.filter(e=>!T.includes(e)&&!e.match(/locale/));let g={};for(let e of ue){let t=e.replace(/^\.\/|\.js$/g,"");t=t.replace(/-([a-z])/g,(a,i)=>i.toUpperCase()),g[t]=S[e]}for(let e of T){let t=e.replace(/\.js$/,"");t=t.replace(P,""),t=t.replace(/-([a-z])/g,(a,i)=>i.toUpperCase()),g[t]=S[e]}const{translit:N,removeEmpty:de}=g,ce=e=>{if(!e)return{};const t={pCode4:e};return t.pCode3=t.pCode4.substring(0,9),t.pCode2=t.pCode4.substr(0,6),t.pCode1=t.pCode4.substr(0,4),t.admin4=N(y[t.pCode4]),t.admin3=N(y[t.pCode3]),t.admin2=N(y[t.pCode2]),t.admin1=N(y[t.pCode1]),de(t)},pe=e=>{const{people:t}=f,a={girls:0,boys:0,men:0,women:0,seniorMen:0,seniorWomen:0,disabled:0,vulnerable:0};if(!e)return a;const i=e.filter(n=>{var s;return((s=n.vulnerability)==null?void 0:s.name)==="Disability"}),r=e.filter(n=>{var s;return((s=n.vulnerability)==null?void 0:s.name)&&n.vulnerability.name!=="N/A"});for(const n of e){const s=t.getAgeGenderGroup(n);a[s]||(a[s]=0),a[s]=a[s]+1}return a.disabled=i.length,a.vulnerable=r.length,a.all=e.length,a},me=e=>{const{date:t,headOfHouseholdId:a,bundleName:i,distributionModality:r,populationType:n,organization:s}=e,o=[t,a,i,r,n,s];if(o.length!==o.filter(Boolean).length)throw new Error("The record is incomplete");const l=s.name,h=[new Date(t).toLocaleDateString("sv-SE"),a,i,r,n,l].join("|");return H(h)},ge={households:{operation:"count",variable:"id"},familySize:{variable:"familyMembersIds",operation:"countDistinct"},girls:{variable:"familyMembersIds",filter:"Female;(children|NA)",operation:"countDistinct"},boys:{variable:"familyMembersIds",filter:"Male;(children|NA)",operation:"countDistinct"},women:{variable:"familyMembersIds",filter:"Female;adult",operation:"countDistinct"},men:{variable:"familyMembersIds",filter:"Male;adult",operation:"countDistinct"},seniorWomen:{variable:"familyMembersIds",filter:"Female;senior",operation:"countDistinct"},seniorMen:{variable:"familyMembersIds",filter:"Male;senior",operation:"countDistinct"},disabled:{variable:"familyMembersIds",filter:";DS",operation:"countDistinct"}},fe=["organization.name","responsibleOrganization.name","date$month","address.pCode4","collectiveCenter.name","collectiveCenter.code","populationType"],he=["organization.name","date$month","address.pCode4","collectiveCenter.name","collectiveCenter.code","populationType"],ye=e=>{if(e===void 0)return e;let t=String(e);return t=t.replace(/\D/g,""),t.length===9&&(t=380+t),t.length===10&&(t=38+t),t.length===11&&(t=8+t),t.length===12&&(t=t.replace(/^(\d{2})(\d{3})(\d{3})(\d{2})(\d{2})$/,"+$1 ($2) $3 $4 $5")),t},be=e=>{var s,o;const{addresses:t}=f,{translit:a,trimAll:i,removeEmpty:r,capitalize:n}=g;if(e=i(e),e=r(e),(o=(s=e==null?void 0:e.translation)==null?void 0:s.uk)!=null&&o.street&&(e.translation.uk.street=n(e.translation.uk.street),e.street=a(e.translation.uk.street),e.translation.uk.fullAddress=t.formatUkrainian(e),e.translation.uk.fullAddress||delete e.translation.uk.fullAddress),e.pCode4){const l=t.pCodeToAdmins(e.pCode4);for(let h of Object.keys(l))e[h]=l[h];const c=t.pCodeToAdminsUkr(e.pCode4);e.translation||(e.translation={}),e.translation.uk||(e.translation.uk={});for(let h of Object.keys(c))e.translation.uk[h]=c[h]}return e.building&&(e.building=a(e.building.toUpperCase())),e.fullAddress=t.formatEnglish(e),e.fullAddress||delete e.fullAddress,e.location||(e.location={type:"Point"}),e.location.coordinates||(e.location.coordinates=[]),e},Ne=e=>{var i,r;if(!((r=(i=e.translation)==null?void 0:i.uk)!=null&&r.street))return"";let a=[R[e.streetType],e.translation.uk.street,e.building].filter(Boolean).join(" ");return e.block&&(a=[a,e.block].filter(Boolean).join(", корпус.")),e.apartment&&(a=[a,e.apartment].filter(Boolean).join(", кв.")),a},{removeEmpty:ve}=g,ke=e=>{if(!e)return{};const t=e.substring(0,9),a=e.substr(0,6),i=e.substr(0,4);return ve({admin1:y[i],admin2:y[a],admin3:y[t],admin4:y[e]})},$={"SN104-2024"(e,t){let a=JSON.parse(JSON.stringify(e));a=a.reduce((o,{key:l,value:c})=>(o[l]=c,o),{});const r=["Bed linen set","Towels","Blankets/Quilts","Jerrycans","Kitchen set","Mattress","Pillow","Reinforced bag","Sleeping bag","Solar / Power bank lamp","Thermos"].reduce((o,l)=>(a&&parseFloat(a[l])>0&&o++,o),0),n=parseFloat(a["Bed linen set"]||0)*11+parseFloat(a.Towels||0)*2+parseFloat(a["Blankets/Quilts"]||0)*18+parseFloat(a.Jerrycans||0)*2+parseFloat(a["Kitchen set"]||0)*10+parseFloat(a.Mattress||0)*40+parseFloat(a.Pillow||0)*3+parseFloat(a["Reinforced bag"]||0)*3+parseFloat(a["Sleeping bag"]||0)*35+parseFloat(a["Solar / Power bank lamp"]||0)*24+parseFloat(a.Thermos||0)*10,s=e.find(o=>o.key==="NFI kit");return s&&(s.value=r>=5||n/t>=70?1:0),s||e.push({key:"NFI kit",value:r>=5||n/t>=70?1:0}),e}},Ce=e=>{var t;if($[e.bundleName]){const a=((t=e.familyMembers)==null?void 0:t.length)||1;e.items=$[e.bundleName](e.items,a)}return e},Ie=e=>{const{addresses:t,assistances:a,people:i}=f,{trimAll:r,removeEmpty:n}=g;if(e=n(r(e)),e.address=t.enrichAddress(e.address),e.household&&(e.household=t.enrichAddress(e.household),e.household.type="Household"),e.headOfHousehold){const{taxId:s,passport:o,birthday:l}=e.headOfHousehold;e.headOfHousehold=i.preprocess(e.headOfHousehold),o&&(e.headOfHousehold.passport=i.normalizePassport(e.headOfHousehold.passport)),l&&(e.headOfHousehold.age=i.calculateAge({birthday:l,date:e.date})),s==="0000000000"&&o&&delete e.headOfHousehold.taxId,e.headOfHouseholdId=i.getDocumentId(e.headOfHousehold)}return e.household&&(e.household=t.enrichAddress(e.household)),e.familyMembers||(e.familyMembers=[]),e.familyMembers=e.familyMembers.filter(s=>{var o,l,c,h;return!((o=e.headOfHousehold)!=null&&o.taxId&&s.taxId&&((l=e.headOfHousehold)==null?void 0:l.taxId)===s.taxId||(c=e.headOfHousehold)!=null&&c.passport&&s.passport&&((h=e.headOfHousehold)==null?void 0:h.passport)===s.passport)}),e.familyMembers=e.familyMembers.map(s=>(s.birthday&&(s.age=i.calculateAge({birthday:s.birthday,date:e.date})),s.vulnerability||(s.vulnerability={name:"N/A",code:"NA"}),s)),e.familyStats=a.countFamilyStats([...e.familyMembers,e.headOfHousehold]),e.familyMembersIds=[e.headOfHousehold,...e.familyMembers].map(s=>i.createPersonId(s,e.headOfHouseholdId)),e.familyMembersIds=[...new Set(e.familyMembersIds)],e.peopleIds=[e.headOfHousehold,...e.familyMembers].map(s=>s.taxId||s.passport).filter(Boolean).filter(s=>s!=="0000000000"),e.hash=a.generateHash(e),a.additionalSteps&&(e=a.additionalSteps(e)),e.createdAt||(e.createdAt=new Date),e},p={households:{operation:"count",variable:"id"},familySize:{variable:"familyMembersIds",operation:"countDistinct"},girls:{variable:"familyMembersIds",filter:"Female;(children|NA)",operation:"countDistinct"},boys:{variable:"familyMembersIds",filter:"Male;(children|NA)",operation:"countDistinct"},women:{variable:"familyMembersIds",filter:"Female;adult",operation:"countDistinct"},men:{variable:"familyMembersIds",filter:"Male;adult",operation:"countDistinct"},seniorWomen:{variable:"familyMembersIds",filter:"Female;senior",operation:"countDistinct"},seniorMen:{variable:"familyMembersIds",filter:"Male;senior",operation:"countDistinct"},disabled:{variable:"familyMembersIds",filter:";DS",operation:"countDistinct"}},m=["responsibleOrganization.name","date$month","address.pCode4","collectiveCenter.name","collectiveCenter.code","populationType"],Se={"SN101-2024":[async(e,t)=>{const a="Output 10M – War-affected population supported with immediate shelter needs",i="# of households supported with emergency shelter kits",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Emergency Shelter Kit"],value:{$gt:0}}}}).should([{items:{$nested:{key:["Tarpaulin (separate)","Transparent plastic sheeting, 3x10m (separate)","OSB (separate)"],value:{$lt:1}}}}]).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10M – War-affected population supported with immediate shelter needs",i="# of households supported with emergency shelter kits and emergency shelter materials",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Tarpaulin (separate)","Transparent plastic sheeting, 3x10m (separate)","OSB (separate)"],value:{$gt:0}}}}).should([{items:{$nested:{key:["Emergency Shelter Kit"],value:{$gt:0}}}}]).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10M – War-affected population supported with immediate shelter needs",i="# of households supported with emergency shelter materials",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Tarpaulin (separate)","Transparent plastic sheeting, 3x10m (separate)","OSB (separate)"],value:{$gt:0}}}}).should([{items:{$nested:{key:["Emergency Shelter Kit"],value:{$lt:0}}}}]).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10M – War-affected population supported with immediate shelter needs",i="# of households supported with installation of emergency shelter materials or ESK",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,strings:{$nested:{key:["Assistance status"],value:{$eq:"Assisted by partner"}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n}],"SN104-2024":[async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of elderly receiving incontinence items",{households:r,seniorMen:n,seniorWomen:s}=p,{assistances:o}=e;let l=await o.useIndex("bundleName").filter({...t,items:{$nested:{key:["Adult diapers"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:{households:r,seniorMen:n,seniorWomen:s}});return l=l.map(c=>({...c,indicator:i,output:a,distributionModality:"Partner"})),l},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of households receiving non-standard NFIs",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Adult diapers","Baby diapers","Beds","Buckets","Folding beds","Inflated mats","Partition","Other"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of households supported with heating appliances (in-kind)",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Heaters"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of people receiving hygiene packs/kits",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Hygiene kit"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of people receiving other items (clothes, shoes, etc.)",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Clothes/Shoes","Clothes","Shoes"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of households receiving UNHCR standard non-food items (Kit)",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["NFI kit"],value:{$gt:0}}}}).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n},async(e,t)=>{const a="Output 10K – Emergency response provided to help people meet their basic needs",i="# of households receiving UNHCR standard non-food items (Non-Kit)",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,items:{$nested:{key:["Bed linen set","Towels","Blankets/Quilts","Jerrycans","Kitchen set","Mattress","Pillow","Reinforced bag","Sleeping bag","Solar / Power bank lamp","Thermos"],value:{$gt:0}}}}).should([{items:{$nested:{key:["NFI kit"],value:{$lte:0}}}}]).aggregate({groupBy:m,aggs:p});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"Partner"})),n}]},Ae={IDPs:"IDP","Non-displaced":"Non-displaced person",Returnees:"Returnee"},$e=e=>Ae[e]||e,we=e=>{var a;const{addresses:t}=f;return e=D.object(e),e.items&&(e.items=v(e.items)),e.strings&&(e.strings=v(e.strings)),e.address&&(e.address=t.enrichAddress(e.address),e.address.fullAdmin1=`${e.address.admin1}_${e.address.translation.uk.admin1}`,e.address.fullAdmin2=`${e.address.admin2}_${e.address.translation.uk.admin2}`,e.address.fullAdmin3=`${e.address.admin3}_${e.address.pCode3}_${e.address.translation.uk.admin3}`,e.address.fullAdmin4=`${e.address.admin4}_${e.address.pCode4}_${e.address.translation.uk.admin4}`),e.populationType&&(e.populationType=$e(e.populationType)),(a=e==null?void 0:e.collectiveCenter)!=null&&a.code&&(e.collectiveCenter.fullName=[e.collectiveCenter.name,e.collectiveCenter.code].join("_")),e},u={households:{operation:"count",variable:"id"},familySize:{variable:"familyMembersIds",operation:"countDistinct"},girls:{variable:"familyMembersIds",filter:"Female;(children|NA)",operation:"countDistinct"},boys:{variable:"familyMembersIds",filter:"Male;(children|NA)",operation:"countDistinct"},women:{variable:"familyMembersIds",filter:"Female;adult",operation:"countDistinct"},men:{variable:"familyMembersIds",filter:"Male;adult",operation:"countDistinct"},seniorWomen:{variable:"familyMembersIds",filter:"Female;senior",operation:"countDistinct"},seniorMen:{variable:"familyMembersIds",filter:"Male;senior",operation:"countDistinct"},disabled:{variable:"familyMembersIds",filter:";DS",operation:"countDistinct"}},d=["organization.name","responsibleOrganization.name","date$month","address.pCode4","collectiveCenter.name","collectiveCenter.code","populationType"],Oe={"SN101-2024":[async(e,t)=>{const a="Emergency Shelter Support",i="# supported with emergency shelter kits",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN101-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Emergency Shelter Support",i="# supported with emergency shelter kits",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN101-2024",distributionModality:["In-kind"],items:{$nested:{key:["Emergency Shelter Kit"],value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n},async(e,t)=>{const a="Emergency Shelter Support",i="# supported with emergency construction materials",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN101-2024",distributionModality:["In-kind"],items:{$nested:{key:["Tarpaulin (separate)","Transparent plastic sheeting, 3x10m (separate)","OSB (separate)"],value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}],"SN102-2024":[async(e,t)=>{const a="Emergency Shelter Support",i="# supported with emergency construction materials (other)",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN102-2024",distributionModality:["In-kind"],items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}],"SN104-2024":[async(e,t)=>{const a="Emergency NFI support",i="# supported with household NFI",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN104-2024",date:{$gte:"2025-03-01"},distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Emergency NFI support",i="# supported with household NFI",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN104-2024",distributionModality:["In-kind"],date:{$gte:"2025-03-01"},items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n},async(e,t)=>{const a="Personal Insulation",i="# supported with NFIs for winter",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN104-2024",date:{$lt:"2025-03-01"},distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Personal Insulation",i="# supported with NFIs for winter",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN104-2024",distributionModality:["In-kind"],date:{$gte:"2025-03-01"},items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}],"SN105-2024":[async(e,t)=>{const a="Shelter Insulation",i="# supported through insulation of substandard houses",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN105-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Shelter Insulation",i="# supported through insulation of substandard houses",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN105-2024",distributionModality:["In-kind"],items:{$nested:{key:["Emergency Shelter Kit"],value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}],"SN106-2024":[async(e,t)=>{const a="Winter Cash for utilities",i="# supported with cash for utilities",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN106-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n}],"SN107-2024":[async(e,t)=>{const a="Winter Heating",i="# supported with winter heating appliances",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN107-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Winter Heating",i="# supported with winter heating appliances",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN107-2024",distributionModality:["In-kind"],items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}],"SN108-2024":[async(e,t)=>{const a="Winter Heating",i="# supported with winter energy",{assistances:r}=e;let n=await r.filter({...t,bundleName:"SN108-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Winter Heating",i="# supported with winter energy",{assistances:r}=e;let n=await r.filter({...t,bundleName:"SN108-2024",distributionModality:["In-kind"],items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"In-kind"})),n}],"SN109-2024":[async(e,t)=>{const a="Personal Insulation",i="# supported with winter clothes",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN109-2024",distributionModality:["Cash","Voucher"],value:{$gt:0}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"cash-voucher"})),n},async(e,t)=>{const a="Personal Insulation",i="# supported with winter clothes",{assistances:r}=e;let n=await r.useIndex("bundleName").filter({...t,bundleName:"SN109-2024",distributionModality:["In-kind"],items:{$nested:{value:{$gt:0}}}}).aggregate({groupBy:d,aggs:u});return n=n.map(s=>({...s,indicator:i,output:a,distributionModality:"in-kind"})),n}]},De={IDPs:"Internally Displaced","Non-displaced":"Non-Displaced"},Me={TTA:"Tenth of April (TOA)",R2P:"Right to Protection (R2P)","100% Life Zaporizhzhia":"100% Life Zaporizhzhia (100%Life Zaporizhzhia)",UNICEF:"United Nations Children's Fund (UNICEF)",MC:"Mercy Corps (MC)",ADD:"Association for Democratic Development (ADD)",Anika:"Anika (Anika)",USTRATEGY:"Southern Development Strategy Forum (USTRATEGY)",PUI:"Premiere Urgence Internationale (PUI)",TseNS:"Tse-Nasha Sprava! (TseNS)",ZOA:"ZOA (ZOA)","New Way":"New Way (NW)",Nukraine:"NUkraine (NUkr)",BTFT:"Building the Future Together (BTFT)",EEF:"East Europe Foundation (EEF)",Help:"Help - Hilfe zur Selbsthilfe e.V. (HELP e.V.)",OCHA:"United Nations Office for the Coordination of Humanitarian Affairs (OCHA)","I am saved":"I Am Saved (IAS)","Malteser International":"Malteser International (MI)","World Relief":"World Relief (WorldRelief)",Avalyst:"Avalyst (Avalyst)",NEEKA:"NEEKA (NEEKA)",InterSOS:"INTERSOS (INTERSOS)",NRC:"Norwegian Refugee Council (NRC)",SSS:"Stabilization Support Services (SSS)",DRC:"Danish Refugee Council (DRC)",Poruch:"Poruch (Poruch)",LWF:"Lutheran World Federation (LWF)",SCI:"Save the Children (SCI)",Medair:"Medair (Medair)","HEKS EPER":"HEKS/EPER Swiss Church Aid (HEKS-EPER)",ERC:"Estonian Refugee Council (ERC)",Posmishka:"Posmishka UA Charity Fund (Posmishka)",PIN:"People In Need (PIN)",CORE:"CORE (CORE)",GER3:"Global Emergency Relief, Recovery and Reconstruction (GER3)",PAH:"Polish Humanitarian Action (PAH)",PIP:"People in Peril (PIP)",TGH:"Triangle Generation Humanitaire (Triangle)","DISTRICT 1":"District #1 (District#1)",SDC:"Swiss Agency for Development and Cooperation (SDC)","East-SOS":"East-SOS (East-SOS)",DOU:"Dorcas Ukraine (DUA)",SPIR:"Samaritan's Purse (SPIR)",SI:"Solidarités International (SI)",GAct:"Good Actions (GAct)",JERU:"Joint Emergency Response in Ukraine (JERU)","Arche Nova":"Arche Nova (AN)","Plich-o-Plich":"Plich-o-Plich (Plich-o-Plich)",AoS:"Angels of Salvation (AOS)",UNHCR:"United Nations High Commissioner for Refugees (UNHCR)",CaritasUA:"Caritas Ukraine (CaritasUA)",Proliska:"Proliska (Proliska)",CrimeaSOS:"CrimeaSOS (CrimeaSOS)",ACTED:"Agency for Technical Cooperation and Development (ACTED)",Rokada:"ROKADA (ROKADA)","Caritas Kramatorsk":"Caritas Kramatorsk (Caritas Kramatorsk)","Caritas Zaporizhzhia":"Caritas Zaporizhzhia (Caritas Zaporizhzhia)","Caritas Chernihiv":"Caritas Chernihiv (Caritas Chernihiv)","Caritas Mykolaiv":"Caritas Mykolaiv (Caritas Mykolaiv)","Caritas Donetsk":"Caritas Donetsk (Caritas Donetsk)","Caritas Poltava":"Caritas Poltava (Caritas Poltava)","Caritas Kherson":"Caritas Kherson (Caritas Kherson)","Caritas Odesa":"Caritas Odesa (Caritas Odesa)",SoR:"Source of Revival (SR)",HOPE:"Project HOPE (HOPE)","Unity for the future":"Unity for the Future (UFF)","Caritas Kamianske":"Caritas Kamianske (Caritas Kamianske)","Caritas Kryvyi Rih":"Caritas Kryvyi Rih (Caritas Kryvyi Rih)","Caritas Mariupol":"Caritas Mariupol (Caritas Mariupol)","Diakonie Katastrophenhilfe":"Diakonie Katastrophenhilfe (DK)",PARD:"Podolian Agency for Regional Development (PARD)","Caritas Beryslav":"Caritas Bеryslav (Caritas Beryslav)"},w=e=>Me[e]||e,Ee=e=>De[e]||e,Pe=e=>{var a,i,r,n,s;const{addresses:t}=f;if(e=D.object(e),e.items&&(e.items=v(e.items)),e.strings&&(e.strings=v(e.strings)),e.address&&(e.address=t.enrichAddress(e.address),e.address.fullAdmin1=`${e.address.admin1}_${e.address.translation.uk.admin1}`,e.address.fullAdmin2=`${e.address.admin2}_${e.address.translation.uk.admin2}`,e.address.fullAdmin3=`${e.address.admin3}_${e.address.pCode3}_${e.address.translation.uk.admin3}`,e.address.fullAdmin4=`${e.address.admin4}_${e.address.pCode4}_${e.address.translation.uk.admin4}`),!((a=e.responsibleOrganization)!=null&&a.name)&&((i=e.organization)!=null&&i.name)&&(e.responsibleOrganization=e.organization),(r=e.organization)!=null&&r.name&&(e.organization.name=w(e.organization.name)),(n=e.responsibleOrganization)!=null&&n.name){e.responsibleOrganization.name=w(e.responsibleOrganization.name);let o=e.responsibleOrganization.name.match(new RegExp("(?<=\\().*?(?=\\))","g"));o=o?o[0]:e.responsibleOrganization.name,e.additionalCode=`SNFI-${o}-00001`}return e.populationType&&(e.populationType=Ee(e.populationType)),(s=e==null?void 0:e.collectiveCenter)!=null&&s.code&&(e.collectiveCenter.fullName=[e.collectiveCenter.name,e.collectiveCenter.code].join("_")),e},Te=e=>(e.taxId==="0000000000"?"":e.taxId)||e.passport||M(),O=new Date("1899-12-31"),je=e=>{if(!e)return{};if(!e.match(/^\d{10}$/))return{};let t=parseInt(e.slice(0,5));["7","8","9"].includes(e[0])&&(t=t-63475);let a=new Date(O).setTime(O.getTime()+t*24*3600*1e3);a=new Date(a).toLocaleDateString("sv").substring(0,10);const i=new Date(Date.now()-new Date(a).getTime()).getUTCFullYear()-1970,r=parseInt(e.slice(8,9))%2===0?"Female":"Male";return{birthday:a,gender:r,age:i}},ze=e=>{if(!e)return e;if(e=String(e),e.match(/^[а-я]{2}\s*\d{6}$/i))return e=e.toUpperCase(),e=e.replace(/([а-я]{2})(\d{6})/i,"$1 $2"),e;if(e.match(/^\d+$/)&&e.length<=9)return e.padStart(9,"0")},Fe=e=>{const{_global:t,people:a}=f,{trimAll:i,removeEmpty:r,capitalize:n,translit:s}=g;if(e=r(i(e)),!e)return{};e.givenName&&(e.givenName=n(e.givenName)),e.familyName&&(e.familyName=n(e.familyName)),e.additionalName&&(e.additionalName=n(e.additionalName)),e!=null&&e.phone&&(e.phone=e.phone.map(t.normalizePhone)),e.passport&&(e.passport=a.normalizePassport(e.passport));const o=e;if(o.fullName=a.normalizeName(o),o.fullName||delete o.fullName,o.passport&&o.taxId==="0000000000"&&delete o.taxId,!o.translation)return o;for(const l of Object.keys(o.translation)){const c=o.translation[l];c.fullName=a.normalizeName(c),e.givenName||(e.givenName=s(c.givenName)),e.familyName||(e.familyName=s(c.familyName)),e.additionalName||(e.additionalName=s(c.additionalName))}if(o.fullName=a.normalizeName(o),o.taxId){const l=a.getInformationFromTaxId(o.taxId);!o.gender&&l.gender&&(o.gender=l.gender),!o.birthday&&l.birthday&&(o.birthday=l.birthday),!o.age&&l.age&&(o.age=l.age)}return!o.taxId&&o.passport&&(o.noTaxId=!0),o},Re=e=>{const{addresses:t}=f,{trimAll:a,removeEmpty:i}=g;return e=i(a(e)),e.address=t.enrichAddress(e.address),e},xe=({birthday:e,date:t})=>{const a=t?new Date(t):new Date().toLocaleDateString("sv-SE"),i=new Date(a),r=new Date(e),n=i-r,s=new Date(n);return Math.abs(s.getUTCFullYear()-1970)},He=(e,t)=>{var i;const{people:a}=f;return t||(t=M()),[e.gender||"NA",e.age!==void 0?a.getAgeGroup(e.age):"NA",t,e.birthday?new Date(e.birthday).toLocaleDateString("sv-SE"):"NA",a.getDocumentId(e),((i=e.vulnerability)==null?void 0:i.code)||"NA"].join(";")},j=e=>(e=parseInt(e),isNaN(e)?"other":e<18?"children":e<60?"adult":"senior"),Ke=e=>{const t=parseInt(e.age),a=e.gender;return typeof t!="number"||!a?"adultsOther":a==="Female"?t<18?"girls":t<60?"women":"seniorWomen":a==="Male"?t<18?"boys":t<60?"men":"seniorMen":j(t)+"Other"},Be=e=>[e.familyName,e.givenName,e.additionalName].filter(Boolean).join(" "),Ue=e=>{const{addresses:t}=f,{trimAll:a,removeEmpty:i}=g;return e=i(a(e)),e.address=t.enrichAddress(e.address),e},Le=e=>{var i,r;const t=new Date().getTimezoneOffset()*6e4,a=new Date(new Date(e.date).getTime()-t).toISOString().substring(0,10);return[e.bundleName,(i=e.organization)==null?void 0:i.name,(r=e.address)==null?void 0:r.pCode4,e.populationType,a].filter(Boolean).join("-")},_e=e=>{const{addresses:t,requests:a}=f,{trimAll:i,removeEmpty:r}=g;if(e=r(i(e)),e.date){const n=new Date().getTimezoneOffset()*6e4;e.date=new Date(new Date(e.date).getTime()-n).toISOString().substring(0,10)}return e.publicId=a.generatePublicId(e),e.address=t.enrichAddress(e.address),e.assignees||(e.assignees=[]),e},We=e=>{var r,n;const{people:t}=f,{trimAll:a,removeEmpty:i}=g;return e=i(a(e)),e?(!e.email&&((n=(r=e.person)==null?void 0:r.email)!=null&&n.length)&&(e.email=e.person.email[0]),e.email&&(e.email=e.email.toLowerCase()),e.person=t.preprocess(e.person),e):{}};var Ge={LOCALE:"uk-ua"};const A=Object.assign({"./addresses-format-english.js":K,"./addresses-p-code-to-admins.js":ce,"./assistances-count-family-stats.js":pe,"./assistances-generate-hash.js":me,"./indicators-demography-aggs.js":ge,"./indicators-group-by.js":fe,"./indicators-unhcr-group-by.js":he,"./locale/uk-ua/_global-normalize-phone.js":ye,"./locale/uk-ua/addresses-enrich-address.js":be,"./locale/uk-ua/addresses-format-ukrainian.js":Ne,"./locale/uk-ua/addresses-p-code-to-admins-ukr.js":ke,"./locale/uk-ua/assistances-additional-steps.js":Ce,"./locale/uk-ua/assistances-preprocess.js":Ie,"./locale/uk-ua/indicators-custom-definitions.js":Se,"./locale/uk-ua/indicators-custom-preprocess.js":we,"./locale/uk-ua/indicators-definitions.js":Oe,"./locale/uk-ua/indicators-preprocess.js":Pe,"./locale/uk-ua/people-get-document-id.js":Te,"./locale/uk-ua/people-get-information-from-tax-id.js":je,"./locale/uk-ua/people-normalize-passport.js":ze,"./locale/uk-ua/people-preprocess.js":Fe,"./organizations-preprocess.js":Re,"./people-calculate-age.js":xe,"./people-create-person-id.js":He,"./people-get-age-gender-group.js":Ke,"./people-get-age-group.js":j,"./people-normalize-name.js":Be,"./people-organizations-preprocess.js":Ue,"./requests-generate-public-id.js":Le,"./requests-preprocess.js":_e,"./users-preprocess.js":We}),z=Object.keys(A),Ve=new RegExp(`\\.\\/locale\\/${Ge.LOCALE}\\/`),F=z.filter(e=>e.match(Ve)),Ye=z.filter(e=>!F.includes(e)&&!e.match(/locale/));let b={};for(let e of Ye){const t=e.match(/^\.\/(?<entity>[^/-]*?)-(?<fn>.*?)\.js$/);let{entity:a,fn:i}=t.groups;i=i.replace(/-([a-z])/g,(r,n)=>n.toUpperCase()),b[a]||(b[a]={}),b[a][i]=A[e]}for(let e of F){const t=e.match(/\/(?<entity>[^/-]*?)-(?<fn>[^/]*?)\.js$/);let{entity:a,fn:i}=t.groups;i=i.replace(/-([a-z])/g,(r,n)=>n.toUpperCase()),b[a]||(b[a]={}),b[a][i]=A[e]}const Ze=(e,t)=>{const a={get(r,n){if(!t[n])return s=>s;if(t[n])return t[n]},has(r,n){return typeof modulesList[n]<"u"},ownKeys(){return Object.keys(modulesList)},set(){throw new Error("You can't create new modules")},deleteProperty(r,n){throw Error("You can't delete modules;")},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}}};return new Proxy(t,a)},f=Object.fromEntries(Object.entries(b).map(([e,t])=>[e,Ze(e,t)]));export{f as p};
