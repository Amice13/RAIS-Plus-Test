import{c as ve,b as be,d as ge,u as fe,p as ye,e as pe,f as Te,g as Ve,h as xe,i as De,j as Ie,k as S,l as w,a as R,m as Se,n as we,o as Re}from"./VDataTable-BrBBORsC.js";import{u as ke,a as Pe,b as Be,m as Fe,c as Ge}from"./filter-ahsWVyiP.js";import{h as He,p as Ee,aH as Ne,t as s,b as v,s as k,K as Ke,m as Oe,a as t,aF as b,q as g,S as Ue}from"./index-BtIo2-Z_.js";const _e=Ee({...Ue(Re(),["hideDefaultFooter"]),...we(),...Ge(),...Fe()},"VDataTableVirtual"),Ae=He()({name:"VDataTableVirtual",props:_e(),emits:{"update:modelValue":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0},setup(e,P){let{attrs:B,slots:a}=P;const{groupBy:d}=ve(e),{sortBy:u,multiSort:F,mustSort:G}=be(e),{disableSort:H}=Ne(e),{columns:i,headers:E,filterFunctions:N,sortFunctions:K,sortRawFunctions:O}=ge(e,{groupBy:d,showSelect:s(()=>e.showSelect),showExpand:s(()=>e.showExpand)}),{items:U}=fe(e,i),f=s(()=>e.search),{filteredItems:_}=ke(e,U,f,{transform:l=>l.columns,customKeyFilter:N}),{toggleSort:j}=Ie({sortBy:u,multiSort:F,mustSort:G}),{sortByWithGroups:q,opened:z,extractRows:A,isGroupOpen:C,toggleGroup:W}=ye({groupBy:d,sortBy:u,disableSort:H}),{sortedItems:J}=pe(e,_,q,{transform:l=>({...l.raw,...l.columns}),sortFunctions:K,sortRawFunctions:O}),{flatItems:m}=Te(J,d,z),c=v(()=>A(m.value)),{isSelected:L,select:M,selectAll:Q,toggleSelect:X,someSelected:Y,allSelected:Z}=Ve(e,{allItems:c,currentPage:c}),{isExpanded:$,toggleExpand:ee}=xe(e),{containerRef:ae,markerRef:te,paddingTop:le,paddingBottom:re,computedItems:oe,handleItemResize:se,handleScroll:ne,handleScrollend:de,calculateVisibleItems:ue,scrollToIndex:ie}=Pe(e,m),ce=v(()=>oe.value.map(l=>l.raw));De({sortBy:u,page:k(1),itemsPerPage:k(-1),groupBy:d,search:f}),Ke({VDataTableRows:{hideNoData:s(()=>e.hideNoData),noDataText:s(()=>e.noDataText),loading:s(()=>e.loading),loadingText:s(()=>e.loadingText)}});const r=v(()=>({sortBy:u.value,toggleSort:j,someSelected:Y.value,allSelected:Z.value,isSelected:L,select:M,selectAll:Q,toggleSelect:X,isExpanded:$,toggleExpand:ee,isGroupOpen:C,toggleGroup:W,items:c.value.map(l=>l.raw),internalItems:c.value,groupedItems:m.value,columns:i.value,headers:E.value}));return Oe(()=>{const l=S.filterProps(e),me=w.filterProps(e),he=R.filterProps(e);return t(R,g({class:["v-data-table",{"v-data-table--loading":e.loading},e.class],style:e.style},he,{fixedHeader:e.fixedHeader||e.sticky}),{top:()=>{var o;return(o=a.top)==null?void 0:o.call(a,r.value)},wrapper:()=>{var o,y,p,T,V,x;return t("div",{ref:ae,onScrollPassive:ne,onScrollend:de,class:"v-table__wrapper",style:{height:b(e.height)}},[t("table",null,[(o=a.colgroup)==null?void 0:o.call(a,r.value),!e.hideDefaultHeader&&t("thead",{key:"thead"},[t(S,l,a)]),(y=a.thead)==null?void 0:y.call(a,r.value),!e.hideDefaultBody&&t("tbody",{key:"tbody"},[t("tr",{ref:te,style:{height:b(le.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)]),(p=a["body.prepend"])==null?void 0:p.call(a,r.value),t(w,g(B,me,{items:ce.value}),{...a,item:n=>t(Be,{key:n.internalItem.index,renderless:!0,"onUpdate:height":h=>se(n.internalItem.index,h)},{default:h=>{var I;let{itemRef:D}=h;return((I=a.item)==null?void 0:I.call(a,{...n,itemRef:D}))??t(Se,g(n.props,{ref:D,key:n.internalItem.index,index:n.internalItem.index}),a)}})}),(T=a["body.append"])==null?void 0:T.call(a,r.value),t("tr",{style:{height:b(re.value),border:0}},[t("td",{colspan:i.value.length,style:{height:0,border:0}},null)])]),(V=a.tbody)==null?void 0:V.call(a,r.value),(x=a.tfoot)==null?void 0:x.call(a,r.value)])])},bottom:()=>{var o;return(o=a.bottom)==null?void 0:o.call(a,r.value)}})}),{calculateVisibleItems:ue,scrollToIndex:ie}}});export{Ae as V};
