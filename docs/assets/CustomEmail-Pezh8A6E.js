import{R as w,a9 as n,a3 as d,Q as i,S as o,a6 as t,u as c,a4 as h,Y as f,W as u,F as p,aa as y,a2 as V,a8 as E,ad as z}from"./@vue-CVhpfiSJ.js";import{_ as B}from"./index-Dr3A69Vy.js";import{n as _,I as b,f as C}from"./vuetify-8yKwgmF2.js";const A=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/,N=function(){return[e=>A.test(e)||this.$t("This is an invalid email")]},S=()=>({mask:"A",tokens:{A:{pattern:/[A-z\d_.~/@?&=#%+[\]!\$\(\)\*,;-]/,multiple:!0}}}),T={name:"CustomEmail",props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1},mode:{type:String,default:"view"},showEmpty:{type:Boolean,default:!1},narrow:{type:Boolean,default:!1}},computed:{options:S,validationRules:N,model:{get(){return this.modelValue},async set(e){console.log(e),this.$emit("update:modelValue",e),await this.nextTick()}}},mounted(){!this.multiple&&!this.modelValue.length&&this.model.push("")},data(){return{key:0}},methods:{addEmail(e){if(document.activeElement.tagName==="I")return this.removeEmail(e);this.model.push(""),this.key++,this.$nextTick(()=>{let l=this.$refs.emails.querySelectorAll("input");l[l.length-1].focus()})},removeEmail(e){this.model.splice(e,1),this.key++}}},I={class:"email mt-2"},D={class:"d-flex"},F={class:"mr-2"},K=["href"];function R(e,l,s,U,k,a){const g=w("maska");return d(),n("div",I,[i(t("div",null,[t("div",D,[t("div",F,[c(_,{left:""},{default:h(()=>l[0]||(l[0]=[f("mdi-email")])),_:1})]),t("div",null,[i(t("div",{class:"mb-4"},u(e.$t("No emails are added.")),513),[[o,a.model.length===0]]),(d(!0),n(p,null,y(a.model,r=>(d(),n("div",{key:r,class:"mb-2"},[t("a",{href:"mailto:"+r},u(r),9,K)]))),128))])])],512),[[o,s.mode==="view"&&(a.model.length>0||s.showEmpty)]]),i((d(),n("div",{ref:"emails",key:k.key},[i(t("div",{class:"mb-4"},u(e.$t("You have not added any email yet.")),513),[[o,a.model.length===0]]),(d(!0),n(p,null,y(a.model,(r,m)=>i((d(),V(b,{modelValue:a.model[m],"onUpdate:modelValue":v=>a.model[m]=v,key:`email-${m}`,name:`email-${m}`,label:e.$t("Email"),rules:a.validationRules,"append-icon":a.model.length>1?"mdi-delete":"","onClick:append":a.removeEmail,onKeydown:E(v=>a.addEmail(m),["enter"]),placeholder:"my-email@unhcr.org","validate-on":"blur",variant:"underlined"},null,8,["modelValue","onUpdate:modelValue","name","label","rules","append-icon","onClick:append","onKeydown"])),[[g,void 0,a.options]])),128)),i(c(C,{onClick:a.addEmail,class:z([{"mb-4":s.narrow},"mt-4"]),small:s.narrow},{default:h(()=>[c(_,{left:""},{default:h(()=>l[1]||(l[1]=[f("mdi-plus")])),_:1}),f(" "+u(e.$t("Add email")),1)]),_:1},8,["onClick","class","small"]),[[o,s.multiple]])])),[[o,s.mode==="edit"]])])}const L=B(T,[["render",R]]);export{L as _};
